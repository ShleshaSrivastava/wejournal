"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@edgestore";
exports.ids = ["vendor-chunks/@edgestore"];
exports.modules = {

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    randomUUID: (crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID)\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9uYXRpdmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBQzVCLGlFQUFlO0lBQ2JDLFlBQVlELDBEQUFpQjtBQUMvQixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZS1qb3VybmFsLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvbmF0aXZlLmpzPzQxMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuZXhwb3J0IGRlZmF1bHQge1xuICByYW5kb21VVUlEOiBjcnlwdG8ucmFuZG9tVVVJRFxufTsiXSwibmFtZXMiOlsiY3J5cHRvIiwicmFuZG9tVVVJRCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9yZWdleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUscUhBQXFILEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZS1qb3VybmFsLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcmVnZXguanM/YmYzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        crypto__WEBPACK_IMPORTED_MODULE_0___default().randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9ybmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBQzVCLE1BQU1DLFlBQVksSUFBSUMsV0FBVyxNQUFNLHFDQUFxQztBQUU1RSxJQUFJQyxVQUFVRixVQUFVRyxNQUFNO0FBQ2YsU0FBU0M7SUFDdEIsSUFBSUYsVUFBVUYsVUFBVUcsTUFBTSxHQUFHLElBQUk7UUFDbkNKLDREQUFxQixDQUFDQztRQUN0QkUsVUFBVTtJQUNaO0lBRUEsT0FBT0YsVUFBVU0sS0FBSyxDQUFDSixTQUFTQSxXQUFXO0FBQzdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3JuZy5qcz9lNDNhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmNvbnN0IHJuZHM4UG9vbCA9IG5ldyBVaW50OEFycmF5KDI1Nik7IC8vICMgb2YgcmFuZG9tIHZhbHVlcyB0byBwcmUtYWxsb2NhdGVcblxubGV0IHBvb2xQdHIgPSBybmRzOFBvb2wubGVuZ3RoO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICBpZiAocG9vbFB0ciA+IHJuZHM4UG9vbC5sZW5ndGggLSAxNikge1xuICAgIGNyeXB0by5yYW5kb21GaWxsU3luYyhybmRzOFBvb2wpO1xuICAgIHBvb2xQdHIgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHJuZHM4UG9vbC5zbGljZShwb29sUHRyLCBwb29sUHRyICs9IDE2KTtcbn0iXSwibmFtZXMiOlsiY3J5cHRvIiwicm5kczhQb29sIiwiVWludDhBcnJheSIsInBvb2xQdHIiLCJsZW5ndGgiLCJybmciLCJyYW5kb21GaWxsU3luYyIsInNsaWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js\");\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */ const byteToHex = [];\nfor(let i = 0; i < 256; ++i){\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n    // Note: Be careful editing this code!  It's been tuned for performance\n    // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n    return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \"-\" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \"-\" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \"-\" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \"-\" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n    // of the following:\n    // - One or more input array values don't map to a hex octet (leading to\n    // \"undefined\" in the uuid)\n    // - Invalid input values for the RFC `version` or `variant` fields\n    if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n        throw TypeError(\"Stringified UUID is invalid\");\n    }\n    return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zdHJpbmdpZnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ3JDOzs7Q0FHQyxHQUVELE1BQU1DLFlBQVksRUFBRTtBQUVwQixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSSxLQUFLLEVBQUVBLEVBQUc7SUFDNUJELFVBQVVFLElBQUksQ0FBQyxDQUFDRCxJQUFJLEtBQUksRUFBR0UsUUFBUSxDQUFDLElBQUlDLEtBQUssQ0FBQztBQUNoRDtBQUVPLFNBQVNDLGdCQUFnQkMsR0FBRyxFQUFFQyxTQUFTLENBQUM7SUFDN0MsdUVBQXVFO0lBQ3ZFLG9GQUFvRjtJQUNwRixPQUFPUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBRyxNQUFNUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUcsTUFBTVAsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHLE1BQU1QLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBRyxNQUFNUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxHQUFHLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsR0FBRyxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEdBQUcsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxHQUFHLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsR0FBRyxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEdBQUcsQ0FBQztBQUNwZjtBQUVBLFNBQVNDLFVBQVVGLEdBQUcsRUFBRUMsU0FBUyxDQUFDO0lBQ2hDLE1BQU1FLE9BQU9KLGdCQUFnQkMsS0FBS0MsU0FBUyw0RUFBNEU7SUFDdkgsb0JBQW9CO0lBQ3BCLHdFQUF3RTtJQUN4RSwyQkFBMkI7SUFDM0IsbUVBQW1FO0lBRW5FLElBQUksQ0FBQ1Isd0RBQVFBLENBQUNVLE9BQU87UUFDbkIsTUFBTUMsVUFBVTtJQUNsQjtJQUVBLE9BQU9EO0FBQ1Q7QUFFQSxpRUFBZUQsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlLWpvdXJuYWwvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zdHJpbmdpZnkuanM/ZWMyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cblxuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIHJldHVybiBieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJieXRlVG9IZXgiLCJpIiwicHVzaCIsInRvU3RyaW5nIiwic2xpY2UiLCJ1bnNhZmVTdHJpbmdpZnkiLCJhcnIiLCJvZmZzZXQiLCJzdHJpbmdpZnkiLCJ1dWlkIiwiVHlwZUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js\");\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n    if (_native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID && !buf && !options) {\n        return _native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = rnds[6] & 0x0f | 0x40;\n    rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n    if (buf) {\n        offset = offset || 0;\n        for(let i = 0; i < 16; ++i){\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ047QUFDc0I7QUFFakQsU0FBU0csR0FBR0MsT0FBTyxFQUFFQyxHQUFHLEVBQUVDLE1BQU07SUFDOUIsSUFBSU4sa0RBQU1BLENBQUNPLFVBQVUsSUFBSSxDQUFDRixPQUFPLENBQUNELFNBQVM7UUFDekMsT0FBT0osa0RBQU1BLENBQUNPLFVBQVU7SUFDMUI7SUFFQUgsVUFBVUEsV0FBVyxDQUFDO0lBQ3RCLE1BQU1JLE9BQU9KLFFBQVFLLE1BQU0sSUFBSSxDQUFDTCxRQUFRSCxHQUFHLElBQUlBLCtDQUFFLEtBQU0sZ0VBQWdFO0lBRXZITyxJQUFJLENBQUMsRUFBRSxHQUFHQSxJQUFJLENBQUMsRUFBRSxHQUFHLE9BQU87SUFDM0JBLElBQUksQ0FBQyxFQUFFLEdBQUdBLElBQUksQ0FBQyxFQUFFLEdBQUcsT0FBTyxNQUFNLG9DQUFvQztJQUVyRSxJQUFJSCxLQUFLO1FBQ1BDLFNBQVNBLFVBQVU7UUFFbkIsSUFBSyxJQUFJSSxJQUFJLEdBQUdBLElBQUksSUFBSSxFQUFFQSxFQUFHO1lBQzNCTCxHQUFHLENBQUNDLFNBQVNJLEVBQUUsR0FBR0YsSUFBSSxDQUFDRSxFQUFFO1FBQzNCO1FBRUEsT0FBT0w7SUFDVDtJQUVBLE9BQU9ILDhEQUFlQSxDQUFDTTtBQUN6QjtBQUVBLGlFQUFlTCxFQUFFQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3Y0LmpzP2JlNmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5hdGl2ZSBmcm9tICcuL25hdGl2ZS5qcyc7XG5pbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgaWYgKG5hdGl2ZS5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmF0aXZlLnJhbmRvbVVVSUQoKTtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHVuc2FmZVN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7Il0sIm5hbWVzIjpbIm5hdGl2ZSIsInJuZyIsInVuc2FmZVN0cmluZ2lmeSIsInY0Iiwib3B0aW9ucyIsImJ1ZiIsIm9mZnNldCIsInJhbmRvbVVVSUQiLCJybmRzIiwicmFuZG9tIiwiaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js\");\n\nfunction validate(uuid) {\n    return typeof uuid === \"string\" && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92YWxpZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQUUvQixTQUFTQyxTQUFTQyxJQUFJO0lBQ3BCLE9BQU8sT0FBT0EsU0FBUyxZQUFZRixpREFBS0EsQ0FBQ0csSUFBSSxDQUFDRDtBQUNoRDtBQUVBLGlFQUFlRCxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3ZhbGlkYXRlLmpzPzdhNDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7Il0sIm5hbWVzIjpbIlJFR0VYIiwidmFsaWRhdGUiLCJ1dWlkIiwidGVzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@edgestore/react/dist/index.mjs":
/*!******************************************************!*\
  !*** ./node_modules/@edgestore/react/dist/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEdgeStoreProvider: () => (/* binding */ createEdgeStoreProvider)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @edgestore/shared */ \"(ssr)/./node_modules/@edgestore/shared/dist/index.mjs\");\n\n\nclass EdgeStoreClientError extends Error {\n    constructor(message){\n        super(message);\n        this.name = \"EdgeStoreError\";\n    }\n}\nasync function handleError(res) {\n    let json = {};\n    try {\n        json = await res.json();\n    } catch (err) {\n        throw new EdgeStoreClientError(`Failed to parse response. Make sure the api is correctly configured at ${res.url}`);\n    }\n    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_1__.EdgeStoreApiClientError({\n        response: json\n    });\n}\nfunction createNextProxy({ apiPath, uploadingCountRef, maxConcurrentUploads = 5 }) {\n    return new Proxy({}, {\n        get (_, prop) {\n            const bucketName = prop;\n            const bucketFunctions = {\n                upload: async (params)=>{\n                    try {\n                        params.onProgressChange?.(0);\n                        while(uploadingCountRef.current >= maxConcurrentUploads && uploadingCountRef.current > 0){\n                            await new Promise((resolve)=>setTimeout(resolve, 300));\n                        }\n                        uploadingCountRef.current++;\n                        const test = await uploadFile(params, {\n                            bucketName: bucketName,\n                            apiPath\n                        });\n                        return test;\n                    } finally{\n                        uploadingCountRef.current--;\n                    }\n                },\n                confirmUpload: async (params)=>{\n                    const { success } = await confirmUpload(params, {\n                        bucketName: bucketName,\n                        apiPath\n                    });\n                    if (!success) {\n                        throw new EdgeStoreClientError(\"Failed to confirm upload\");\n                    }\n                },\n                delete: async (params)=>{\n                    const { success } = await deleteFile(params, {\n                        bucketName: bucketName,\n                        apiPath\n                    });\n                    if (!success) {\n                        throw new EdgeStoreClientError(\"Failed to delete file\");\n                    }\n                }\n            };\n            return bucketFunctions;\n        }\n    });\n}\nasync function uploadFile({ file, input, onProgressChange, options }, { apiPath, bucketName }) {\n    try {\n        onProgressChange?.(0);\n        const res = await fetch(`${apiPath}/request-upload`, {\n            method: \"POST\",\n            credentials: \"include\",\n            body: JSON.stringify({\n                bucketName,\n                input,\n                fileInfo: {\n                    extension: file.name.split(\".\").pop(),\n                    type: file.type,\n                    size: file.size,\n                    fileName: options?.manualFileName,\n                    replaceTargetUrl: options?.replaceTargetUrl,\n                    temporary: options?.temporary\n                }\n            }),\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        if (!res.ok) {\n            await handleError(res);\n        }\n        const json = await res.json();\n        if (\"multipart\" in json) {\n            await multipartUpload({\n                bucketName,\n                multipartInfo: json.multipart,\n                onProgressChange,\n                file,\n                apiPath\n            });\n        } else if (\"uploadUrl\" in json) {\n            // Single part upload\n            // Upload the file to the signed URL and get the progress\n            await uploadFileInner(file, json.uploadUrl, onProgressChange);\n        } else {\n            throw new EdgeStoreClientError(\"An error occurred\");\n        }\n        return {\n            url: getUrl(json.accessUrl, apiPath),\n            thumbnailUrl: json.thumbnailUrl ? getUrl(json.thumbnailUrl, apiPath) : null,\n            size: json.size,\n            uploadedAt: new Date(json.uploadedAt),\n            path: json.path,\n            pathOrder: json.pathOrder,\n            metadata: json.metadata\n        };\n    } catch (e) {\n        onProgressChange?.(0);\n        throw e;\n    }\n}\n/**\n * Protected files need third-party cookies to work.\n * Since third party cookies doesn't work on localhost,\n * we need to proxy the file through the server.\n */ function getUrl(url, apiPath) {\n    const mode = typeof process !== \"undefined\" ? \"development\" :  false ? 0 : \"production\";\n    if (mode === \"development\" && !url.includes(\"/_public/\")) {\n        const proxyUrl = new URL(window.location.origin);\n        proxyUrl.pathname = `${apiPath}/proxy-file`;\n        proxyUrl.search = new URLSearchParams({\n            url\n        }).toString();\n        return proxyUrl.toString();\n    }\n    return url;\n}\nconst uploadFileInner = async (file, uploadUrl, onProgressChange)=>{\n    const promise = new Promise((resolve, reject)=>{\n        const request = new XMLHttpRequest();\n        request.open(\"PUT\", uploadUrl);\n        // This is for Azure provider. Specifies the blob type\n        request.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\");\n        request.addEventListener(\"loadstart\", ()=>{\n            onProgressChange?.(0);\n        });\n        request.upload.addEventListener(\"progress\", (e)=>{\n            if (e.lengthComputable) {\n                // 2 decimal progress\n                const progress = Math.round(e.loaded / e.total * 10000) / 100;\n                onProgressChange?.(progress);\n            }\n        });\n        request.addEventListener(\"error\", ()=>{\n            reject(new Error(\"Error uploading file\"));\n        });\n        request.addEventListener(\"abort\", ()=>{\n            reject(new Error(\"File upload aborted\"));\n        });\n        request.addEventListener(\"loadend\", ()=>{\n            // Return the ETag header (needed to complete multipart upload)\n            resolve(request.getResponseHeader(\"ETag\"));\n        });\n        request.send(file);\n    });\n    return promise;\n};\nasync function multipartUpload(params) {\n    const { bucketName, multipartInfo, onProgressChange, file, apiPath } = params;\n    const { partSize, parts, totalParts, uploadId, key } = multipartInfo;\n    const uploadingParts = [];\n    const uploadPart = async (params)=>{\n        const { part, chunk } = params;\n        const { uploadUrl } = part;\n        const eTag = await uploadFileInner(chunk, uploadUrl, (progress)=>{\n            const uploadingPart = uploadingParts.find((p)=>p.partNumber === part.partNumber);\n            if (uploadingPart) {\n                uploadingPart.progress = progress;\n            } else {\n                uploadingParts.push({\n                    partNumber: part.partNumber,\n                    progress\n                });\n            }\n            const totalProgress = Math.round(uploadingParts.reduce((acc, p)=>acc + p.progress * 100, 0) / totalParts) / 100;\n            onProgressChange?.(totalProgress);\n        });\n        if (!eTag) {\n            throw new EdgeStoreClientError(\"Could not get ETag from multipart response\");\n        }\n        return {\n            partNumber: part.partNumber,\n            eTag\n        };\n    };\n    // Upload the parts in parallel\n    const completedParts = await queuedPromises({\n        items: parts.map((part)=>({\n                part,\n                chunk: file.slice((part.partNumber - 1) * partSize, part.partNumber * partSize)\n            })),\n        fn: uploadPart,\n        maxParallel: 5,\n        maxRetries: 10\n    });\n    // Complete multipart upload\n    const res = await fetch(`${apiPath}/complete-multipart-upload`, {\n        method: \"POST\",\n        credentials: \"include\",\n        body: JSON.stringify({\n            bucketName,\n            uploadId,\n            key,\n            parts: completedParts\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n}\nasync function confirmUpload({ url }, { apiPath, bucketName }) {\n    const res = await fetch(`${apiPath}/confirm-upload`, {\n        method: \"POST\",\n        credentials: \"include\",\n        body: JSON.stringify({\n            url,\n            bucketName\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n    return res.json();\n}\nasync function deleteFile({ url }, { apiPath, bucketName }) {\n    const res = await fetch(`${apiPath}/delete-file`, {\n        method: \"POST\",\n        credentials: \"include\",\n        body: JSON.stringify({\n            url,\n            bucketName\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n    return res.json();\n}\nasync function queuedPromises({ items, fn, maxParallel, maxRetries = 0 }) {\n    const results = new Array(items.length);\n    const executeWithRetry = async (func, retries)=>{\n        try {\n            return await func();\n        } catch (error) {\n            if (retries > 0) {\n                await new Promise((resolve)=>setTimeout(resolve, 5000));\n                return executeWithRetry(func, retries - 1);\n            } else {\n                throw error;\n            }\n        }\n    };\n    const semaphore = {\n        count: maxParallel,\n        async wait () {\n            // If we've reached our maximum concurrency or it's the last item, wait\n            while(this.count <= 0)await new Promise((resolve)=>setTimeout(resolve, 500));\n            this.count--;\n        },\n        signal () {\n            this.count++;\n        }\n    };\n    const tasks = items.map((item, i)=>(async ()=>{\n            await semaphore.wait();\n            try {\n                const result = await executeWithRetry(()=>fn(item), maxRetries);\n                results[i] = result;\n            } finally{\n                semaphore.signal();\n            }\n        })());\n    await Promise.all(tasks);\n    return results;\n}\nconst DEFAULT_BASE_URL = (typeof process !== \"undefined\" ? process.env.NEXT_PUBLIC_EDGE_STORE_BASE_URL :  undefined) ?? \"https://files.edgestore.dev\";\nfunction createEdgeStoreProvider(opts) {\n    const EdgeStoreContext = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createContext(undefined);\n    const EdgeStoreProvider = ({ children, basePath })=>{\n        return EdgeStoreProviderInner({\n            children,\n            context: EdgeStoreContext,\n            basePath,\n            maxConcurrentUploads: opts?.maxConcurrentUploads\n        });\n    };\n    function useEdgeStore() {\n        if (!EdgeStoreContext) {\n            throw new Error(\"React Context is unavailable in Server Components\");\n        }\n        // @ts-expect-error - We know that the context value should not be undefined\n        const value = react__WEBPACK_IMPORTED_MODULE_0__.useContext(EdgeStoreContext);\n        if (!value && \"development\" !== \"production\") {\n            throw new Error(\"[edgestore]: `useEdgeStore` must be wrapped in a <EdgeStoreProvider />\");\n        }\n        return value;\n    }\n    return {\n        EdgeStoreProvider,\n        useEdgeStore\n    };\n}\nfunction EdgeStoreProviderInner({ children, context, basePath, maxConcurrentUploads }) {\n    const apiPath = basePath ? `${basePath}` : \"/api/edgestore\";\n    const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n        loading: true,\n        initialized: false,\n        error: false\n    });\n    const uploadingCountRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n    const initExecuted = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false); // to make sure we don't run init twice\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{\n        if (!initExecuted.current) {\n            void init();\n        }\n        return ()=>{\n            initExecuted.current = true;\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    async function init() {\n        try {\n            setState({\n                loading: true,\n                initialized: false,\n                error: false\n            });\n            const res = await fetch(`${apiPath}/init`, {\n                method: \"POST\",\n                credentials: \"include\"\n            });\n            if (res.ok) {\n                const json = await res.json();\n                const innerRes = await fetch(`${DEFAULT_BASE_URL}/_init`, {\n                    method: \"GET\",\n                    credentials: \"include\",\n                    headers: {\n                        \"x-edgestore-token\": json.token\n                    }\n                });\n                if (innerRes.ok) {\n                    // update state\n                    setState({\n                        loading: false,\n                        initialized: true,\n                        error: false\n                    });\n                } else {\n                    setState({\n                        loading: false,\n                        initialized: false,\n                        error: true\n                    });\n                    throw new EdgeStoreClientError(\"Couldn't initialize Edge Store.\");\n                }\n            } else {\n                setState({\n                    loading: false,\n                    initialized: false,\n                    error: true\n                });\n                await handleError(res);\n            }\n        } catch (err) {\n            setState({\n                loading: false,\n                initialized: false,\n                error: true\n            });\n            throw err;\n        }\n    }\n    async function reset() {\n        await init();\n    }\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(context.Provider, {\n        value: {\n            edgestore: createNextProxy({\n                apiPath,\n                uploadingCountRef,\n                maxConcurrentUploads\n            }),\n            reset,\n            state\n        }\n    }, children));\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9yZWFjdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFDNkI7QUFFNUQsTUFBTUUsNkJBQTZCQztJQUMvQkMsWUFBWUMsT0FBTyxDQUFDO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNDLElBQUksR0FBRztJQUNoQjtBQUNKO0FBRUEsZUFBZUMsWUFBWUMsR0FBRztJQUMxQixJQUFJQyxPQUFPLENBQUM7SUFDWixJQUFJO1FBQ0FBLE9BQU8sTUFBTUQsSUFBSUMsSUFBSTtJQUN6QixFQUFFLE9BQU9DLEtBQUs7UUFDVixNQUFNLElBQUlSLHFCQUFxQixDQUFDLHVFQUF1RSxFQUFFTSxJQUFJRyxHQUFHLENBQUMsQ0FBQztJQUN0SDtJQUNBLE1BQU0sSUFBSVYsc0VBQXVCQSxDQUFDO1FBQzlCVyxVQUFVSDtJQUNkO0FBQ0o7QUFFQSxTQUFTSSxnQkFBZ0IsRUFBRUMsT0FBTyxFQUFFQyxpQkFBaUIsRUFBRUMsdUJBQXVCLENBQUMsRUFBRTtJQUM3RSxPQUFPLElBQUlDLE1BQU0sQ0FBQyxHQUFHO1FBQ2pCQyxLQUFLQyxDQUFDLEVBQUVDLElBQUk7WUFDUixNQUFNQyxhQUFhRDtZQUNuQixNQUFNRSxrQkFBa0I7Z0JBQ3BCQyxRQUFRLE9BQU9DO29CQUNYLElBQUk7d0JBQ0FBLE9BQU9DLGdCQUFnQixHQUFHO3dCQUMxQixNQUFNVixrQkFBa0JXLE9BQU8sSUFBSVYsd0JBQXdCRCxrQkFBa0JXLE9BQU8sR0FBRyxFQUFFOzRCQUNyRixNQUFNLElBQUlDLFFBQVEsQ0FBQ0MsVUFBVUMsV0FBV0QsU0FBUzt3QkFDckQ7d0JBQ0FiLGtCQUFrQlcsT0FBTzt3QkFDekIsTUFBTUksT0FBTyxNQUFNQyxXQUFXUCxRQUFROzRCQUNsQ0gsWUFBWUE7NEJBQ1pQO3dCQUNKO3dCQUNBLE9BQU9nQjtvQkFDWCxTQUFTO3dCQUNMZixrQkFBa0JXLE9BQU87b0JBQzdCO2dCQUNKO2dC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L3JlYWN0L2Rpc3QvaW5kZXgubWpzPzA3YjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3IgfSBmcm9tICdAZWRnZXN0b3JlL3NoYXJlZCc7XG5cbmNsYXNzIEVkZ2VTdG9yZUNsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2Upe1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VkZ2VTdG9yZUVycm9yJztcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlcykge1xuICAgIGxldCBqc29uID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDbGllbnRFcnJvcihgRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlLiBNYWtlIHN1cmUgdGhlIGFwaSBpcyBjb3JyZWN0bHkgY29uZmlndXJlZCBhdCAke3Jlcy51cmx9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFZGdlU3RvcmVBcGlDbGllbnRFcnJvcih7XG4gICAgICAgIHJlc3BvbnNlOiBqc29uXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5leHRQcm94eSh7IGFwaVBhdGgsIHVwbG9hZGluZ0NvdW50UmVmLCBtYXhDb25jdXJyZW50VXBsb2FkcyA9IDUgfSkge1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0IChfLCBwcm9wKSB7XG4gICAgICAgICAgICBjb25zdCBidWNrZXROYW1lID0gcHJvcDtcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEZ1bmN0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB1cGxvYWQ6IGFzeW5jIChwYXJhbXMpPT57XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMub25Qcm9ncmVzc0NoYW5nZT8uKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUodXBsb2FkaW5nQ291bnRSZWYuY3VycmVudCA+PSBtYXhDb25jdXJyZW50VXBsb2FkcyAmJiB1cGxvYWRpbmdDb3VudFJlZi5jdXJyZW50ID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpPT5zZXRUaW1lb3V0KHJlc29sdmUsIDMwMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkaW5nQ291bnRSZWYuY3VycmVudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVzdCA9IGF3YWl0IHVwbG9hZEZpbGUocGFyYW1zLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0TmFtZTogYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlQYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0O1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRpbmdDb3VudFJlZi5jdXJyZW50LS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbmZpcm1VcGxvYWQ6IGFzeW5jIChwYXJhbXMpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc3VjY2VzcyB9ID0gYXdhaXQgY29uZmlybVVwbG9hZChwYXJhbXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWU6IGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlQYXRoXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDbGllbnRFcnJvcignRmFpbGVkIHRvIGNvbmZpcm0gdXBsb2FkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogYXN5bmMgKHBhcmFtcyk9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzdWNjZXNzIH0gPSBhd2FpdCBkZWxldGVGaWxlKHBhcmFtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0TmFtZTogYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaVBhdGhcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUNsaWVudEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGZpbGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYnVja2V0RnVuY3Rpb25zO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiB1cGxvYWRGaWxlKHsgZmlsZSwgaW5wdXQsIG9uUHJvZ3Jlc3NDaGFuZ2UsIG9wdGlvbnMgfSwgeyBhcGlQYXRoLCBidWNrZXROYW1lIH0pIHtcbiAgICB0cnkge1xuICAgICAgICBvblByb2dyZXNzQ2hhbmdlPy4oMCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaVBhdGh9L3JlcXVlc3QtdXBsb2FkYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgZmlsZUluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBvcHRpb25zPy5tYW51YWxGaWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVRhcmdldFVybDogb3B0aW9ucz8ucmVwbGFjZVRhcmdldFVybCxcbiAgICAgICAgICAgICAgICAgICAgdGVtcG9yYXJ5OiBvcHRpb25zPy50ZW1wb3JhcnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlRXJyb3IocmVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgaWYgKCdtdWx0aXBhcnQnIGluIGpzb24pIHtcbiAgICAgICAgICAgIGF3YWl0IG11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnRJbmZvOiBqc29uLm11bHRpcGFydCxcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzQ2hhbmdlLFxuICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgYXBpUGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoJ3VwbG9hZFVybCcgaW4ganNvbikge1xuICAgICAgICAgICAgLy8gU2luZ2xlIHBhcnQgdXBsb2FkXG4gICAgICAgICAgICAvLyBVcGxvYWQgdGhlIGZpbGUgdG8gdGhlIHNpZ25lZCBVUkwgYW5kIGdldCB0aGUgcHJvZ3Jlc3NcbiAgICAgICAgICAgIGF3YWl0IHVwbG9hZEZpbGVJbm5lcihmaWxlLCBqc29uLnVwbG9hZFVybCwgb25Qcm9ncmVzc0NoYW5nZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ2xpZW50RXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVybDogZ2V0VXJsKGpzb24uYWNjZXNzVXJsLCBhcGlQYXRoKSxcbiAgICAgICAgICAgIHRodW1ibmFpbFVybDoganNvbi50aHVtYm5haWxVcmwgPyBnZXRVcmwoanNvbi50aHVtYm5haWxVcmwsIGFwaVBhdGgpIDogbnVsbCxcbiAgICAgICAgICAgIHNpemU6IGpzb24uc2l6ZSxcbiAgICAgICAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKGpzb24udXBsb2FkZWRBdCksXG4gICAgICAgICAgICBwYXRoOiBqc29uLnBhdGgsXG4gICAgICAgICAgICBwYXRoT3JkZXI6IGpzb24ucGF0aE9yZGVyLFxuICAgICAgICAgICAgbWV0YWRhdGE6IGpzb24ubWV0YWRhdGFcbiAgICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2U/LigwKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG59XG4vKipcbiAqIFByb3RlY3RlZCBmaWxlcyBuZWVkIHRoaXJkLXBhcnR5IGNvb2tpZXMgdG8gd29yay5cbiAqIFNpbmNlIHRoaXJkIHBhcnR5IGNvb2tpZXMgZG9lc24ndCB3b3JrIG9uIGxvY2FsaG9zdCxcbiAqIHdlIG5lZWQgdG8gcHJveHkgdGhlIGZpbGUgdGhyb3VnaCB0aGUgc2VydmVyLlxuICovIGZ1bmN0aW9uIGdldFVybCh1cmwsIGFwaVBhdGgpIHtcbiAgICBjb25zdCBtb2RlID0gdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgOiBpbXBvcnQubWV0YS5lbnY/LkRFViA/ICdkZXZlbG9wbWVudCcgOiAncHJvZHVjdGlvbic7XG4gICAgaWYgKG1vZGUgPT09ICdkZXZlbG9wbWVudCcgJiYgIXVybC5pbmNsdWRlcygnL19wdWJsaWMvJykpIHtcbiAgICAgICAgY29uc3QgcHJveHlVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pO1xuICAgICAgICBwcm94eVVybC5wYXRobmFtZSA9IGAke2FwaVBhdGh9L3Byb3h5LWZpbGVgO1xuICAgICAgICBwcm94eVVybC5zZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIHVybFxuICAgICAgICB9KS50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gcHJveHlVcmwudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbn1cbmNvbnN0IHVwbG9hZEZpbGVJbm5lciA9IGFzeW5jIChmaWxlLCB1cGxvYWRVcmwsIG9uUHJvZ3Jlc3NDaGFuZ2UpPT57XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKCdQVVQnLCB1cGxvYWRVcmwpO1xuICAgICAgICAvLyBUaGlzIGlzIGZvciBBenVyZSBwcm92aWRlci4gU3BlY2lmaWVzIHRoZSBibG9iIHR5cGVcbiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCd4LW1zLWJsb2ItdHlwZScsICdCbG9ja0Jsb2InKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKT0+e1xuICAgICAgICAgICAgb25Qcm9ncmVzc0NoYW5nZT8uKDApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCAoZSk9PntcbiAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICAvLyAyIGRlY2ltYWwgcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoZS5sb2FkZWQgLyBlLnRvdGFsICogMTAwMDApIC8gMTAwO1xuICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2U/Lihwcm9ncmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCk9PntcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0Vycm9yIHVwbG9hZGluZyBmaWxlJykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpPT57XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdGaWxlIHVwbG9hZCBhYm9ydGVkJykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZW5kJywgKCk9PntcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgRVRhZyBoZWFkZXIgKG5lZWRlZCB0byBjb21wbGV0ZSBtdWx0aXBhcnQgdXBsb2FkKVxuICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LmdldFJlc3BvbnNlSGVhZGVyKCdFVGFnJykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5zZW5kKGZpbGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufTtcbmFzeW5jIGZ1bmN0aW9uIG11bHRpcGFydFVwbG9hZChwYXJhbXMpIHtcbiAgICBjb25zdCB7IGJ1Y2tldE5hbWUsIG11bHRpcGFydEluZm8sIG9uUHJvZ3Jlc3NDaGFuZ2UsIGZpbGUsIGFwaVBhdGggfSA9IHBhcmFtcztcbiAgICBjb25zdCB7IHBhcnRTaXplLCBwYXJ0cywgdG90YWxQYXJ0cywgdXBsb2FkSWQsIGtleSB9ID0gbXVsdGlwYXJ0SW5mbztcbiAgICBjb25zdCB1cGxvYWRpbmdQYXJ0cyA9IFtdO1xuICAgIGNvbnN0IHVwbG9hZFBhcnQgPSBhc3luYyAocGFyYW1zKT0+e1xuICAgICAgICBjb25zdCB7IHBhcnQsIGNodW5rIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgdXBsb2FkVXJsIH0gPSBwYXJ0O1xuICAgICAgICBjb25zdCBlVGFnID0gYXdhaXQgdXBsb2FkRmlsZUlubmVyKGNodW5rLCB1cGxvYWRVcmwsIChwcm9ncmVzcyk9PntcbiAgICAgICAgICAgIGNvbnN0IHVwbG9hZGluZ1BhcnQgPSB1cGxvYWRpbmdQYXJ0cy5maW5kKChwKT0+cC5wYXJ0TnVtYmVyID09PSBwYXJ0LnBhcnROdW1iZXIpO1xuICAgICAgICAgICAgaWYgKHVwbG9hZGluZ1BhcnQpIHtcbiAgICAgICAgICAgICAgICB1cGxvYWRpbmdQYXJ0LnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVwbG9hZGluZ1BhcnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiBwYXJ0LnBhcnROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0b3RhbFByb2dyZXNzID0gTWF0aC5yb3VuZCh1cGxvYWRpbmdQYXJ0cy5yZWR1Y2UoKGFjYywgcCk9PmFjYyArIHAucHJvZ3Jlc3MgKiAxMDAsIDApIC8gdG90YWxQYXJ0cykgLyAxMDA7XG4gICAgICAgICAgICBvblByb2dyZXNzQ2hhbmdlPy4odG90YWxQcm9ncmVzcyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWVUYWcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDbGllbnRFcnJvcignQ291bGQgbm90IGdldCBFVGFnIGZyb20gbXVsdGlwYXJ0IHJlc3BvbnNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcnROdW1iZXI6IHBhcnQucGFydE51bWJlcixcbiAgICAgICAgICAgIGVUYWdcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8vIFVwbG9hZCB0aGUgcGFydHMgaW4gcGFyYWxsZWxcbiAgICBjb25zdCBjb21wbGV0ZWRQYXJ0cyA9IGF3YWl0IHF1ZXVlZFByb21pc2VzKHtcbiAgICAgICAgaXRlbXM6IHBhcnRzLm1hcCgocGFydCk9Pih7XG4gICAgICAgICAgICAgICAgcGFydCxcbiAgICAgICAgICAgICAgICBjaHVuazogZmlsZS5zbGljZSgocGFydC5wYXJ0TnVtYmVyIC0gMSkgKiBwYXJ0U2l6ZSwgcGFydC5wYXJ0TnVtYmVyICogcGFydFNpemUpXG4gICAgICAgICAgICB9KSksXG4gICAgICAgIGZuOiB1cGxvYWRQYXJ0LFxuICAgICAgICBtYXhQYXJhbGxlbDogNSxcbiAgICAgICAgbWF4UmV0cmllczogMTBcbiAgICB9KTtcbiAgICAvLyBDb21wbGV0ZSBtdWx0aXBhcnQgdXBsb2FkXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YXBpUGF0aH0vY29tcGxldGUtbXVsdGlwYXJ0LXVwbG9hZGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHBhcnRzOiBjb21wbGV0ZWRQYXJ0c1xuICAgICAgICB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgYXdhaXQgaGFuZGxlRXJyb3IocmVzKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBjb25maXJtVXBsb2FkKHsgdXJsIH0sIHsgYXBpUGF0aCwgYnVja2V0TmFtZSB9KSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YXBpUGF0aH0vY29uZmlybS11cGxvYWRgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBidWNrZXROYW1lXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICBhd2FpdCBoYW5kbGVFcnJvcihyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUZpbGUoeyB1cmwgfSwgeyBhcGlQYXRoLCBidWNrZXROYW1lIH0pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHthcGlQYXRofS9kZWxldGUtZmlsZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGJ1Y2tldE5hbWVcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZUVycm9yKHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXMuanNvbigpO1xufVxuYXN5bmMgZnVuY3Rpb24gcXVldWVkUHJvbWlzZXMoeyBpdGVtcywgZm4sIG1heFBhcmFsbGVsLCBtYXhSZXRyaWVzID0gMCB9KSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IG5ldyBBcnJheShpdGVtcy5sZW5ndGgpO1xuICAgIGNvbnN0IGV4ZWN1dGVXaXRoUmV0cnkgPSBhc3luYyAoZnVuYywgcmV0cmllcyk9PntcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBmdW5jKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAocmV0cmllcyA+IDApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PnNldFRpbWVvdXQocmVzb2x2ZSwgNTAwMCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlV2l0aFJldHJ5KGZ1bmMsIHJldHJpZXMgLSAxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNlbWFwaG9yZSA9IHtcbiAgICAgICAgY291bnQ6IG1heFBhcmFsbGVsLFxuICAgICAgICBhc3luYyB3YWl0ICgpIHtcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgb3VyIG1heGltdW0gY29uY3VycmVuY3kgb3IgaXQncyB0aGUgbGFzdCBpdGVtLCB3YWl0XG4gICAgICAgICAgICB3aGlsZSh0aGlzLmNvdW50IDw9IDApYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpPT5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICAgICAgdGhpcy5jb3VudC0tO1xuICAgICAgICB9LFxuICAgICAgICBzaWduYWwgKCkge1xuICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB0YXNrcyA9IGl0ZW1zLm1hcCgoaXRlbSwgaSk9Pihhc3luYyAoKT0+e1xuICAgICAgICAgICAgYXdhaXQgc2VtYXBob3JlLndhaXQoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVdpdGhSZXRyeSgoKT0+Zm4oaXRlbSksIG1heFJldHJpZXMpO1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0gPSByZXN1bHQ7XG4gICAgICAgICAgICB9IGZpbmFsbHl7XG4gICAgICAgICAgICAgICAgc2VtYXBob3JlLnNpZ25hbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpKTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcyk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmNvbnN0IERFRkFVTFRfQkFTRV9VUkwgPSAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRURHRV9TVE9SRV9CQVNFX1VSTCA6IGltcG9ydC5tZXRhLmVudj8uRURHRV9TVE9SRV9CQVNFX1VSTCkgPz8gJ2h0dHBzOi8vZmlsZXMuZWRnZXN0b3JlLmRldic7XG5mdW5jdGlvbiBjcmVhdGVFZGdlU3RvcmVQcm92aWRlcihvcHRzKSB7XG4gICAgY29uc3QgRWRnZVN0b3JlQ29udGV4dCA9IC8qI19fUFVSRV9fKi8gUmVhY3QuY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpO1xuICAgIGNvbnN0IEVkZ2VTdG9yZVByb3ZpZGVyID0gKHsgY2hpbGRyZW4sIGJhc2VQYXRoIH0pPT57XG4gICAgICAgIHJldHVybiBFZGdlU3RvcmVQcm92aWRlcklubmVyKHtcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgY29udGV4dDogRWRnZVN0b3JlQ29udGV4dCxcbiAgICAgICAgICAgIGJhc2VQYXRoLFxuICAgICAgICAgICAgbWF4Q29uY3VycmVudFVwbG9hZHM6IG9wdHM/Lm1heENvbmN1cnJlbnRVcGxvYWRzXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZnVuY3Rpb24gdXNlRWRnZVN0b3JlKCkge1xuICAgICAgICBpZiAoIUVkZ2VTdG9yZUNvbnRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVhY3QgQ29udGV4dCBpcyB1bmF2YWlsYWJsZSBpbiBTZXJ2ZXIgQ29tcG9uZW50cycpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBXZSBrbm93IHRoYXQgdGhlIGNvbnRleHQgdmFsdWUgc2hvdWxkIG5vdCBiZSB1bmRlZmluZWRcbiAgICAgICAgY29uc3QgdmFsdWUgPSBSZWFjdC51c2VDb250ZXh0KEVkZ2VTdG9yZUNvbnRleHQpO1xuICAgICAgICBpZiAoIXZhbHVlICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignW2VkZ2VzdG9yZV06IGB1c2VFZGdlU3RvcmVgIG11c3QgYmUgd3JhcHBlZCBpbiBhIDxFZGdlU3RvcmVQcm92aWRlciAvPicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgRWRnZVN0b3JlUHJvdmlkZXIsXG4gICAgICAgIHVzZUVkZ2VTdG9yZVxuICAgIH07XG59XG5mdW5jdGlvbiBFZGdlU3RvcmVQcm92aWRlcklubmVyKHsgY2hpbGRyZW4sIGNvbnRleHQsIGJhc2VQYXRoLCBtYXhDb25jdXJyZW50VXBsb2FkcyB9KSB7XG4gICAgY29uc3QgYXBpUGF0aCA9IGJhc2VQYXRoID8gYCR7YmFzZVBhdGh9YCA6ICcvYXBpL2VkZ2VzdG9yZSc7XG4gICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGZhbHNlXG4gICAgfSk7XG4gICAgY29uc3QgdXBsb2FkaW5nQ291bnRSZWYgPSBSZWFjdC51c2VSZWYoMCk7XG4gICAgY29uc3QgaW5pdEV4ZWN1dGVkID0gUmVhY3QudXNlUmVmKGZhbHNlKTsgLy8gdG8gbWFrZSBzdXJlIHdlIGRvbid0IHJ1biBpbml0IHR3aWNlXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpPT57XG4gICAgICAgIGlmICghaW5pdEV4ZWN1dGVkLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHZvaWQgaW5pdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKT0+e1xuICAgICAgICAgICAgaW5pdEV4ZWN1dGVkLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbXSk7XG4gICAgYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YXBpUGF0aH0vaW5pdGAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbm5lclJlcyA9IGF3YWl0IGZldGNoKGAke0RFRkFVTFRfQkFTRV9VUkx9L19pbml0YCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAneC1lZGdlc3RvcmUtdG9rZW4nOiBqc29uLnRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXJSZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUNsaWVudEVycm9yKFwiQ291bGRuJ3QgaW5pdGlhbGl6ZSBFZGdlIFN0b3JlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVFcnJvcihyZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICBhd2FpdCBpbml0KCk7XG4gICAgfVxuICAgIHJldHVybiAvKiNfX1BVUkVfXyovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi8gUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBlZGdlc3RvcmU6IGNyZWF0ZU5leHRQcm94eSh7XG4gICAgICAgICAgICAgICAgYXBpUGF0aCxcbiAgICAgICAgICAgICAgICB1cGxvYWRpbmdDb3VudFJlZixcbiAgICAgICAgICAgICAgICBtYXhDb25jdXJyZW50VXBsb2Fkc1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZXNldCxcbiAgICAgICAgICAgIHN0YXRlXG4gICAgICAgIH1cbiAgICB9LCBjaGlsZHJlbikpO1xufVxuXG5leHBvcnQgeyBjcmVhdGVFZGdlU3RvcmVQcm92aWRlciB9O1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3IiLCJFZGdlU3RvcmVDbGllbnRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwibmFtZSIsImhhbmRsZUVycm9yIiwicmVzIiwianNvbiIsImVyciIsInVybCIsInJlc3BvbnNlIiwiY3JlYXRlTmV4dFByb3h5IiwiYXBpUGF0aCIsInVwbG9hZGluZ0NvdW50UmVmIiwibWF4Q29uY3VycmVudFVwbG9hZHMiLCJQcm94eSIsImdldCIsIl8iLCJwcm9wIiwiYnVja2V0TmFtZSIsImJ1Y2tldEZ1bmN0aW9ucyIsInVwbG9hZCIsInBhcmFtcyIsIm9uUHJvZ3Jlc3NDaGFuZ2UiLCJjdXJyZW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwidGVzdCIsInVwbG9hZEZpbGUiLCJjb25maXJtVXBsb2FkIiwic3VjY2VzcyIsImRlbGV0ZSIsImRlbGV0ZUZpbGUiLCJmaWxlIiwiaW5wdXQiLCJvcHRpb25zIiwiZmV0Y2giLCJtZXRob2QiLCJjcmVkZW50aWFscyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsZUluZm8iLCJleHRlbnNpb24iLCJzcGxpdCIsInBvcCIsInR5cGUiLCJzaXplIiwiZmlsZU5hbWUiLCJtYW51YWxGaWxlTmFtZSIsInJlcGxhY2VUYXJnZXRVcmwiLCJ0ZW1wb3JhcnkiLCJoZWFkZXJzIiwib2siLCJtdWx0aXBhcnRVcGxvYWQiLCJtdWx0aXBhcnRJbmZvIiwibXVsdGlwYXJ0IiwidXBsb2FkRmlsZUlubmVyIiwidXBsb2FkVXJsIiwiZ2V0VXJsIiwiYWNjZXNzVXJsIiwidGh1bWJuYWlsVXJsIiwidXBsb2FkZWRBdCIsIkRhdGUiLCJwYXRoIiwicGF0aE9yZGVyIiwibWV0YWRhdGEiLCJlIiwibW9kZSIsInByb2Nlc3MiLCJlbnYiLCJERVYiLCJpbmNsdWRlcyIsInByb3h5VXJsIiwiVVJMIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJwYXRobmFtZSIsInNlYXJjaCIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwicHJvbWlzZSIsInJlamVjdCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxlbmd0aENvbXB1dGFibGUiLCJwcm9ncmVzcyIsIk1hdGgiLCJyb3VuZCIsImxvYWRlZCIsInRvdGFsIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJzZW5kIiwicGFydFNpemUiLCJwYXJ0cyIsInRvdGFsUGFydHMiLCJ1cGxvYWRJZCIsImtleSIsInVwbG9hZGluZ1BhcnRzIiwidXBsb2FkUGFydCIsInBhcnQiLCJjaHVuayIsImVUYWciLCJ1cGxvYWRpbmdQYXJ0IiwiZmluZCIsInAiLCJwYXJ0TnVtYmVyIiwicHVzaCIsInRvdGFsUHJvZ3Jlc3MiLCJyZWR1Y2UiLCJhY2MiLCJjb21wbGV0ZWRQYXJ0cyIsInF1ZXVlZFByb21pc2VzIiwiaXRlbXMiLCJtYXAiLCJzbGljZSIsImZuIiwibWF4UGFyYWxsZWwiLCJtYXhSZXRyaWVzIiwicmVzdWx0cyIsIkFycmF5IiwibGVuZ3RoIiwiZXhlY3V0ZVdpdGhSZXRyeSIsImZ1bmMiLCJyZXRyaWVzIiwiZXJyb3IiLCJzZW1hcGhvcmUiLCJjb3VudCIsIndhaXQiLCJzaWduYWwiLCJ0YXNrcyIsIml0ZW0iLCJpIiwicmVzdWx0IiwiYWxsIiwiREVGQVVMVF9CQVNFX1VSTCIsIk5FWFRfUFVCTElDX0VER0VfU1RPUkVfQkFTRV9VUkwiLCJFREdFX1NUT1JFX0JBU0VfVVJMIiwiY3JlYXRlRWRnZVN0b3JlUHJvdmlkZXIiLCJvcHRzIiwiRWRnZVN0b3JlQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJ1bmRlZmluZWQiLCJFZGdlU3RvcmVQcm92aWRlciIsImNoaWxkcmVuIiwiYmFzZVBhdGgiLCJFZGdlU3RvcmVQcm92aWRlcklubmVyIiwiY29udGV4dCIsInVzZUVkZ2VTdG9yZSIsInZhbHVlIiwidXNlQ29udGV4dCIsInN0YXRlIiwic2V0U3RhdGUiLCJ1c2VTdGF0ZSIsImxvYWRpbmciLCJpbml0aWFsaXplZCIsInVzZVJlZiIsImluaXRFeGVjdXRlZCIsInVzZUVmZmVjdCIsImluaXQiLCJpbm5lclJlcyIsInRva2VuIiwicmVzZXQiLCJjcmVhdGVFbGVtZW50IiwiRnJhZ21lbnQiLCJQcm92aWRlciIsImVkZ2VzdG9yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@edgestore/react/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@edgestore/shared/dist/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@edgestore/shared/dist/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EDGE_STORE_ERROR_CODES: () => (/* binding */ EDGE_STORE_ERROR_CODES),\n/* harmony export */   EdgeStoreApiClientError: () => (/* binding */ EdgeStoreApiClientError),\n/* harmony export */   EdgeStoreError: () => (/* binding */ EdgeStoreError),\n/* harmony export */   initEdgeStore: () => (/* binding */ initEdgeStore)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n\nfunction _define_property$1(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n/* eslint-disable @typescript-eslint/no-non-null-assertion */ const EDGE_STORE_ERROR_CODES = {\n    BAD_REQUEST: 400,\n    FILE_TOO_LARGE: 400,\n    MIME_TYPE_NOT_ALLOWED: 400,\n    UNAUTHORIZED: 401,\n    UPLOAD_NOT_ALLOWED: 403,\n    DELETE_NOT_ALLOWED: 403,\n    CREATE_CONTEXT_ERROR: 500,\n    SERVER_ERROR: 500\n};\nclass EdgeStoreError extends Error {\n    formattedMessage() {\n        return `${this.message}${this.details ? `\\n    Details: ${JSON.stringify(this.details)}` : \"\"}${this.cause ? `\\n    Caused by: ${this.cause.message}` : \"\"}`;\n    }\n    formattedJson() {\n        return {\n            message: this.code === \"SERVER_ERROR\" ? \"Internal server error\" : this.message,\n            code: this.code,\n            details: this.details\n        };\n    }\n    constructor(opts){\n        super(opts.message);\n        _define_property$1(this, \"cause\", void 0);\n        _define_property$1(this, \"code\", void 0);\n        _define_property$1(this, \"level\", void 0);\n        _define_property$1(this, \"details\", void 0);\n        this.name = \"EdgeStoreError\";\n        this.code = opts.code;\n        this.cause = opts.cause;\n        this.level = EDGE_STORE_ERROR_CODES[opts.code] >= 500 ? \"error\" : \"warn\";\n        this.details = \"details\" in opts ? opts.details : undefined;\n    }\n}\nfunction _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nclass EdgeStoreApiClientError extends Error {\n    constructor(opts){\n        super(opts.response.message);\n        _define_property(this, \"data\", void 0);\n        this.name = \"EdgeStoreApiClientError\";\n        this.data = opts.response;\n    }\n}\n/**\n * Creates a Proxy that prints the path to the property when called.\n *\n * Example:\n *\n * ```ts\n * const pathParamProxy = createPathParamProxy();\n * console.log(pathParamProxy.ctx.user.id());\n * // Logs: \"ctx.user.id\"\n * console.log(pathParamProxy.input.type());\n * // Logs: \"input.type\"\n * ```\n */ function createPathParamProxy() {\n    const getPath = (target, _prop)=>{\n        const proxyFunction = ()=>target;\n        return new Proxy(proxyFunction, {\n            get: (_target, propChild)=>{\n                return getPath(`${target}.${String(propChild)}`);\n            }\n        });\n    };\n    return new Proxy(()=>\"\", {\n        get: (_target, prop)=>{\n            return getPath(String(prop));\n        }\n    });\n}\nconst createNewBuilder = (initDef, newDef)=>{\n    const mergedDef = {\n        ...initDef,\n        ...newDef\n    };\n    return createBuilder({\n        type: mergedDef.type\n    }, mergedDef);\n};\nfunction createBuilder(opts, initDef) {\n    const _def = {\n        type: opts.type,\n        input: zod__WEBPACK_IMPORTED_MODULE_0__.z.never(),\n        path: [],\n        metadata: ()=>({}),\n        ...initDef\n    };\n    return {\n        $config: {\n            ctx: undefined\n        },\n        // @ts-expect-error - I think it would be too much work to make this type correct.\n        _def,\n        input (input) {\n            return createNewBuilder(_def, {\n                input\n            });\n        },\n        path (pathResolver) {\n            // TODO: Should throw a runtime error in the following cases:\n            // 1. in case of multiple keys in one object\n            // 2. in case of duplicate keys\n            const pathParamProxy = createPathParamProxy();\n            const params = pathResolver(pathParamProxy);\n            return createNewBuilder(_def, {\n                path: params\n            });\n        },\n        metadata (metadata) {\n            return createNewBuilder(_def, {\n                metadata\n            });\n        },\n        accessControl (accessControl) {\n            return createNewBuilder(_def, {\n                accessControl: accessControl\n            });\n        },\n        beforeUpload (beforeUpload) {\n            return createNewBuilder(_def, {\n                beforeUpload\n            });\n        },\n        beforeDelete (beforeDelete) {\n            return createNewBuilder(_def, {\n                beforeDelete\n            });\n        }\n    };\n}\nclass EdgeStoreBuilder {\n    context() {\n        return new EdgeStoreBuilder();\n    }\n    create() {\n        return createEdgeStoreInner()();\n    }\n}\nfunction createRouterFactory() {\n    return function createRouterInner(buckets) {\n        return {\n            $config: {\n                ctx: undefined\n            },\n            buckets\n        };\n    };\n}\nfunction initBucket(type, config) {\n    return createBuilder({\n        type\n    }, {\n        bucketConfig: config\n    });\n}\nfunction createEdgeStoreInner() {\n    return function initEdgeStoreInner() {\n        return {\n            /**\n       * Builder object for creating an image bucket\n       */ imageBucket (config) {\n                return initBucket(\"IMAGE\", config);\n            },\n            /**\n       * Builder object for creating a file bucket\n       */ fileBucket (config) {\n                return initBucket(\"FILE\", config);\n            },\n            /**\n       * Create a router\n       */ router: createRouterFactory()\n        };\n    };\n}\n/**\n * Initialize EdgeStore - be done exactly once per backend\n */ const initEdgeStore = new EdgeStoreBuilder(); // ↓↓↓ TYPE TESTS ↓↓↓\n// type Context = {\n//   userId: string;\n//   userRole: 'admin' | 'visitor';\n// };\n// const es = initEdgeStore.context<Context>().create();\n// const imagesBucket = es.imageBucket()\n//   .input(\n//     z.object({\n//       type: z.enum(['profile', 'post']),\n//       extension: z.string().optional(),\n//     }),\n//   )\n//   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n//   .metadata(({ ctx, input }) => ({\n//     extension: input.extension,\n//     role: ctx.userRole,\n//   }))\n//   .beforeUpload(() => {\n//     return true;\n//   });\n// const a = es.imageBucket()\n//   .input(z.object({ type: z.string(), someMeta: z.string().optional() }))\n//   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n//   .metadata(({ ctx, input }) => ({\n//     role: ctx.userRole,\n//     someMeta: input.someMeta,\n//   }))\n//   .accessControl({\n//     OR: [\n//       {\n//         userId: { path: 'author' }, // this will check if the userId is the same as the author in the path parameter\n//       },\n//       {\n//         userRole: 'admin', // this is the same as { userRole: { eq: \"admin\" } }\n//       },\n//     ],\n//   })\n//   .beforeUpload(({ ctx, input }) => {\n//     return true;\n//   })\n//   .beforeDelete(({ ctx, file }) => {\n//     return true;\n//   });\n// const b = es.imageBucket().path(({ ctx }) => [{ author: ctx.userId }]);\n// const router = es.router({\n//   original: imagesBucket,\n//   imageBucket: a,\n//   imageBucket2: b,\n// });\n// export { router };\n// type ListFilesResponse<TBucket extends AnyRouter['buckets'][string]> = {\n//   data: {\n//     // url: string;\n//     // size: number;\n//     // uploadedAt: Date;\n//     // metadata: InferMetadataObject<TBucket>;\n//     path: InferBucketPathKeys<TBucket> extends string ? {\n//       [key: string]: string;\n//     } :{\n//       [TKey in InferBucketPathKeys<TBucket>]: string;\n//     };\n//   }[];\n//   pagination: {\n//     currentPage: number;\n//     totalPages: number;\n//     totalCount: number;\n//   };\n// };\n// type TPathKeys = 'author' | 'type';\n// type TPathKeys2 = InferBucketPathKeys<AnyBuilder>;\n// type ObjectWithKeys<TKeys extends string> = {\n//   [TKey in TKeys]: string;\n// };\n// type Test1 = ObjectWithKeys<TPathKeys>;\n// type Test2 = ObjectWithKeys<TPathKeys2>;\n// type PathKeys = InferBucketPathKeys<typeof router.buckets.imageBucket>;\n// type MetadataKeys = InferMetadataObject<typeof router.buckets.imageBucket>;\n// type MyEdgeStoreRouter = typeof router;\n// type MyAccessControl = AccessControlSchema<Context, AnyDef>;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zaGFyZWQvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7QUFFeEIsU0FBU0MsbUJBQW1CQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsS0FBSztJQUN2QyxJQUFJRCxPQUFPRCxLQUFLO1FBQ1pHLE9BQU9DLGNBQWMsQ0FBQ0osS0FBS0MsS0FBSztZQUM1QkMsT0FBT0E7WUFDUEcsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7UUFDZDtJQUNKLE9BQU87UUFDSFAsR0FBRyxDQUFDQyxJQUFJLEdBQUdDO0lBQ2Y7SUFDQSxPQUFPRjtBQUNYO0FBQ0EsMkRBQTJELEdBQUcsTUFBTVEseUJBQXlCO0lBQ3pGQyxhQUFhO0lBQ2JDLGdCQUFnQjtJQUNoQkMsdUJBQXVCO0lBQ3ZCQyxjQUFjO0lBQ2RDLG9CQUFvQjtJQUNwQkMsb0JBQW9CO0lBQ3BCQyxzQkFBc0I7SUFDdEJDLGNBQWM7QUFDbEI7QUFDQSxNQUFNQyx1QkFBdUJDO0lBQ3pCQyxtQkFBbUI7UUFDZixPQUFPLENBQUMsRUFBRSxJQUFJLENBQUNDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQ0MsT0FBTyxHQUFHLENBQUMsZUFBZSxFQUFFQyxLQUFLQyxTQUFTLENBQUMsSUFBSSxDQUFDRixPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxJQUFJLENBQUNHLEtBQUssR0FBRyxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQ0EsS0FBSyxDQUFDSixPQUFPLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUNoSztJQUNBSyxnQkFBZ0I7UUFDWixPQUFPO1lBQ0hMLFNBQVMsSUFBSSxDQUFDTSxJQUFJLEtBQUssaUJBQWlCLDBCQUEwQixJQUFJLENBQUNOLE9BQU87WUFDOUVNLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZMLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1FBQ3pCO0lBQ0o7SUFDQU0sWUFBWUMsSUFBSSxDQUFDO1FB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Q25CLFFBQVE7QUFDUiw2QkFBNkI7QUFDN0IsNEVBQTRFO0FBQzVFLDhFQUE4RTtBQUM5RSxxQ0FBcUM7QUFDckMsMEJBQTBCO0FBQzFCLGdDQUFnQztBQUNoQyxRQUFRO0FBQ1IscUJBQXFCO0FBQ3JCLFlBQVk7QUFDWixVQUFVO0FBQ1YsdUhBQXVIO0FBQ3ZILFdBQVc7QUFDWCxVQUFVO0FBQ1Ysa0ZBQWtGO0FBQ2xGLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLHdDQUF3QztBQUN4QyxtQkFBbUI7QUFDbkIsT0FBTztBQUNQLHVDQUF1QztBQUN2QyxtQkFBbUI7QUFDbkIsUUFBUTtBQUNSLDBFQUEwRTtBQUMxRSw2QkFBNkI7QUFDN0IsNEJBQTRCO0FBQzVCLG9CQUFvQjtBQUNwQixxQkFBcUI7QUFDckIsTUFBTTtBQUNOLHFCQUFxQjtBQUNyQiwyRUFBMkU7QUFDM0UsWUFBWTtBQUNaLHNCQUFzQjtBQUN0Qix1QkFBdUI7QUFDdkIsMkJBQTJCO0FBQzNCLGlEQUFpRDtBQUNqRCw0REFBNEQ7QUFDNUQsK0JBQStCO0FBQy9CLFdBQVc7QUFDWCx3REFBd0Q7QUFDeEQsU0FBUztBQUNULFNBQVM7QUFDVCxrQkFBa0I7QUFDbEIsMkJBQTJCO0FBQzNCLDBCQUEwQjtBQUMxQiwwQkFBMEI7QUFDMUIsT0FBTztBQUNQLEtBQUs7QUFDTCxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JELGdEQUFnRDtBQUNoRCw2QkFBNkI7QUFDN0IsS0FBSztBQUNMLDBDQUEwQztBQUMxQywyQ0FBMkM7QUFDM0MsMEVBQTBFO0FBQzFFLDhFQUE4RTtBQUM5RSwwQ0FBMEM7QUFDMUMsK0RBQStEO0FBRTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NoYXJlZC9kaXN0L2luZGV4Lm1qcz80NmIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5mdW5jdGlvbiBfZGVmaW5lX3Byb3BlcnR5JDEob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi8gY29uc3QgRURHRV9TVE9SRV9FUlJPUl9DT0RFUyA9IHtcbiAgICBCQURfUkVRVUVTVDogNDAwLFxuICAgIEZJTEVfVE9PX0xBUkdFOiA0MDAsXG4gICAgTUlNRV9UWVBFX05PVF9BTExPV0VEOiA0MDAsXG4gICAgVU5BVVRIT1JJWkVEOiA0MDEsXG4gICAgVVBMT0FEX05PVF9BTExPV0VEOiA0MDMsXG4gICAgREVMRVRFX05PVF9BTExPV0VEOiA0MDMsXG4gICAgQ1JFQVRFX0NPTlRFWFRfRVJST1I6IDUwMCxcbiAgICBTRVJWRVJfRVJST1I6IDUwMFxufTtcbmNsYXNzIEVkZ2VTdG9yZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGZvcm1hdHRlZE1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1lc3NhZ2V9JHt0aGlzLmRldGFpbHMgPyBgXFxuICAgIERldGFpbHM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kZXRhaWxzKX1gIDogJyd9JHt0aGlzLmNhdXNlID8gYFxcbiAgICBDYXVzZWQgYnk6ICR7dGhpcy5jYXVzZS5tZXNzYWdlfWAgOiAnJ31gO1xuICAgIH1cbiAgICBmb3JtYXR0ZWRKc29uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5jb2RlID09PSAnU0VSVkVSX0VSUk9SJyA/ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIDogdGhpcy5tZXNzYWdlLFxuICAgICAgICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgICAgICAgZGV0YWlsczogdGhpcy5kZXRhaWxzXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG9wdHMpe1xuICAgICAgICBzdXBlcihvcHRzLm1lc3NhZ2UpO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5JDEodGhpcywgXCJjYXVzZVwiLCB2b2lkIDApO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5JDEodGhpcywgXCJjb2RlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImxldmVsXCIsIHZvaWQgMCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImRldGFpbHNcIiwgdm9pZCAwKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VkZ2VTdG9yZUVycm9yJztcbiAgICAgICAgdGhpcy5jb2RlID0gb3B0cy5jb2RlO1xuICAgICAgICB0aGlzLmNhdXNlID0gb3B0cy5jYXVzZTtcbiAgICAgICAgdGhpcy5sZXZlbCA9IEVER0VfU1RPUkVfRVJST1JfQ09ERVNbb3B0cy5jb2RlXSA+PSA1MDAgPyAnZXJyb3InIDogJ3dhcm4nO1xuICAgICAgICB0aGlzLmRldGFpbHMgPSAnZGV0YWlscycgaW4gb3B0cyA/IG9wdHMuZGV0YWlscyA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVfcHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbmNsYXNzIEVkZ2VTdG9yZUFwaUNsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpe1xuICAgICAgICBzdXBlcihvcHRzLnJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwiZGF0YVwiLCB2b2lkIDApO1xuICAgICAgICB0aGlzLm5hbWUgPSAnRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3InO1xuICAgICAgICB0aGlzLmRhdGEgPSBvcHRzLnJlc3BvbnNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJveHkgdGhhdCBwcmludHMgdGhlIHBhdGggdG8gdGhlIHByb3BlcnR5IHdoZW4gY2FsbGVkLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHBhdGhQYXJhbVByb3h5ID0gY3JlYXRlUGF0aFBhcmFtUHJveHkoKTtcbiAqIGNvbnNvbGUubG9nKHBhdGhQYXJhbVByb3h5LmN0eC51c2VyLmlkKCkpO1xuICogLy8gTG9nczogXCJjdHgudXNlci5pZFwiXG4gKiBjb25zb2xlLmxvZyhwYXRoUGFyYW1Qcm94eS5pbnB1dC50eXBlKCkpO1xuICogLy8gTG9nczogXCJpbnB1dC50eXBlXCJcbiAqIGBgYFxuICovIGZ1bmN0aW9uIGNyZWF0ZVBhdGhQYXJhbVByb3h5KCkge1xuICAgIGNvbnN0IGdldFBhdGggPSAodGFyZ2V0LCBfcHJvcCk9PntcbiAgICAgICAgY29uc3QgcHJveHlGdW5jdGlvbiA9ICgpPT50YXJnZXQ7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkocHJveHlGdW5jdGlvbiwge1xuICAgICAgICAgICAgZ2V0OiAoX3RhcmdldCwgcHJvcENoaWxkKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRQYXRoKGAke3RhcmdldH0uJHtTdHJpbmcocHJvcENoaWxkKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFByb3h5KCgpPT4nJywge1xuICAgICAgICBnZXQ6IChfdGFyZ2V0LCBwcm9wKT0+e1xuICAgICAgICAgICAgcmV0dXJuIGdldFBhdGgoU3RyaW5nKHByb3ApKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5jb25zdCBjcmVhdGVOZXdCdWlsZGVyID0gKGluaXREZWYsIG5ld0RlZik9PntcbiAgICBjb25zdCBtZXJnZWREZWYgPSB7XG4gICAgICAgIC4uLmluaXREZWYsXG4gICAgICAgIC4uLm5ld0RlZlxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICB0eXBlOiBtZXJnZWREZWYudHlwZVxuICAgIH0sIG1lcmdlZERlZik7XG59O1xuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzLCBpbml0RGVmKSB7XG4gICAgY29uc3QgX2RlZiA9IHtcbiAgICAgICAgdHlwZTogb3B0cy50eXBlLFxuICAgICAgICBpbnB1dDogei5uZXZlcigpLFxuICAgICAgICBwYXRoOiBbXSxcbiAgICAgICAgbWV0YWRhdGE6ICgpPT4oe30pLFxuICAgICAgICAuLi5pbml0RGVmXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICAkY29uZmlnOiB7XG4gICAgICAgICAgICBjdHg6IHVuZGVmaW5lZFxuICAgICAgICB9LFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gSSB0aGluayBpdCB3b3VsZCBiZSB0b28gbXVjaCB3b3JrIHRvIG1ha2UgdGhpcyB0eXBlIGNvcnJlY3QuXG4gICAgICAgIF9kZWYsXG4gICAgICAgIGlucHV0IChpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGlucHV0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcGF0aCAocGF0aFJlc29sdmVyKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBTaG91bGQgdGhyb3cgYSBydW50aW1lIGVycm9yIGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG4gICAgICAgICAgICAvLyAxLiBpbiBjYXNlIG9mIG11bHRpcGxlIGtleXMgaW4gb25lIG9iamVjdFxuICAgICAgICAgICAgLy8gMi4gaW4gY2FzZSBvZiBkdXBsaWNhdGUga2V5c1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtUHJveHkgPSBjcmVhdGVQYXRoUGFyYW1Qcm94eSgpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gcGF0aFJlc29sdmVyKHBhdGhQYXJhbVByb3h5KTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXJhbXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBtZXRhZGF0YSAobWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFjY2Vzc0NvbnRyb2wgKGFjY2Vzc0NvbnRyb2wpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDb250cm9sOiBhY2Nlc3NDb250cm9sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYmVmb3JlVXBsb2FkIChiZWZvcmVVcGxvYWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBiZWZvcmVVcGxvYWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVEZWxldGUgKGJlZm9yZURlbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGJlZm9yZURlbGV0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuY2xhc3MgRWRnZVN0b3JlQnVpbGRlciB7XG4gICAgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFZGdlU3RvcmVCdWlsZGVyKCk7XG4gICAgfVxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVkZ2VTdG9yZUlubmVyKCkoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXJGYWN0b3J5KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVSb3V0ZXJJbm5lcihidWNrZXRzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAkY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY3R4OiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWNrZXRzXG4gICAgICAgIH07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGluaXRCdWNrZXQodHlwZSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICB0eXBlXG4gICAgfSwge1xuICAgICAgICBidWNrZXRDb25maWc6IGNvbmZpZ1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlRWRnZVN0b3JlSW5uZXIoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGluaXRFZGdlU3RvcmVJbm5lcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogQnVpbGRlciBvYmplY3QgZm9yIGNyZWF0aW5nIGFuIGltYWdlIGJ1Y2tldFxuICAgICAgICovIGltYWdlQnVja2V0IChjb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdEJ1Y2tldCgnSU1BR0UnLCBjb25maWcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogQnVpbGRlciBvYmplY3QgZm9yIGNyZWF0aW5nIGEgZmlsZSBidWNrZXRcbiAgICAgICAqLyBmaWxlQnVja2V0IChjb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdEJ1Y2tldCgnRklMRScsIGNvbmZpZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGUgYSByb3V0ZXJcbiAgICAgICAqLyByb3V0ZXI6IGNyZWF0ZVJvdXRlckZhY3RvcnkoKVxuICAgICAgICB9O1xuICAgIH07XG59XG4vKipcbiAqIEluaXRpYWxpemUgRWRnZVN0b3JlIC0gYmUgZG9uZSBleGFjdGx5IG9uY2UgcGVyIGJhY2tlbmRcbiAqLyBjb25zdCBpbml0RWRnZVN0b3JlID0gbmV3IEVkZ2VTdG9yZUJ1aWxkZXIoKTsgLy8g4oaT4oaT4oaTIFRZUEUgVEVTVFMg4oaT4oaT4oaTXG4gLy8gdHlwZSBDb250ZXh0ID0ge1xuIC8vICAgdXNlcklkOiBzdHJpbmc7XG4gLy8gICB1c2VyUm9sZTogJ2FkbWluJyB8ICd2aXNpdG9yJztcbiAvLyB9O1xuIC8vIGNvbnN0IGVzID0gaW5pdEVkZ2VTdG9yZS5jb250ZXh0PENvbnRleHQ+KCkuY3JlYXRlKCk7XG4gLy8gY29uc3QgaW1hZ2VzQnVja2V0ID0gZXMuaW1hZ2VCdWNrZXQoKVxuIC8vICAgLmlucHV0KFxuIC8vICAgICB6Lm9iamVjdCh7XG4gLy8gICAgICAgdHlwZTogei5lbnVtKFsncHJvZmlsZScsICdwb3N0J10pLFxuIC8vICAgICAgIGV4dGVuc2lvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuIC8vICAgICB9KSxcbiAvLyAgIClcbiAvLyAgIC5wYXRoKCh7IGN0eCwgaW5wdXQgfSkgPT4gW3sgYXV0aG9yOiBjdHgudXNlcklkIH0sIHsgdHlwZTogaW5wdXQudHlwZSB9XSlcbiAvLyAgIC5tZXRhZGF0YSgoeyBjdHgsIGlucHV0IH0pID0+ICh7XG4gLy8gICAgIGV4dGVuc2lvbjogaW5wdXQuZXh0ZW5zaW9uLFxuIC8vICAgICByb2xlOiBjdHgudXNlclJvbGUsXG4gLy8gICB9KSlcbiAvLyAgIC5iZWZvcmVVcGxvYWQoKCkgPT4ge1xuIC8vICAgICByZXR1cm4gdHJ1ZTtcbiAvLyAgIH0pO1xuIC8vIGNvbnN0IGEgPSBlcy5pbWFnZUJ1Y2tldCgpXG4gLy8gICAuaW5wdXQoei5vYmplY3QoeyB0eXBlOiB6LnN0cmluZygpLCBzb21lTWV0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pKVxuIC8vICAgLnBhdGgoKHsgY3R4LCBpbnB1dCB9KSA9PiBbeyBhdXRob3I6IGN0eC51c2VySWQgfSwgeyB0eXBlOiBpbnB1dC50eXBlIH1dKVxuIC8vICAgLm1ldGFkYXRhKCh7IGN0eCwgaW5wdXQgfSkgPT4gKHtcbiAvLyAgICAgcm9sZTogY3R4LnVzZXJSb2xlLFxuIC8vICAgICBzb21lTWV0YTogaW5wdXQuc29tZU1ldGEsXG4gLy8gICB9KSlcbiAvLyAgIC5hY2Nlc3NDb250cm9sKHtcbiAvLyAgICAgT1I6IFtcbiAvLyAgICAgICB7XG4gLy8gICAgICAgICB1c2VySWQ6IHsgcGF0aDogJ2F1dGhvcicgfSwgLy8gdGhpcyB3aWxsIGNoZWNrIGlmIHRoZSB1c2VySWQgaXMgdGhlIHNhbWUgYXMgdGhlIGF1dGhvciBpbiB0aGUgcGF0aCBwYXJhbWV0ZXJcbiAvLyAgICAgICB9LFxuIC8vICAgICAgIHtcbiAvLyAgICAgICAgIHVzZXJSb2xlOiAnYWRtaW4nLCAvLyB0aGlzIGlzIHRoZSBzYW1lIGFzIHsgdXNlclJvbGU6IHsgZXE6IFwiYWRtaW5cIiB9IH1cbiAvLyAgICAgICB9LFxuIC8vICAgICBdLFxuIC8vICAgfSlcbiAvLyAgIC5iZWZvcmVVcGxvYWQoKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gLy8gICAgIHJldHVybiB0cnVlO1xuIC8vICAgfSlcbiAvLyAgIC5iZWZvcmVEZWxldGUoKHsgY3R4LCBmaWxlIH0pID0+IHtcbiAvLyAgICAgcmV0dXJuIHRydWU7XG4gLy8gICB9KTtcbiAvLyBjb25zdCBiID0gZXMuaW1hZ2VCdWNrZXQoKS5wYXRoKCh7IGN0eCB9KSA9PiBbeyBhdXRob3I6IGN0eC51c2VySWQgfV0pO1xuIC8vIGNvbnN0IHJvdXRlciA9IGVzLnJvdXRlcih7XG4gLy8gICBvcmlnaW5hbDogaW1hZ2VzQnVja2V0LFxuIC8vICAgaW1hZ2VCdWNrZXQ6IGEsXG4gLy8gICBpbWFnZUJ1Y2tldDI6IGIsXG4gLy8gfSk7XG4gLy8gZXhwb3J0IHsgcm91dGVyIH07XG4gLy8gdHlwZSBMaXN0RmlsZXNSZXNwb25zZTxUQnVja2V0IGV4dGVuZHMgQW55Um91dGVyWydidWNrZXRzJ11bc3RyaW5nXT4gPSB7XG4gLy8gICBkYXRhOiB7XG4gLy8gICAgIC8vIHVybDogc3RyaW5nO1xuIC8vICAgICAvLyBzaXplOiBudW1iZXI7XG4gLy8gICAgIC8vIHVwbG9hZGVkQXQ6IERhdGU7XG4gLy8gICAgIC8vIG1ldGFkYXRhOiBJbmZlck1ldGFkYXRhT2JqZWN0PFRCdWNrZXQ+O1xuIC8vICAgICBwYXRoOiBJbmZlckJ1Y2tldFBhdGhLZXlzPFRCdWNrZXQ+IGV4dGVuZHMgc3RyaW5nID8ge1xuIC8vICAgICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAvLyAgICAgfSA6e1xuIC8vICAgICAgIFtUS2V5IGluIEluZmVyQnVja2V0UGF0aEtleXM8VEJ1Y2tldD5dOiBzdHJpbmc7XG4gLy8gICAgIH07XG4gLy8gICB9W107XG4gLy8gICBwYWdpbmF0aW9uOiB7XG4gLy8gICAgIGN1cnJlbnRQYWdlOiBudW1iZXI7XG4gLy8gICAgIHRvdGFsUGFnZXM6IG51bWJlcjtcbiAvLyAgICAgdG90YWxDb3VudDogbnVtYmVyO1xuIC8vICAgfTtcbiAvLyB9O1xuIC8vIHR5cGUgVFBhdGhLZXlzID0gJ2F1dGhvcicgfCAndHlwZSc7XG4gLy8gdHlwZSBUUGF0aEtleXMyID0gSW5mZXJCdWNrZXRQYXRoS2V5czxBbnlCdWlsZGVyPjtcbiAvLyB0eXBlIE9iamVjdFdpdGhLZXlzPFRLZXlzIGV4dGVuZHMgc3RyaW5nPiA9IHtcbiAvLyAgIFtUS2V5IGluIFRLZXlzXTogc3RyaW5nO1xuIC8vIH07XG4gLy8gdHlwZSBUZXN0MSA9IE9iamVjdFdpdGhLZXlzPFRQYXRoS2V5cz47XG4gLy8gdHlwZSBUZXN0MiA9IE9iamVjdFdpdGhLZXlzPFRQYXRoS2V5czI+O1xuIC8vIHR5cGUgUGF0aEtleXMgPSBJbmZlckJ1Y2tldFBhdGhLZXlzPHR5cGVvZiByb3V0ZXIuYnVja2V0cy5pbWFnZUJ1Y2tldD47XG4gLy8gdHlwZSBNZXRhZGF0YUtleXMgPSBJbmZlck1ldGFkYXRhT2JqZWN0PHR5cGVvZiByb3V0ZXIuYnVja2V0cy5pbWFnZUJ1Y2tldD47XG4gLy8gdHlwZSBNeUVkZ2VTdG9yZVJvdXRlciA9IHR5cGVvZiByb3V0ZXI7XG4gLy8gdHlwZSBNeUFjY2Vzc0NvbnRyb2wgPSBBY2Nlc3NDb250cm9sU2NoZW1hPENvbnRleHQsIEFueURlZj47XG5cbmV4cG9ydCB7IEVER0VfU1RPUkVfRVJST1JfQ09ERVMsIEVkZ2VTdG9yZUFwaUNsaWVudEVycm9yLCBFZGdlU3RvcmVFcnJvciwgaW5pdEVkZ2VTdG9yZSB9O1xuIl0sIm5hbWVzIjpbInoiLCJfZGVmaW5lX3Byb3BlcnR5JDEiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiRURHRV9TVE9SRV9FUlJPUl9DT0RFUyIsIkJBRF9SRVFVRVNUIiwiRklMRV9UT09fTEFSR0UiLCJNSU1FX1RZUEVfTk9UX0FMTE9XRUQiLCJVTkFVVEhPUklaRUQiLCJVUExPQURfTk9UX0FMTE9XRUQiLCJERUxFVEVfTk9UX0FMTE9XRUQiLCJDUkVBVEVfQ09OVEVYVF9FUlJPUiIsIlNFUlZFUl9FUlJPUiIsIkVkZ2VTdG9yZUVycm9yIiwiRXJyb3IiLCJmb3JtYXR0ZWRNZXNzYWdlIiwibWVzc2FnZSIsImRldGFpbHMiLCJKU09OIiwic3RyaW5naWZ5IiwiY2F1c2UiLCJmb3JtYXR0ZWRKc29uIiwiY29kZSIsImNvbnN0cnVjdG9yIiwib3B0cyIsIm5hbWUiLCJsZXZlbCIsInVuZGVmaW5lZCIsIl9kZWZpbmVfcHJvcGVydHkiLCJFZGdlU3RvcmVBcGlDbGllbnRFcnJvciIsInJlc3BvbnNlIiwiZGF0YSIsImNyZWF0ZVBhdGhQYXJhbVByb3h5IiwiZ2V0UGF0aCIsInRhcmdldCIsIl9wcm9wIiwicHJveHlGdW5jdGlvbiIsIlByb3h5IiwiZ2V0IiwiX3RhcmdldCIsInByb3BDaGlsZCIsIlN0cmluZyIsInByb3AiLCJjcmVhdGVOZXdCdWlsZGVyIiwiaW5pdERlZiIsIm5ld0RlZiIsIm1lcmdlZERlZiIsImNyZWF0ZUJ1aWxkZXIiLCJ0eXBlIiwiX2RlZiIsImlucHV0IiwibmV2ZXIiLCJwYXRoIiwibWV0YWRhdGEiLCIkY29uZmlnIiwiY3R4IiwicGF0aFJlc29sdmVyIiwicGF0aFBhcmFtUHJveHkiLCJwYXJhbXMiLCJhY2Nlc3NDb250cm9sIiwiYmVmb3JlVXBsb2FkIiwiYmVmb3JlRGVsZXRlIiwiRWRnZVN0b3JlQnVpbGRlciIsImNvbnRleHQiLCJjcmVhdGUiLCJjcmVhdGVFZGdlU3RvcmVJbm5lciIsImNyZWF0ZVJvdXRlckZhY3RvcnkiLCJjcmVhdGVSb3V0ZXJJbm5lciIsImJ1Y2tldHMiLCJpbml0QnVja2V0IiwiY29uZmlnIiwiYnVja2V0Q29uZmlnIiwiaW5pdEVkZ2VTdG9yZUlubmVyIiwiaW1hZ2VCdWNrZXQiLCJmaWxlQnVja2V0Iiwicm91dGVyIiwiaW5pdEVkZ2VTdG9yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@edgestore/shared/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/adapters/next/app/index.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/adapters/next/app/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEdgeStoreNextHandler: () => (/* binding */ createEdgeStoreNextHandler)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _logger_09f43a75_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../logger-09f43a75.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/logger-09f43a75.mjs\");\n/* harmony import */ var _providers_edgestore_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../providers/edgestore/index.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs\");\n/* harmony import */ var _shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared-039276af.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/shared-039276af.mjs\");\n/* harmony import */ var _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../index-28efdacf.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs\");\n/* harmony import */ var _panva_hkdf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @panva/hkdf */ \"(rsc)/./node_modules/@panva/hkdf/dist/node/esm/index.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/index.js\");\n\n\n\n\n\n\n\n\n\nfunction createEdgeStoreNextHandler(config) {\n    const { provider = (0,_providers_edgestore_index_mjs__WEBPACK_IMPORTED_MODULE_2__.EdgeStoreProvider)() } = config;\n    const log = new _logger_09f43a75_mjs__WEBPACK_IMPORTED_MODULE_1__.L(config.logLevel);\n    globalThis._EDGE_STORE_LOGGER = log;\n    log.debug(\"Creating Edge Store Next handler (app adapter)\");\n    return async (req)=>{\n        try {\n            if (!(\"nextUrl\" in req)) throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Error running the app adapter. Make sure you are importing the correct adapter in your router configuration\",\n                code: \"SERVER_ERROR\"\n            });\n            if (req.nextUrl.pathname.endsWith(\"/health\")) {\n                return new Response(\"OK\", {\n                    status: 200\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/init\")) {\n                let ctx = {};\n                try {\n                    ctx = \"createContext\" in config ? await config.createContext({\n                        req\n                    }) : {};\n                } catch (err) {\n                    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                        message: \"Error creating context\",\n                        code: \"CREATE_CONTEXT_ERROR\",\n                        cause: err instanceof Error ? err : undefined\n                    });\n                }\n                const { newCookies, token, baseUrl } = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.i)({\n                    ctx,\n                    provider,\n                    router: config.router\n                });\n                const res = new Response(JSON.stringify({\n                    token,\n                    baseUrl\n                }), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n                for (const cookie of newCookies){\n                    res.headers.append(\"Set-Cookie\", cookie);\n                }\n                return res;\n            } else if (req.nextUrl.pathname.endsWith(\"/request-upload\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.r)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/request-upload-parts\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/complete-multipart-upload\")) {\n                await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(null, {\n                    status: 200\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/confirm-upload\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.d)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/delete-file\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.e)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/proxy-file\")) {\n                const url = req.nextUrl.searchParams.get(\"url\");\n                if (typeof url === \"string\") {\n                    const proxyRes = await fetch(url, {\n                        headers: {\n                            cookie: req.cookies.toString() ?? \"\"\n                        }\n                    });\n                    const data = await proxyRes.arrayBuffer();\n                    return new Response(data, {\n                        status: proxyRes.status,\n                        headers: {\n                            \"Content-Type\": proxyRes.headers.get(\"Content-Type\") ?? \"application/octet-stream\"\n                        }\n                    });\n                } else {\n                    return new Response(null, {\n                        status: 400\n                    });\n                }\n            } else {\n                return new Response(null, {\n                    status: 404\n                });\n            }\n        } catch (err) {\n            if (err instanceof _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError) {\n                log[err.level](err.formattedMessage());\n                if (err.cause) log[err.level](err.cause);\n                return new Response(JSON.stringify(err.formattedJson()), {\n                    status: _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EDGE_STORE_ERROR_CODES[err.code],\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n            log.error(err);\n            return new Response(JSON.stringify(new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Internal server error\",\n                code: \"SERVER_ERROR\"\n            }).formattedJson()), {\n                status: 500,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9hZGFwdGVycy9uZXh0L2FwcC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTJFO0FBQ2hCO0FBQ2dCO0FBQzhGO0FBQ3BJO0FBQ2hCO0FBQ0w7QUFDRjtBQUNBO0FBRWQsU0FBU2lCLDJCQUEyQkMsTUFBTTtJQUN0QyxNQUFNLEVBQUVDLFdBQVdmLGlGQUFpQkEsRUFBRSxFQUFFLEdBQUdjO0lBQzNDLE1BQU1FLE1BQU0sSUFBSWpCLG1EQUFNQSxDQUFDZSxPQUFPRyxRQUFRO0lBQ3RDQyxXQUFXQyxrQkFBa0IsR0FBR0g7SUFDaENBLElBQUlJLEtBQUssQ0FBQztJQUNWLE9BQU8sT0FBT0M7UUFDVixJQUFJO1lBQ0EsSUFBSSxDQUFFLGNBQWFBLEdBQUUsR0FBSSxNQUFNLElBQUl6Qiw2REFBY0EsQ0FBQztnQkFDOUMwQixTQUFTO2dCQUNUQyxNQUFNO1lBQ1Y7WUFDQSxJQUFJRixJQUFJRyxPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDLFlBQVk7Z0JBQzFDLE9BQU8sSUFBSUMsU0FBUyxNQUFNO29CQUN0QkMsUUFBUTtnQkFDWjtZQUNKLE9BQU8sSUFBSVAsSUFBSUcsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFFBQVEsQ0FBQyxVQUFVO2dCQUMvQyxJQUFJRyxNQUFNLENBQUM7Z0JBQ1gsSUFBSTtvQkFDQUEsTUFBTSxtQkFBbUJmLFNBQVMsTUFBTUEsT0FBT2dCLGFBQWEsQ0FBQzt3QkFDekRUO29CQUNKLEtBQUssQ0FBQztnQkFDVixFQUFFLE9BQU9VLEtBQUs7b0JBQ1YsTUFBTSxJQUFJbkMsNkRBQWNBLENBQUM7d0JBQ3JCMEIsU0FBUzt3QkFDVEMsTUFBTTt3QkFDTlMsT0FBT0QsZUFBZUUsUUFBUUYsTUFBTUc7b0JBQ3hDO2dCQUNKO2dCQUNBLE1BQU0sRUFBRUMsVUFBVSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUFHLE1BQU1uQyx1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MUIsSUFBSTZDLEtBQUssQ0FBQzlCO1lBQ1YsT0FBTyxJQUFJSixTQUFTYSxLQUFLQyxTQUFTLENBQUMsSUFBSTdDLDZEQUFjQSxDQUFDO2dCQUNsRDBCLFNBQVM7Z0JBQ1RDLE1BQU07WUFDVixHQUFHcUMsYUFBYSxLQUFLO2dCQUNqQmhDLFFBQVE7Z0JBQ1JjLFNBQVM7b0JBQ0wsZ0JBQWdCO2dCQUNwQjtZQUNKO1FBQ0o7SUFDSjtBQUNKO0FBRXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9kaXN0L2FkYXB0ZXJzL25leHQvYXBwL2luZGV4Lm1qcz83NzQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVkZ2VTdG9yZUVycm9yLCBFREdFX1NUT1JFX0VSUk9SX0NPREVTIH0gZnJvbSAnQGVkZ2VzdG9yZS9zaGFyZWQnO1xuaW1wb3J0IHsgTCBhcyBMb2dnZXIgfSBmcm9tICcuLi8uLi8uLi9sb2dnZXItMDlmNDNhNzUubWpzJztcbmltcG9ydCB7IEVkZ2VTdG9yZVByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vLi4vcHJvdmlkZXJzL2VkZ2VzdG9yZS9pbmRleC5tanMnO1xuaW1wb3J0IHsgaSBhcyBpbml0LCByIGFzIHJlcXVlc3RVcGxvYWQsIGEgYXMgcmVxdWVzdFVwbG9hZFBhcnRzLCBjIGFzIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkLCBkIGFzIGNvbmZpcm1VcGxvYWQsIGUgYXMgZGVsZXRlRmlsZSB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC0wMzkyNzZhZi5tanMnO1xuaW1wb3J0ICcuLi8uLi8uLi9pbmRleC0yOGVmZGFjZi5tanMnO1xuaW1wb3J0ICdAcGFudmEvaGtkZic7XG5pbXBvcnQgJ2Nvb2tpZSc7XG5pbXBvcnQgJ2pvc2UnO1xuaW1wb3J0ICd1dWlkJztcblxuZnVuY3Rpb24gY3JlYXRlRWRnZVN0b3JlTmV4dEhhbmRsZXIoY29uZmlnKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciA9IEVkZ2VTdG9yZVByb3ZpZGVyKCkgfSA9IGNvbmZpZztcbiAgICBjb25zdCBsb2cgPSBuZXcgTG9nZ2VyKGNvbmZpZy5sb2dMZXZlbCk7XG4gICAgZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVIgPSBsb2c7XG4gICAgbG9nLmRlYnVnKCdDcmVhdGluZyBFZGdlIFN0b3JlIE5leHQgaGFuZGxlciAoYXBwIGFkYXB0ZXIpJyk7XG4gICAgcmV0dXJuIGFzeW5jIChyZXEpPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoISgnbmV4dFVybCcgaW4gcmVxKSkgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgcnVubmluZyB0aGUgYXBwIGFkYXB0ZXIuIE1ha2Ugc3VyZSB5b3UgYXJlIGltcG9ydGluZyB0aGUgY29ycmVjdCBhZGFwdGVyIGluIHlvdXIgcm91dGVyIGNvbmZpZ3VyYXRpb24nLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXEubmV4dFVybC5wYXRobmFtZS5lbmRzV2l0aCgnL2hlYWx0aCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgnT0snLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcS5uZXh0VXJsLnBhdGhuYW1lLmVuZHNXaXRoKCcvaW5pdCcpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGN0eCA9IHt9O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9ICdjcmVhdGVDb250ZXh0JyBpbiBjb25maWcgPyBhd2FpdCBjb25maWcuY3JlYXRlQ29udGV4dCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgICAgICAgICAgfSkgOiB7fTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBjcmVhdGluZyBjb250ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICdDUkVBVEVfQ09OVEVYVF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbmV3Q29va2llcywgdG9rZW4sIGJhc2VVcmwgfSA9IGF3YWl0IGluaXQoe1xuICAgICAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgYmFzZVVybFxuICAgICAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiBuZXdDb29raWVzKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmhlYWRlcnMuYXBwZW5kKCdTZXQtQ29va2llJywgY29va2llKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm5leHRVcmwucGF0aG5hbWUuZW5kc1dpdGgoJy9yZXF1ZXN0LXVwbG9hZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlcyksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEubmV4dFVybC5wYXRobmFtZS5lbmRzV2l0aCgnL3JlcXVlc3QtdXBsb2FkLXBhcnRzJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0VXBsb2FkUGFydHMoe1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgcm91dGVyOiBjb25maWcucm91dGVyLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBhd2FpdCByZXEuanNvbigpLFxuICAgICAgICAgICAgICAgICAgICBjdHhUb2tlbjogcmVxLmNvb2tpZXMuZ2V0KCdlZGdlc3RvcmUtY3R4Jyk/LnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeShyZXMpLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm5leHRVcmwucGF0aG5hbWUuZW5kc1dpdGgoJy9jb21wbGV0ZS1tdWx0aXBhcnQtdXBsb2FkJykpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjb21wbGV0ZU11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm5leHRVcmwucGF0aG5hbWUuZW5kc1dpdGgoJy9jb25maXJtLXVwbG9hZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgY29uZmlybVVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlcyksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEubmV4dFVybC5wYXRobmFtZS5lbmRzV2l0aCgnL2RlbGV0ZS1maWxlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBkZWxldGVGaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlcjogY29uZmlnLnJvdXRlcixcbiAgICAgICAgICAgICAgICAgICAgYm9keTogYXdhaXQgcmVxLmpzb24oKSxcbiAgICAgICAgICAgICAgICAgICAgY3R4VG9rZW46IHJlcS5jb29raWVzLmdldCgnZWRnZXN0b3JlLWN0eCcpPy52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzKSwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcS5uZXh0VXJsLnBhdGhuYW1lLmVuZHNXaXRoKCcvcHJveHktZmlsZScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldCgndXJsJyk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5UmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llOiByZXEuY29va2llcy50b1N0cmluZygpID8/ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcHJveHlSZXMuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShkYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHByb3h5UmVzLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogcHJveHlSZXMuaGVhZGVycy5nZXQoJ0NvbnRlbnQtVHlwZScpID8/ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRWRnZVN0b3JlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dbZXJyLmxldmVsXShlcnIuZm9ybWF0dGVkTWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLmNhdXNlKSBsb2dbZXJyLmxldmVsXShlcnIuY2F1c2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoZXJyLmZvcm1hdHRlZEpzb24oKSksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBFREdFX1NUT1JFX0VSUk9SX0NPREVTW2Vyci5jb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2cuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkobmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgfSkuZm9ybWF0dGVkSnNvbigpKSwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlRWRnZVN0b3JlTmV4dEhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6WyJFZGdlU3RvcmVFcnJvciIsIkVER0VfU1RPUkVfRVJST1JfQ09ERVMiLCJMIiwiTG9nZ2VyIiwiRWRnZVN0b3JlUHJvdmlkZXIiLCJpIiwiaW5pdCIsInIiLCJyZXF1ZXN0VXBsb2FkIiwiYSIsInJlcXVlc3RVcGxvYWRQYXJ0cyIsImMiLCJjb21wbGV0ZU11bHRpcGFydFVwbG9hZCIsImQiLCJjb25maXJtVXBsb2FkIiwiZSIsImRlbGV0ZUZpbGUiLCJjcmVhdGVFZGdlU3RvcmVOZXh0SGFuZGxlciIsImNvbmZpZyIsInByb3ZpZGVyIiwibG9nIiwibG9nTGV2ZWwiLCJnbG9iYWxUaGlzIiwiX0VER0VfU1RPUkVfTE9HR0VSIiwiZGVidWciLCJyZXEiLCJtZXNzYWdlIiwiY29kZSIsIm5leHRVcmwiLCJwYXRobmFtZSIsImVuZHNXaXRoIiwiUmVzcG9uc2UiLCJzdGF0dXMiLCJjdHgiLCJjcmVhdGVDb250ZXh0IiwiZXJyIiwiY2F1c2UiLCJFcnJvciIsInVuZGVmaW5lZCIsIm5ld0Nvb2tpZXMiLCJ0b2tlbiIsImJhc2VVcmwiLCJyb3V0ZXIiLCJyZXMiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsImNvb2tpZSIsImFwcGVuZCIsImJvZHkiLCJqc29uIiwiY3R4VG9rZW4iLCJjb29raWVzIiwiZ2V0IiwidmFsdWUiLCJ1cmwiLCJzZWFyY2hQYXJhbXMiLCJwcm94eVJlcyIsImZldGNoIiwidG9TdHJpbmciLCJkYXRhIiwiYXJyYXlCdWZmZXIiLCJsZXZlbCIsImZvcm1hdHRlZE1lc3NhZ2UiLCJmb3JtYXR0ZWRKc29uIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/adapters/next/app/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/index-28efdacf.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E: () => (/* binding */ EdgeStoreCredentialsError),\n/* harmony export */   e: () => (/* binding */ edgeStoreRawSdk),\n/* harmony export */   i: () => (/* binding */ initEdgeStoreSdk)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n\nconst DEFAULT_MESSAGE = `Missing EDGE_STORE_ACCESS_KEY or EDGE_STORE_SECRET_KEY. \nThis can happen if you are trying to import something related to the backend of Edge Store in a client component.`;\nclass EdgeStoreCredentialsError extends Error {\n    constructor(message = DEFAULT_MESSAGE){\n        super(message);\n        this.name = \"EdgeStoreCredentialsError\";\n    }\n}\nconst API_ENDPOINT = process.env.EDGE_STORE_API_ENDPOINT ?? \"https://api.edgestore.dev\";\nasync function makeRequest(params) {\n    const { body, accessKey, secretKey, path } = params;\n    const res = await fetch(`${API_ENDPOINT}${path}`, {\n        method: \"POST\",\n        body: JSON.stringify(body),\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Basic ${Buffer.from(`${accessKey}:${secretKey}`).toString(\"base64\")}`\n        }\n    });\n    if (!res.ok) {\n        throw new Error(`Failed to make request to ${path}: ${await res.text()}`);\n    }\n    return await res.json();\n}\nconst edgeStoreRawSdk = {\n    async getToken (params) {\n        const reqBuckets = Object.entries(params.router.buckets).reduce((acc, [bucketName, bucket])=>{\n            acc[bucketName] = {\n                path: bucket._def.path.map((p)=>{\n                    const paramEntries = Object.entries(p);\n                    if (paramEntries[0] === undefined) {\n                        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                            message: `Empty path param found in: ${JSON.stringify(bucket._def.path)}`,\n                            code: \"SERVER_ERROR\"\n                        });\n                    }\n                    const [key, value] = paramEntries[0];\n                    return {\n                        key,\n                        value: value()\n                    };\n                }),\n                accessControl: bucket._def.accessControl\n            };\n            return acc;\n        }, {});\n        const { token } = await makeRequest({\n            body: {\n                ctx: params.ctx,\n                buckets: reqBuckets\n            },\n            accessKey: params.accessKey,\n            secretKey: params.secretKey,\n            path: \"/get-token\"\n        });\n        return token;\n    },\n    async getFile ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: \"/get-file\",\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async requestUpload ({ accessKey, secretKey, bucketName, bucketType, fileInfo, multipart }) {\n        const res = await makeRequest({\n            path: \"/request-upload\",\n            accessKey,\n            secretKey,\n            body: {\n                multipart,\n                bucketName,\n                bucketType,\n                isPublic: fileInfo.isPublic,\n                path: fileInfo.path,\n                extension: fileInfo.extension,\n                size: fileInfo.size,\n                mimeType: fileInfo.type,\n                metadata: fileInfo.metadata,\n                fileName: fileInfo.fileName,\n                replaceTargetUrl: fileInfo.replaceTargetUrl,\n                isTemporary: fileInfo.temporary\n            }\n        });\n        return {\n            multipart: res.multipart,\n            signedUrl: res.signedUrl,\n            accessUrl: res.url,\n            path: res.path,\n            thumbnailUrl: res.thumbnailUrl\n        };\n    },\n    async requestUploadParts ({ accessKey, secretKey, key, multipart }) {\n        const res = await makeRequest({\n            path: \"/request-upload-parts\",\n            accessKey,\n            secretKey,\n            body: {\n                multipart,\n                key\n            }\n        });\n        return {\n            multipart: res.multipart\n        };\n    },\n    async completeMultipartUpload ({ accessKey, secretKey, uploadId, key, parts }) {\n        return await makeRequest({\n            path: \"/complete-multipart-upload\",\n            accessKey,\n            secretKey,\n            body: {\n                uploadId,\n                key,\n                parts\n            }\n        });\n    },\n    async confirmUpload ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: \"/confirm-upload\",\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async deleteFile ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: \"/delete-file\",\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async listFiles ({ accessKey, secretKey, bucketName, filter, pagination }) {\n        return await makeRequest({\n            path: \"/list-files\",\n            accessKey,\n            secretKey,\n            body: {\n                bucketName,\n                filter,\n                pagination\n            }\n        });\n    }\n};\nfunction initEdgeStoreSdk(params) {\n    const { accessKey = process.env.EDGE_STORE_ACCESS_KEY, secretKey = process.env.EDGE_STORE_SECRET_KEY } = params ?? {};\n    if (!accessKey || !secretKey) {\n        throw new EdgeStoreCredentialsError();\n    }\n    return {\n        async getToken (params) {\n            return await edgeStoreRawSdk.getToken({\n                accessKey,\n                secretKey,\n                ctx: params.ctx,\n                router: params.router\n            });\n        },\n        async getFile ({ url }) {\n            return await edgeStoreRawSdk.getFile({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async requestUpload ({ bucketName, bucketType, fileInfo, multipart }) {\n            return await edgeStoreRawSdk.requestUpload({\n                accessKey,\n                secretKey,\n                bucketName,\n                bucketType,\n                fileInfo,\n                multipart\n            });\n        },\n        async requestUploadParts ({ key, multipart }) {\n            return await edgeStoreRawSdk.requestUploadParts({\n                accessKey,\n                secretKey,\n                key,\n                multipart\n            });\n        },\n        async completeMultipartUpload ({ uploadId, key, parts }) {\n            return await edgeStoreRawSdk.completeMultipartUpload({\n                accessKey,\n                secretKey,\n                uploadId,\n                key,\n                parts\n            });\n        },\n        async confirmUpload ({ url }) {\n            return await edgeStoreRawSdk.confirmUpload({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async deleteFile ({ url }) {\n            return await edgeStoreRawSdk.deleteFile({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async listFiles (params) {\n            return await edgeStoreRawSdk.listFiles({\n                accessKey,\n                secretKey,\n                ...params\n            });\n        }\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC0yOGVmZGFjZi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDtBQUVuRCxNQUFNQyxrQkFBa0IsQ0FBQztpSEFDd0YsQ0FBQztBQUNsSCxNQUFNQyxrQ0FBa0NDO0lBQ3BDQyxZQUFZQyxVQUFVSixlQUFlLENBQUM7UUFDbEMsS0FBSyxDQUFDSTtRQUNOLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2hCO0FBQ0o7QUFFQSxNQUFNQyxlQUFlQyxRQUFRQyxHQUFHLENBQUNDLHVCQUF1QixJQUFJO0FBQzVELGVBQWVDLFlBQVlDLE1BQU07SUFDN0IsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFFQyxJQUFJLEVBQUUsR0FBR0o7SUFDN0MsTUFBTUssTUFBTSxNQUFNQyxNQUFNLENBQUMsRUFBRVgsYUFBYSxFQUFFUyxLQUFLLENBQUMsRUFBRTtRQUM5Q0csUUFBUTtRQUNSTixNQUFNTyxLQUFLQyxTQUFTLENBQUNSO1FBQ3JCUyxTQUFTO1lBQ0wsZ0JBQWdCO1lBQ2hCQyxlQUFlLENBQUMsTUFBTSxFQUFFQyxPQUFPQyxJQUFJLENBQUMsQ0FBQyxFQUFFWCxVQUFVLENBQUMsRUFBRUMsVUFBVSxDQUFDLEVBQUVXLFFBQVEsQ0FBQyxVQUFVLENBQUM7UUFDekY7SUFDSjtJQUNBLElBQUksQ0FBQ1QsSUFBSVUsRUFBRSxFQUFFO1FBQ1QsTUFBTSxJQUFJeEIsTUFBTSxDQUFDLDBCQUEwQixFQUFFYSxLQUFLLEVBQUUsRUFBRSxNQUFNQyxJQUFJVyxJQUFJLEdBQUcsQ0FBQztJQUM1RTtJQUNBLE9BQU8sTUFBTVgsSUFBSVksSUFBSTtBQUN6QjtBQUNBLE1BQU1DLGtCQUFrQjtJQUNwQixNQUFNQyxVQUFVbkIsTUFBTTtRQUNsQixNQUFNb0IsYUFBYUMsT0FBT0MsT0FBTyxDQUFDdEIsT0FBT3VCLE1BQU0sQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLENB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QUFVLEVBQUVDLFFBQVEsRUFBRUMsU0FBUyxFQUFFO1lBQ2hFLE9BQU8sTUFBTTNCLGdCQUFnQndCLGFBQWEsQ0FBQztnQkFDdkN4QztnQkFDQUM7Z0JBQ0F3QjtnQkFDQWdCO2dCQUNBQztnQkFDQUM7WUFDSjtRQUNKO1FBQ0EsTUFBTWMsb0JBQW9CLEVBQUV4QixHQUFHLEVBQUVVLFNBQVMsRUFBRTtZQUN4QyxPQUFPLE1BQU0zQixnQkFBZ0J5QyxrQkFBa0IsQ0FBQztnQkFDNUN6RDtnQkFDQUM7Z0JBQ0FnQztnQkFDQVU7WUFDSjtRQUNKO1FBQ0EsTUFBTWUseUJBQXlCLEVBQUVDLFFBQVEsRUFBRTFCLEdBQUcsRUFBRTJCLEtBQUssRUFBRTtZQUNuRCxPQUFPLE1BQU01QyxnQkFBZ0IwQyx1QkFBdUIsQ0FBQztnQkFDakQxRDtnQkFDQUM7Z0JBQ0EwRDtnQkFDQTFCO2dCQUNBMkI7WUFDSjtRQUNKO1FBQ0EsTUFBTUMsZUFBZSxFQUFFdEIsR0FBRyxFQUFFO1lBQ3hCLE9BQU8sTUFBTXZCLGdCQUFnQjZDLGFBQWEsQ0FBQztnQkFDdkM3RDtnQkFDQUM7Z0JBQ0FzQztZQUNKO1FBQ0o7UUFDQSxNQUFNdUIsWUFBWSxFQUFFdkIsR0FBRyxFQUFFO1lBQ3JCLE9BQU8sTUFBTXZCLGdCQUFnQjhDLFVBQVUsQ0FBQztnQkFDcEM5RDtnQkFDQUM7Z0JBQ0FzQztZQUNKO1FBQ0o7UUFDQSxNQUFNd0IsV0FBV2pFLE1BQU07WUFDbkIsT0FBTyxNQUFNa0IsZ0JBQWdCK0MsU0FBUyxDQUFDO2dCQUNuQy9EO2dCQUNBQztnQkFDQSxHQUFHSCxNQUFNO1lBQ2I7UUFDSjtJQUNKO0FBQ0o7QUFFdUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZS1qb3VybmFsLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL2Rpc3QvaW5kZXgtMjhlZmRhY2YubWpzPzdjMGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWRnZVN0b3JlRXJyb3IgfSBmcm9tICdAZWRnZXN0b3JlL3NoYXJlZCc7XG5cbmNvbnN0IERFRkFVTFRfTUVTU0FHRSA9IGBNaXNzaW5nIEVER0VfU1RPUkVfQUNDRVNTX0tFWSBvciBFREdFX1NUT1JFX1NFQ1JFVF9LRVkuIFxuVGhpcyBjYW4gaGFwcGVuIGlmIHlvdSBhcmUgdHJ5aW5nIHRvIGltcG9ydCBzb21ldGhpbmcgcmVsYXRlZCB0byB0aGUgYmFja2VuZCBvZiBFZGdlIFN0b3JlIGluIGEgY2xpZW50IGNvbXBvbmVudC5gO1xuY2xhc3MgRWRnZVN0b3JlQ3JlZGVudGlhbHNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gREVGQVVMVF9NRVNTQUdFKXtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdFZGdlU3RvcmVDcmVkZW50aWFsc0Vycm9yJztcbiAgICB9XG59XG5cbmNvbnN0IEFQSV9FTkRQT0lOVCA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfQVBJX0VORFBPSU5UID8/ICdodHRwczovL2FwaS5lZGdlc3RvcmUuZGV2JztcbmFzeW5jIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KHBhcmFtcykge1xuICAgIGNvbnN0IHsgYm9keSwgYWNjZXNzS2V5LCBzZWNyZXRLZXksIHBhdGggfSA9IHBhcmFtcztcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUElfRU5EUE9JTlR9JHtwYXRofWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7QnVmZmVyLmZyb20oYCR7YWNjZXNzS2V5fToke3NlY3JldEtleX1gKS50b1N0cmluZygnYmFzZTY0Jyl9YFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbWFrZSByZXF1ZXN0IHRvICR7cGF0aH06ICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKCk7XG59XG5jb25zdCBlZGdlU3RvcmVSYXdTZGsgPSB7XG4gICAgYXN5bmMgZ2V0VG9rZW4gKHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXFCdWNrZXRzID0gT2JqZWN0LmVudHJpZXMocGFyYW1zLnJvdXRlci5idWNrZXRzKS5yZWR1Y2UoKGFjYywgW2J1Y2tldE5hbWUsIGJ1Y2tldF0pPT57XG4gICAgICAgICAgICBhY2NbYnVja2V0TmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgcGF0aDogYnVja2V0Ll9kZWYucGF0aC5tYXAoKHApPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHApO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1FbnRyaWVzWzBdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEVtcHR5IHBhdGggcGFyYW0gZm91bmQgaW46ICR7SlNPTi5zdHJpbmdpZnkoYnVja2V0Ll9kZWYucGF0aCl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gcGFyYW1FbnRyaWVzWzBdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhY2Nlc3NDb250cm9sOiBidWNrZXQuX2RlZi5hY2Nlc3NDb250cm9sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgICBjb25zdCB7IHRva2VuIH0gPSBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgY3R4OiBwYXJhbXMuY3R4LFxuICAgICAgICAgICAgICAgIGJ1Y2tldHM6IHJlcUJ1Y2tldHNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhY2Nlc3NLZXk6IHBhcmFtcy5hY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXk6IHBhcmFtcy5zZWNyZXRLZXksXG4gICAgICAgICAgICBwYXRoOiAnL2dldC10b2tlbidcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIGdldEZpbGUgKHsgYWNjZXNzS2V5LCBzZWNyZXRLZXksIHVybCB9KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiAnL2dldC1maWxlJyxcbiAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyByZXF1ZXN0VXBsb2FkICh7IGFjY2Vzc0tleSwgc2VjcmV0S2V5LCBidWNrZXROYW1lLCBidWNrZXRUeXBlLCBmaWxlSW5mbywgbXVsdGlwYXJ0IH0pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogJy9yZXF1ZXN0LXVwbG9hZCcsXG4gICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgbXVsdGlwYXJ0LFxuICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgYnVja2V0VHlwZSxcbiAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmlsZUluZm8uaXNQdWJsaWMsXG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZUluZm8ucGF0aCxcbiAgICAgICAgICAgICAgICBleHRlbnNpb246IGZpbGVJbmZvLmV4dGVuc2lvbixcbiAgICAgICAgICAgICAgICBzaXplOiBmaWxlSW5mby5zaXplLFxuICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBmaWxlSW5mby50eXBlLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBmaWxlSW5mby5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZUluZm8uZmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgcmVwbGFjZVRhcmdldFVybDogZmlsZUluZm8ucmVwbGFjZVRhcmdldFVybCxcbiAgICAgICAgICAgICAgICBpc1RlbXBvcmFyeTogZmlsZUluZm8udGVtcG9yYXJ5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbXVsdGlwYXJ0OiByZXMubXVsdGlwYXJ0LFxuICAgICAgICAgICAgc2lnbmVkVXJsOiByZXMuc2lnbmVkVXJsLFxuICAgICAgICAgICAgYWNjZXNzVXJsOiByZXMudXJsLFxuICAgICAgICAgICAgcGF0aDogcmVzLnBhdGgsXG4gICAgICAgICAgICB0aHVtYm5haWxVcmw6IHJlcy50aHVtYm5haWxVcmxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGFzeW5jIHJlcXVlc3RVcGxvYWRQYXJ0cyAoeyBhY2Nlc3NLZXksIHNlY3JldEtleSwga2V5LCBtdWx0aXBhcnQgfSkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiAnL3JlcXVlc3QtdXBsb2FkLXBhcnRzJyxcbiAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnQsXG4gICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbXVsdGlwYXJ0OiByZXMubXVsdGlwYXJ0XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBhc3luYyBjb21wbGV0ZU11bHRpcGFydFVwbG9hZCAoeyBhY2Nlc3NLZXksIHNlY3JldEtleSwgdXBsb2FkSWQsIGtleSwgcGFydHMgfSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogJy9jb21wbGV0ZS1tdWx0aXBhcnQtdXBsb2FkJyxcbiAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgcGFydHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBjb25maXJtVXBsb2FkICh7IGFjY2Vzc0tleSwgc2VjcmV0S2V5LCB1cmwgfSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogJy9jb25maXJtLXVwbG9hZCcsXG4gICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZGVsZXRlRmlsZSAoeyBhY2Nlc3NLZXksIHNlY3JldEtleSwgdXJsIH0pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHBhdGg6ICcvZGVsZXRlLWZpbGUnLFxuICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGxpc3RGaWxlcyAoeyBhY2Nlc3NLZXksIHNlY3JldEtleSwgYnVja2V0TmFtZSwgZmlsdGVyLCBwYWdpbmF0aW9uIH0pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHBhdGg6ICcvbGlzdC1maWxlcycsXG4gICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuZnVuY3Rpb24gaW5pdEVkZ2VTdG9yZVNkayhwYXJhbXMpIHtcbiAgICBjb25zdCB7IGFjY2Vzc0tleSA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfQUNDRVNTX0tFWSwgc2VjcmV0S2V5ID0gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9TRUNSRVRfS0VZIH0gPSBwYXJhbXMgPz8ge307XG4gICAgaWYgKCFhY2Nlc3NLZXkgfHwgIXNlY3JldEtleSkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ3JlZGVudGlhbHNFcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBhc3luYyBnZXRUb2tlbiAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLmdldFRva2VuKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIGN0eDogcGFyYW1zLmN0eCxcbiAgICAgICAgICAgICAgICByb3V0ZXI6IHBhcmFtcy5yb3V0ZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRGaWxlICh7IHVybCB9KSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLmdldEZpbGUoe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgcmVxdWVzdFVwbG9hZCAoeyBidWNrZXROYW1lLCBidWNrZXRUeXBlLCBmaWxlSW5mbywgbXVsdGlwYXJ0IH0pIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsucmVxdWVzdFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgIGJ1Y2tldFR5cGUsXG4gICAgICAgICAgICAgICAgZmlsZUluZm8sXG4gICAgICAgICAgICAgICAgbXVsdGlwYXJ0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgcmVxdWVzdFVwbG9hZFBhcnRzICh7IGtleSwgbXVsdGlwYXJ0IH0pIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsucmVxdWVzdFVwbG9hZFBhcnRzKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjb21wbGV0ZU11bHRpcGFydFVwbG9hZCAoeyB1cGxvYWRJZCwga2V5LCBwYXJ0cyB9KSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLmNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIHVwbG9hZElkLFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBwYXJ0c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNvbmZpcm1VcGxvYWQgKHsgdXJsIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsuY29uZmlybVVwbG9hZCh7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBkZWxldGVGaWxlICh7IHVybCB9KSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLmRlbGV0ZUZpbGUoe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgbGlzdEZpbGVzIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsubGlzdEZpbGVzKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgeyBFZGdlU3RvcmVDcmVkZW50aWFsc0Vycm9yIGFzIEUsIGVkZ2VTdG9yZVJhd1NkayBhcyBlLCBpbml0RWRnZVN0b3JlU2RrIGFzIGkgfTtcbiJdLCJuYW1lcyI6WyJFZGdlU3RvcmVFcnJvciIsIkRFRkFVTFRfTUVTU0FHRSIsIkVkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIm5hbWUiLCJBUElfRU5EUE9JTlQiLCJwcm9jZXNzIiwiZW52IiwiRURHRV9TVE9SRV9BUElfRU5EUE9JTlQiLCJtYWtlUmVxdWVzdCIsInBhcmFtcyIsImJvZHkiLCJhY2Nlc3NLZXkiLCJzZWNyZXRLZXkiLCJwYXRoIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJvayIsInRleHQiLCJqc29uIiwiZWRnZVN0b3JlUmF3U2RrIiwiZ2V0VG9rZW4iLCJyZXFCdWNrZXRzIiwiT2JqZWN0IiwiZW50cmllcyIsInJvdXRlciIsImJ1Y2tldHMiLCJyZWR1Y2UiLCJhY2MiLCJidWNrZXROYW1lIiwiYnVja2V0IiwiX2RlZiIsIm1hcCIsInAiLCJwYXJhbUVudHJpZXMiLCJ1bmRlZmluZWQiLCJjb2RlIiwia2V5IiwidmFsdWUiLCJhY2Nlc3NDb250cm9sIiwidG9rZW4iLCJjdHgiLCJnZXRGaWxlIiwidXJsIiwicmVxdWVzdFVwbG9hZCIsImJ1Y2tldFR5cGUiLCJmaWxlSW5mbyIsIm11bHRpcGFydCIsImlzUHVibGljIiwiZXh0ZW5zaW9uIiwic2l6ZSIsIm1pbWVUeXBlIiwidHlwZSIsIm1ldGFkYXRhIiwiZmlsZU5hbWUiLCJyZXBsYWNlVGFyZ2V0VXJsIiwiaXNUZW1wb3JhcnkiLCJ0ZW1wb3JhcnkiLCJzaWduZWRVcmwiLCJhY2Nlc3NVcmwiLCJ0aHVtYm5haWxVcmwiLCJyZXF1ZXN0VXBsb2FkUGFydHMiLCJjb21wbGV0ZU11bHRpcGFydFVwbG9hZCIsInVwbG9hZElkIiwicGFydHMiLCJjb25maXJtVXBsb2FkIiwiZGVsZXRlRmlsZSIsImxpc3RGaWxlcyIsImZpbHRlciIsInBhZ2luYXRpb24iLCJpbml0RWRnZVN0b3JlU2RrIiwiRURHRV9TVE9SRV9BQ0NFU1NfS0VZIiwiRURHRV9TVE9SRV9TRUNSRVRfS0VZIiwiRSIsImUiLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initEdgeStore: () => (/* reexport safe */ _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.initEdgeStore)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZS1qb3VybmFsLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL2Rpc3QvaW5kZXgubWpzP2I2ZjkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgaW5pdEVkZ2VTdG9yZSB9IGZyb20gJ0BlZGdlc3RvcmUvc2hhcmVkJztcbiJdLCJuYW1lcyI6WyJpbml0RWRnZVN0b3JlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/logger-09f43a75.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/logger-09f43a75.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ Logger)\n/* harmony export */ });\n/* eslint-disable no-console */ function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nconst logLevel = [\n    \"debug\",\n    \"info\",\n    \"warn\",\n    \"error\",\n    \"none\"\n];\nclass Logger {\n    shouldLog(level) {\n        return logLevel.indexOf(level) >= logLevel.indexOf(this.logLevel);\n    }\n    debug(message, ...optionalParams) {\n        if (this.shouldLog(\"debug\")) {\n            console.debug(\"[EdgeStoreDebug]\", message, ...optionalParams);\n        }\n    }\n    info(message, ...optionalParams) {\n        if (this.shouldLog(\"info\")) {\n            console.info(\"[EdgeStoreInfo]\", message, ...optionalParams);\n        }\n    }\n    warn(message, ...optionalParams) {\n        if (this.shouldLog(\"warn\")) {\n            console.warn(\"[EdgeStoreWarn]\", message, ...optionalParams);\n        }\n    }\n    error(message, ...optionalParams) {\n        if (this.shouldLog(\"error\")) {\n            console.error(\"[EdgeStoreError]\", message, ...optionalParams);\n        }\n    }\n    constructor(logLevel){\n        _define_property(this, \"logLevel\", void 0);\n        this.logLevel = logLevel ?? ( false ? 0 : \"info\");\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9sb2dnZXItMDlmNDNhNzUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSw2QkFBNkIsR0FBRyxTQUFTQSxpQkFBaUJDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxLQUFLO0lBQ3JFLElBQUlELE9BQU9ELEtBQUs7UUFDWkcsT0FBT0MsY0FBYyxDQUFDSixLQUFLQyxLQUFLO1lBQzVCQyxPQUFPQTtZQUNQRyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtRQUNkO0lBQ0osT0FBTztRQUNIUCxHQUFHLENBQUNDLElBQUksR0FBR0M7SUFDZjtJQUNBLE9BQU9GO0FBQ1g7QUFDQSxNQUFNUSxXQUFXO0lBQ2I7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0QsTUFBTUM7SUFDRkMsVUFBVUMsS0FBSyxFQUFFO1FBQ2IsT0FBT0gsU0FBU0ksT0FBTyxDQUFDRCxVQUFVSCxTQUFTSSxPQUFPLENBQUMsSUFBSSxDQUFDSixRQUFRO0lBQ3BFO0lBQ0FLLE1BQU1DLE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDOUIsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxVQUFVO1lBQ3pCTSxRQUFRSCxLQUFLLENBQUMsb0JBQW9CQyxZQUFZQztRQUNsRDtJQUNKO0lBQ0FFLEtBQUtILE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDN0IsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxTQUFTO1lBQ3hCTSxRQUFRQyxJQUFJLENBQUMsbUJBQW1CSCxZQUFZQztRQUNoRDtJQUNKO0lBQ0FHLEtBQUtKLE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDN0IsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxTQUFTO1lBQ3hCTSxRQUFRRSxJQUFJLENBQUMsbUJBQW1CSixZQUFZQztRQUNoRDtJQUNKO0lBQ0FJLE1BQU1MLE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDOUIsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxVQUFVO1lBQ3pCTSxRQUFRRyxLQUFLLENBQUMsb0JBQW9CTCxZQUFZQztRQUNsRDtJQUNKO0lBQ0FLLFlBQVlaLFFBQVEsQ0FBQztRQUNqQlQsaUJBQWlCLElBQUksRUFBRSxZQUFZLEtBQUs7UUFDeEMsSUFBSSxDQUFDUyxRQUFRLEdBQUdBLFlBQWFhLENBQUFBLE1BQXlCLEdBQWUsSUFBVSxNQUFLO0lBQ3hGO0FBQ0o7QUFFdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZS1qb3VybmFsLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL2Rpc3QvbG9nZ2VyLTA5ZjQzYTc1Lm1qcz9lOTNkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8gZnVuY3Rpb24gX2RlZmluZV9wcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuY29uc3QgbG9nTGV2ZWwgPSBbXG4gICAgJ2RlYnVnJyxcbiAgICAnaW5mbycsXG4gICAgJ3dhcm4nLFxuICAgICdlcnJvcicsXG4gICAgJ25vbmUnXG5dO1xuY2xhc3MgTG9nZ2VyIHtcbiAgICBzaG91bGRMb2cobGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuIGxvZ0xldmVsLmluZGV4T2YobGV2ZWwpID49IGxvZ0xldmVsLmluZGV4T2YodGhpcy5sb2dMZXZlbCk7XG4gICAgfVxuICAgIGRlYnVnKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZExvZygnZGVidWcnKSkge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnW0VkZ2VTdG9yZURlYnVnXScsIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmZvKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZExvZygnaW5mbycpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ1tFZGdlU3RvcmVJbmZvXScsIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YXJuKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZExvZygnd2FybicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tFZGdlU3RvcmVXYXJuXScsIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlcnJvcihtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcykge1xuICAgICAgICBpZiAodGhpcy5zaG91bGRMb2coJ2Vycm9yJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tFZGdlU3RvcmVFcnJvcl0nLCBtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3RydWN0b3IobG9nTGV2ZWwpe1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwibG9nTGV2ZWxcIiwgdm9pZCAwKTtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsID8/IChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJ2Vycm9yJyA6ICdpbmZvJyk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBMb2dnZXIgYXMgTCB9O1xuIl0sIm5hbWVzIjpbIl9kZWZpbmVfcHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwibG9nTGV2ZWwiLCJMb2dnZXIiLCJzaG91bGRMb2ciLCJsZXZlbCIsImluZGV4T2YiLCJkZWJ1ZyIsIm1lc3NhZ2UiLCJvcHRpb25hbFBhcmFtcyIsImNvbnNvbGUiLCJpbmZvIiwid2FybiIsImVycm9yIiwiY29uc3RydWN0b3IiLCJwcm9jZXNzIiwiTCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/logger-09f43a75.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EdgeStoreProvider: () => (/* binding */ EdgeStoreProvider)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index-28efdacf.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs\");\n\n\nconst DEFAULT_BASE_URL = \"https://files.edgestore.dev\";\nfunction EdgeStoreProvider(options) {\n    const { accessKey = process.env.EDGE_STORE_ACCESS_KEY, secretKey = process.env.EDGE_STORE_SECRET_KEY } = options ?? {};\n    const baseUrl = process.env.EDGE_STORE_BASE_URL ?? DEFAULT_BASE_URL;\n    if (!accessKey || !secretKey) {\n        throw new _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__.E();\n    }\n    const edgeStoreSdk = (0,_index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__.i)({\n        accessKey,\n        secretKey\n    });\n    return {\n        init: async ({ ctx, router })=>{\n            const token = await edgeStoreSdk.getToken({\n                ctx,\n                router\n            });\n            return {\n                token\n            };\n        },\n        getBaseUrl () {\n            return baseUrl;\n        },\n        getFile: async ({ url })=>{\n            const { uploadedAt, ...rest } = await edgeStoreSdk.getFile({\n                url\n            });\n            return {\n                uploadedAt: new Date(uploadedAt),\n                ...rest\n            };\n        },\n        async requestUpload ({ bucketName, bucketType, fileInfo }) {\n            // multipart upload if file is bigger than a certain size\n            const MULTIPART_THRESHOLD = 10 * 1024 * 1024; // 10MB\n            let partSize = 5 * 1024 * 1024; // 5MB\n            if (fileInfo.size > MULTIPART_THRESHOLD) {\n                let totalParts = Math.ceil(fileInfo.size / partSize);\n                if (totalParts > 1000) {\n                    // the maximum number of parts is 1000\n                    totalParts = 1000;\n                    partSize = Math.ceil(fileInfo.size / totalParts);\n                }\n                const res = await edgeStoreSdk.requestUpload({\n                    bucketName,\n                    bucketType,\n                    fileInfo,\n                    multipart: {\n                        parts: Array.from({\n                            length: totalParts\n                        }).map((_, index)=>index + 1)\n                    }\n                });\n                const multipart = res.multipart ? {\n                    key: res.multipart.key,\n                    uploadId: res.multipart.uploadId,\n                    parts: res.multipart.parts.map((part)=>({\n                            partNumber: part.partNumber,\n                            uploadUrl: part.signedUrl\n                        })),\n                    partSize,\n                    totalParts\n                } : undefined;\n                if (multipart) {\n                    return {\n                        accessUrl: res.accessUrl,\n                        thumbnailUrl: res.thumbnailUrl,\n                        multipart\n                    };\n                } else if (res.signedUrl) {\n                    return {\n                        accessUrl: res.accessUrl,\n                        uploadUrl: res.signedUrl,\n                        thumbnailUrl: res.thumbnailUrl\n                    };\n                } else {\n                    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                        message: \"Could not get upload url\",\n                        code: \"SERVER_ERROR\"\n                    });\n                }\n            }\n            const res = await edgeStoreSdk.requestUpload({\n                bucketName,\n                bucketType,\n                fileInfo\n            });\n            if (res.signedUrl) {\n                return {\n                    accessUrl: res.accessUrl,\n                    uploadUrl: res.signedUrl,\n                    thumbnailUrl: res.thumbnailUrl\n                };\n            }\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Could not get upload url\",\n                code: \"SERVER_ERROR\"\n            });\n        },\n        requestUploadParts: async ({ multipart, path })=>{\n            const res = await edgeStoreSdk.requestUploadParts({\n                multipart,\n                key: path\n            });\n            return {\n                multipart: {\n                    uploadId: res.multipart.uploadId,\n                    parts: res.multipart.parts.map((part)=>({\n                            partNumber: part.partNumber,\n                            uploadUrl: part.signedUrl\n                        }))\n                }\n            };\n        },\n        completeMultipartUpload: async ({ uploadId, key, parts })=>{\n            return await edgeStoreSdk.completeMultipartUpload({\n                uploadId,\n                key,\n                parts\n            });\n        },\n        confirmUpload: async ({ url })=>{\n            return await edgeStoreSdk.confirmUpload({\n                url\n            });\n        },\n        deleteFile: async ({ url })=>{\n            return await edgeStoreSdk.deleteFile({\n                url\n            });\n        }\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9wcm92aWRlcnMvZWRnZXN0b3JlL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUQ7QUFDOEM7QUFFakcsTUFBTUssbUJBQW1CO0FBQ3pCLFNBQVNDLGtCQUFrQkMsT0FBTztJQUM5QixNQUFNLEVBQUVDLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MscUJBQXFCLEVBQUVDLFlBQVlILFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCLEVBQUUsR0FBR04sV0FBVyxDQUFDO0lBQ3JILE1BQU1PLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssbUJBQW1CLElBQUlWO0lBQ25ELElBQUksQ0FBQ0csYUFBYSxDQUFDSSxXQUFXO1FBQzFCLE1BQU0sSUFBSVYsa0RBQXlCQTtJQUN2QztJQUNBLE1BQU1jLGVBQWVaLHNEQUFnQkEsQ0FBQztRQUNsQ0k7UUFDQUk7SUFDSjtJQUNBLE9BQU87UUFDSEssTUFBTSxPQUFPLEVBQUVDLEdBQUcsRUFBRUMsTUFBTSxFQUFFO1lBQ3hCLE1BQU1DLFFBQVEsTUFBTUosYUFBYUssUUFBUSxDQUFDO2dCQUN0Q0g7Z0JBQ0FDO1lBQ0o7WUFDQSxPQUFPO2dCQUNIQztZQUNKO1FBQ0o7UUFDQUU7WUFDSSxPQUFPUjtRQUNYO1FBQ0FTLFNBQVMsT0FBTyxFQUFFQyxHQUFHLEVBQUU7WUFDbkIsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR0MsTUFBTSxHQUFHLE1BQU1WLGFBQWFPLE9BQU8sQ0FBQztnQkFDdkRDO1lBQ0o7WUFDQSxPQUFPO2dCQUNIQyxZQUFZLElBQUlFLEtBQUtGO2dCQUNyQixHQUFHQyxJQUFJO1lBQ1g7UUFDSjtRQUNBLE1BQU1FLGVBQWUsRUFBRUMsVUFBVSxFQUFFQyxVQUFVLEVBQUVDLFFBQVEsRUFBRTtZQUNyRCx5REFBeUQ7WUFDekQsTUFBTUMsc0JBQXNCLEtBQUssT0FBTyxNQUFNLE9BQU87WUFDckQsSUFBSUMsV0FBVyxJQUFJLE9BQU8s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QztZQUNKO1FBQ0o7SUFDSjtBQUNKO0FBRTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9kaXN0L3Byb3ZpZGVycy9lZGdlc3RvcmUvaW5kZXgubWpzP2IzN2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWRnZVN0b3JlRXJyb3IgfSBmcm9tICdAZWRnZXN0b3JlL3NoYXJlZCc7XG5pbXBvcnQgeyBFIGFzIEVkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3IsIGkgYXMgaW5pdEVkZ2VTdG9yZVNkayB9IGZyb20gJy4uLy4uL2luZGV4LTI4ZWZkYWNmLm1qcyc7XG5cbmNvbnN0IERFRkFVTFRfQkFTRV9VUkwgPSAnaHR0cHM6Ly9maWxlcy5lZGdlc3RvcmUuZGV2JztcbmZ1bmN0aW9uIEVkZ2VTdG9yZVByb3ZpZGVyKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFjY2Vzc0tleSA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfQUNDRVNTX0tFWSwgc2VjcmV0S2V5ID0gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9TRUNSRVRfS0VZIH0gPSBvcHRpb25zID8/IHt9O1xuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX0JBU0VfVVJMID8/IERFRkFVTFRfQkFTRV9VUkw7XG4gICAgaWYgKCFhY2Nlc3NLZXkgfHwgIXNlY3JldEtleSkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ3JlZGVudGlhbHNFcnJvcigpO1xuICAgIH1cbiAgICBjb25zdCBlZGdlU3RvcmVTZGsgPSBpbml0RWRnZVN0b3JlU2RrKHtcbiAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICBzZWNyZXRLZXlcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBhc3luYyAoeyBjdHgsIHJvdXRlciB9KT0+e1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBlZGdlU3RvcmVTZGsuZ2V0VG9rZW4oe1xuICAgICAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgICAgICByb3V0ZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b2tlblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0QmFzZVVybCAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYmFzZVVybDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0RmlsZTogYXN5bmMgKHsgdXJsIH0pPT57XG4gICAgICAgICAgICBjb25zdCB7IHVwbG9hZGVkQXQsIC4uLnJlc3QgfSA9IGF3YWl0IGVkZ2VTdG9yZVNkay5nZXRGaWxlKHtcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZSh1cGxvYWRlZEF0KSxcbiAgICAgICAgICAgICAgICAuLi5yZXN0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyByZXF1ZXN0VXBsb2FkICh7IGJ1Y2tldE5hbWUsIGJ1Y2tldFR5cGUsIGZpbGVJbmZvIH0pIHtcbiAgICAgICAgICAgIC8vIG11bHRpcGFydCB1cGxvYWQgaWYgZmlsZSBpcyBiaWdnZXIgdGhhbiBhIGNlcnRhaW4gc2l6ZVxuICAgICAgICAgICAgY29uc3QgTVVMVElQQVJUX1RIUkVTSE9MRCA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUJcbiAgICAgICAgICAgIGxldCBwYXJ0U2l6ZSA9IDUgKiAxMDI0ICogMTAyNDsgLy8gNU1CXG4gICAgICAgICAgICBpZiAoZmlsZUluZm8uc2l6ZSA+IE1VTFRJUEFSVF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG90YWxQYXJ0cyA9IE1hdGguY2VpbChmaWxlSW5mby5zaXplIC8gcGFydFNpemUpO1xuICAgICAgICAgICAgICAgIGlmICh0b3RhbFBhcnRzID4gMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGFydHMgaXMgMTAwMFxuICAgICAgICAgICAgICAgICAgICB0b3RhbFBhcnRzID0gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgcGFydFNpemUgPSBNYXRoLmNlaWwoZmlsZUluZm8uc2l6ZSAvIHRvdGFsUGFydHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBlZGdlU3RvcmVTZGsucmVxdWVzdFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGZpbGVJbmZvLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBhcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzOiBBcnJheS5mcm9tKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IHRvdGFsUGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLm1hcCgoXywgaW5kZXgpPT5pbmRleCArIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBtdWx0aXBhcnQgPSByZXMubXVsdGlwYXJ0ID8ge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHJlcy5tdWx0aXBhcnQua2V5LFxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRJZDogcmVzLm11bHRpcGFydC51cGxvYWRJZCxcbiAgICAgICAgICAgICAgICAgICAgcGFydHM6IHJlcy5tdWx0aXBhcnQucGFydHMubWFwKChwYXJ0KT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiBwYXJ0LnBhcnROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkVXJsOiBwYXJ0LnNpZ25lZFVybFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICBwYXJ0U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxQYXJ0c1xuICAgICAgICAgICAgICAgIH0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKG11bHRpcGFydCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVXJsOiByZXMuYWNjZXNzVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsVXJsOiByZXMudGh1bWJuYWlsVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwYXJ0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuc2lnbmVkVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NVcmw6IHJlcy5hY2Nlc3NVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRVcmw6IHJlcy5zaWduZWRVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxVcmw6IHJlcy50aHVtYm5haWxVcmxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBnZXQgdXBsb2FkIHVybCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBlZGdlU3RvcmVTZGsucmVxdWVzdFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICBidWNrZXRUeXBlLFxuICAgICAgICAgICAgICAgIGZpbGVJbmZvXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXMuc2lnbmVkVXJsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVXJsOiByZXMuYWNjZXNzVXJsLFxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRVcmw6IHJlcy5zaWduZWRVcmwsXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbFVybDogcmVzLnRodW1ibmFpbFVybFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgZ2V0IHVwbG9hZCB1cmwnLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWVzdFVwbG9hZFBhcnRzOiBhc3luYyAoeyBtdWx0aXBhcnQsIHBhdGggfSk9PntcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVkZ2VTdG9yZVNkay5yZXF1ZXN0VXBsb2FkUGFydHMoe1xuICAgICAgICAgICAgICAgIG11bHRpcGFydCxcbiAgICAgICAgICAgICAgICBrZXk6IHBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSWQ6IHJlcy5tdWx0aXBhcnQudXBsb2FkSWQsXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzOiByZXMubXVsdGlwYXJ0LnBhcnRzLm1hcCgocGFydCk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydE51bWJlcjogcGFydC5wYXJ0TnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZFVybDogcGFydC5zaWduZWRVcmxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkOiBhc3luYyAoeyB1cGxvYWRJZCwga2V5LCBwYXJ0cyB9KT0+e1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVNkay5jb21wbGV0ZU11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHBhcnRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlybVVwbG9hZDogYXN5bmMgKHsgdXJsIH0pPT57XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlU2RrLmNvbmZpcm1VcGxvYWQoe1xuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZUZpbGU6IGFzeW5jICh7IHVybCB9KT0+e1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVNkay5kZWxldGVGaWxlKHtcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgRWRnZVN0b3JlUHJvdmlkZXIgfTtcbiJdLCJuYW1lcyI6WyJFZGdlU3RvcmVFcnJvciIsIkUiLCJFZGdlU3RvcmVDcmVkZW50aWFsc0Vycm9yIiwiaSIsImluaXRFZGdlU3RvcmVTZGsiLCJERUZBVUxUX0JBU0VfVVJMIiwiRWRnZVN0b3JlUHJvdmlkZXIiLCJvcHRpb25zIiwiYWNjZXNzS2V5IiwicHJvY2VzcyIsImVudiIsIkVER0VfU1RPUkVfQUNDRVNTX0tFWSIsInNlY3JldEtleSIsIkVER0VfU1RPUkVfU0VDUkVUX0tFWSIsImJhc2VVcmwiLCJFREdFX1NUT1JFX0JBU0VfVVJMIiwiZWRnZVN0b3JlU2RrIiwiaW5pdCIsImN0eCIsInJvdXRlciIsInRva2VuIiwiZ2V0VG9rZW4iLCJnZXRCYXNlVXJsIiwiZ2V0RmlsZSIsInVybCIsInVwbG9hZGVkQXQiLCJyZXN0IiwiRGF0ZSIsInJlcXVlc3RVcGxvYWQiLCJidWNrZXROYW1lIiwiYnVja2V0VHlwZSIsImZpbGVJbmZvIiwiTVVMVElQQVJUX1RIUkVTSE9MRCIsInBhcnRTaXplIiwic2l6ZSIsInRvdGFsUGFydHMiLCJNYXRoIiwiY2VpbCIsInJlcyIsIm11bHRpcGFydCIsInBhcnRzIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwibWFwIiwiXyIsImluZGV4Iiwia2V5IiwidXBsb2FkSWQiLCJwYXJ0IiwicGFydE51bWJlciIsInVwbG9hZFVybCIsInNpZ25lZFVybCIsInVuZGVmaW5lZCIsImFjY2Vzc1VybCIsInRodW1ibmFpbFVybCIsIm1lc3NhZ2UiLCJjb2RlIiwicmVxdWVzdFVwbG9hZFBhcnRzIiwicGF0aCIsImNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkIiwiY29uZmlybVVwbG9hZCIsImRlbGV0ZUZpbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/shared-039276af.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/shared-039276af.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ requestUploadParts),\n/* harmony export */   b: () => (/* binding */ buildPath),\n/* harmony export */   c: () => (/* binding */ completeMultipartUpload),\n/* harmony export */   d: () => (/* binding */ confirmUpload),\n/* harmony export */   e: () => (/* binding */ deleteFile),\n/* harmony export */   i: () => (/* binding */ init),\n/* harmony export */   p: () => (/* binding */ parsePath),\n/* harmony export */   r: () => (/* binding */ requestUpload)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _panva_hkdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @panva/hkdf */ \"(rsc)/./node_modules/@panva/hkdf/dist/node/esm/index.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\n\nconst IMAGE_MIME_TYPES = [\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/webp\",\n    \"image/svg+xml\",\n    \"image/tiff\",\n    \"image/bmp\",\n    \"image/x-icon\"\n];\n// TODO: change it to 1 hour when we have a way to refresh the token\nconst DEFAULT_MAX_AGE = 30 * 24 * 60 * 60; // 30 days\nasync function init(params) {\n    const log = globalThis._EDGE_STORE_LOGGER;\n    const { ctx, provider, router } = params;\n    log.debug(\"Running [init]\", {\n        ctx\n    });\n    const ctxToken = await encryptJWT(ctx);\n    const { token } = await provider.init({\n        ctx,\n        router: router\n    });\n    const newCookies = [\n        (0,cookie__WEBPACK_IMPORTED_MODULE_2__.serialize)(\"edgestore-ctx\", ctxToken, {\n            path: \"/\",\n            maxAge: DEFAULT_MAX_AGE\n        })\n    ];\n    if (token) {\n        newCookies.push((0,cookie__WEBPACK_IMPORTED_MODULE_2__.serialize)(\"edgestore-token\", token, {\n            path: \"/\",\n            maxAge: DEFAULT_MAX_AGE\n        }));\n    }\n    const baseUrl = await provider.getBaseUrl();\n    log.debug(\"Finished [init]\", {\n        ctx,\n        newCookies,\n        token,\n        baseUrl\n    });\n    return {\n        newCookies,\n        token,\n        baseUrl\n    };\n}\nasync function requestUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, input, fileInfo } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [requestUpload]\", {\n        bucketName,\n        input,\n        fileInfo\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    const ctx = await getContext(ctxToken);\n    log.debug(\"Decrypted Context\", {\n        ctx\n    });\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    if (bucket._def.beforeUpload) {\n        log.debug(\"Running [beforeUpload]\");\n        const canUpload = await bucket._def.beforeUpload?.({\n            ctx,\n            input,\n            fileInfo: {\n                size: fileInfo.size,\n                type: fileInfo.type,\n                fileName: fileInfo.fileName,\n                extension: fileInfo.extension,\n                replaceTargetUrl: fileInfo.replaceTargetUrl,\n                temporary: fileInfo.temporary\n            }\n        });\n        log.debug(\"Finished [beforeUpload]\", {\n            canUpload\n        });\n        if (!canUpload) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Upload not allowed for the current context\",\n                code: \"UPLOAD_NOT_ALLOWED\"\n            });\n        }\n    }\n    if (bucket._def.type === \"IMAGE\") {\n        if (!IMAGE_MIME_TYPES.includes(fileInfo.type)) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: \"MIME_TYPE_NOT_ALLOWED\",\n                message: \"Only images are allowed in this bucket\",\n                details: {\n                    allowedMimeTypes: IMAGE_MIME_TYPES,\n                    mimeType: fileInfo.type\n                }\n            });\n        }\n    }\n    if (bucket._def.bucketConfig?.maxSize) {\n        if (fileInfo.size > bucket._def.bucketConfig.maxSize) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: \"FILE_TOO_LARGE\",\n                message: `File size is too big. Max size is ${bucket._def.bucketConfig.maxSize}`,\n                details: {\n                    maxFileSize: bucket._def.bucketConfig.maxSize,\n                    fileSize: fileInfo.size\n                }\n            });\n        }\n    }\n    if (bucket._def.bucketConfig?.accept) {\n        const accept = bucket._def.bucketConfig.accept;\n        let accepted = false;\n        for (const acceptedMimeType of accept){\n            if (acceptedMimeType.endsWith(\"/*\")) {\n                const mimeType = acceptedMimeType.replace(\"/*\", \"\");\n                if (fileInfo.type.startsWith(mimeType)) {\n                    accepted = true;\n                    break;\n                }\n            } else if (fileInfo.type === acceptedMimeType) {\n                accepted = true;\n                break;\n            }\n        }\n        if (!accepted) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: \"MIME_TYPE_NOT_ALLOWED\",\n                message: `\"${fileInfo.type}\" is not allowed. Accepted types are ${JSON.stringify(accept)}`,\n                details: {\n                    allowedMimeTypes: accept,\n                    mimeType: fileInfo.type\n                }\n            });\n        }\n    }\n    const path = buildPath({\n        fileInfo,\n        bucket,\n        pathAttrs: {\n            ctx,\n            input\n        }\n    });\n    const metadata = await bucket._def.metadata?.({\n        ctx,\n        input\n    });\n    const isPublic = bucket._def.accessControl === undefined;\n    log.debug(\"upload info\", {\n        path,\n        metadata,\n        isPublic,\n        bucketType: bucket._def.type\n    });\n    const requestUploadRes = await provider.requestUpload({\n        bucketName,\n        bucketType: bucket._def.type,\n        fileInfo: {\n            ...fileInfo,\n            path,\n            isPublic,\n            metadata\n        }\n    });\n    const { parsedPath, pathOrder } = parsePath(path);\n    log.debug(\"Finished [requestUpload]\");\n    return {\n        ...requestUploadRes,\n        size: fileInfo.size,\n        uploadedAt: new Date().toISOString(),\n        path: parsedPath,\n        pathOrder,\n        metadata\n    };\n}\nasync function requestUploadParts(params) {\n    const { provider, ctxToken, body: { multipart, path } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [requestUploadParts]\", {\n        multipart,\n        path\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const res = await provider.requestUploadParts({\n        multipart,\n        path\n    });\n    log.debug(\"Finished [requestUploadParts]\");\n    return res;\n}\nasync function completeMultipartUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, uploadId, key, parts } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [completeMultipartUpload]\", {\n        bucketName,\n        uploadId,\n        key\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    const res = await provider.completeMultipartUpload({\n        uploadId,\n        key,\n        parts\n    });\n    log.debug(\"Finished [completeMultipartUpload]\");\n    return res;\n}\nasync function confirmUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, url } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [confirmUpload]\", {\n        bucketName,\n        url\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    const res = await provider.confirmUpload({\n        bucket,\n        url: unproxyUrl(url)\n    });\n    log.debug(\"Finished [confirmUpload]\");\n    return res;\n}\nasync function deleteFile(params) {\n    const { provider, router, ctxToken, body: { bucketName, url } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [deleteFile]\", {\n        bucketName,\n        url\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    const ctx = await getContext(ctxToken);\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    if (!bucket._def.beforeDelete) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"You need to define beforeDelete if you want to delete files directly from the frontend.\",\n            code: \"SERVER_ERROR\"\n        });\n    }\n    const fileInfo = await provider.getFile({\n        url: unproxyUrl(url)\n    });\n    const canDelete = await bucket._def.beforeDelete({\n        ctx,\n        fileInfo\n    });\n    if (!canDelete) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Delete not allowed for the current context\",\n            code: \"DELETE_NOT_ALLOWED\"\n        });\n    }\n    const res = await provider.deleteFile({\n        bucket,\n        url: unproxyUrl(url)\n    });\n    log.debug(\"Finished [deleteFile]\");\n    return res;\n}\nasync function encryptJWT(ctx) {\n    const secret = process.env.EDGE_STORE_JWT_SECRET ?? process.env.EDGE_STORE_SECRET_KEY;\n    if (!secret) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"EDGE_STORE_JWT_SECRET or EDGE_STORE_SECRET_KEY is not defined\",\n            code: \"SERVER_ERROR\"\n        });\n    }\n    const encryptionSecret = await getDerivedEncryptionKey(secret);\n    return await new jose__WEBPACK_IMPORTED_MODULE_3__.EncryptJWT(ctx).setProtectedHeader({\n        alg: \"dir\",\n        enc: \"A256GCM\"\n    }).setIssuedAt().setExpirationTime(Date.now() / 1000 + DEFAULT_MAX_AGE).setJti((0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])()).encrypt(encryptionSecret);\n}\nasync function decryptJWT(token) {\n    const secret = process.env.EDGE_STORE_JWT_SECRET ?? process.env.EDGE_STORE_SECRET_KEY;\n    if (!secret) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"EDGE_STORE_JWT_SECRET or EDGE_STORE_SECRET_KEY is not defined\",\n            code: \"SERVER_ERROR\"\n        });\n    }\n    const encryptionSecret = await getDerivedEncryptionKey(secret);\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.jwtDecrypt)(token, encryptionSecret, {\n        clockTolerance: 15\n    });\n    return payload;\n}\nasync function getDerivedEncryptionKey(secret) {\n    return await (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_1__.hkdf)(\"sha256\", secret, \"\", \"Edge Store Generated Encryption Key\", 32);\n}\nfunction buildPath(params) {\n    const { bucket } = params;\n    const pathParams = bucket._def.path;\n    const path = pathParams.map((param)=>{\n        const paramEntries = Object.entries(param);\n        if (paramEntries[0] === undefined) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: `Empty path param found in: ${JSON.stringify(pathParams)}`,\n                code: \"SERVER_ERROR\"\n            });\n        }\n        const [key, value] = paramEntries[0];\n        // this is a string like: \"ctx.xxx\" or \"input.yyy.zzz\"\n        const currParamVal = value().split(\".\").reduce((acc2, key)=>{\n            if (acc2[key] === undefined) {\n                throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                    message: `Missing key ${key} in ${JSON.stringify(acc2)}`,\n                    code: \"BAD_REQUEST\"\n                });\n            }\n            return acc2[key];\n        }, params.pathAttrs);\n        return {\n            key,\n            value: currParamVal\n        };\n    });\n    return path;\n}\nfunction parsePath(path) {\n    const parsedPath = path.reduce((acc, curr)=>{\n        acc[curr.key] = curr.value;\n        return acc;\n    }, {});\n    const pathOrder = path.map((p)=>p.key);\n    return {\n        parsedPath,\n        pathOrder\n    };\n}\nasync function getContext(token) {\n    return await decryptJWT(token);\n}\n/**\n * On local development, protected files are proxied to the server,\n * which changes the original URL.\n *\n * This function is used to get the original URL,\n * so that we can delete or confirm the upload.\n */ function unproxyUrl(url) {\n    if ( true && url.startsWith(\"http://\")) {\n        // get the url param from the query string\n        const urlParam = new URL(url).searchParams.get(\"url\");\n        if (urlParam) {\n            return urlParam;\n        }\n    }\n    return url;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9zaGFyZWQtMDM5Mjc2YWYubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUQ7QUFDaEI7QUFDQTtBQUNXO0FBQ3BCO0FBRTFCLE1BQU1NLG1CQUFtQjtJQUNyQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFFRCxvRUFBb0U7QUFDcEUsTUFBTUMsa0JBQWtCLEtBQUssS0FBSyxLQUFLLElBQUksVUFBVTtBQUNyRCxlQUFlQyxLQUFLQyxNQUFNO0lBQ3RCLE1BQU1DLE1BQU1DLFdBQVdDLGtCQUFrQjtJQUN6QyxNQUFNLEVBQUVDLEdBQUcsRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUUsR0FBR047SUFDbENDLElBQUlNLEtBQUssQ0FBQyxrQkFBa0I7UUFDeEJIO0lBQ0o7SUFDQSxNQUFNSSxXQUFXLE1BQU1DLFdBQVdMO0lBQ2xDLE1BQU0sRUFBRU0sS0FBSyxFQUFFLEdBQUcsTUFBTUwsU0FBU04sSUFBSSxDQUFDO1FBQ2xDSztRQUNBRSxRQUFRQTtJQUNaO0lBQ0EsTUFBTUssYUFBYTtRQUNmbEIsaURBQVNBLENBQUMsaUJBQWlCZSxVQUFVO1lBQ2pDSSxNQUFNO1lBQ05DLFFBQVFmO1FBQ1o7S0FDSDtJQUNELElBQUlZLE9BQU87UUFDUEMsV0FBV0csSUFBSSxDQUFDckIsaURBQVNBLENBQUMsbUJBQW1CaUIsT0FBTztZQUNoREUsTUFBTTtZQUNOQyxRQUFRZjtRQUNaO0lBQ0o7SUFDQSxNQUFNaUIsVUFBVSxNQUFNVixTQUFTVyxVQUFVO0lBQ3pDZixJQUFJTSxLQUFLLENBQUMsbUJBQW1CO1FBQ3pCSDtRQUNBTztRQUNBRDtRQUNBSztJQUNKO0lBQ0EsT0FBTztRQUNISjtRQUNBRDtRQUNBSztJQUNKO0FBQ0o7QUFDQSxlQUFlRSxjQUFjakIsTUFBTTtJQUMvQixNQUFNLEVBQUVLLFFBQVEsRUFBRUMsTUFBTSxFQUFFRSxRQUFRLEVBQUVVLE1BQU0sRUFBRUMsVUFBVSxFQUFFQyxLQUFLLEVBQUVDLFFBQVEsRUFBRSxFQUFFLEdBQUdyQjtJQUM5RSxNQUFNQyxNQUFNQyxXQUFXQyxrQkFBa0I7SUFDekNGLElBQUlNLEtBQUssQ0FBQywyQkFBMkI7UUFDakNZO1FBQ0FDO1FBQ0FDO0lBQ0o7SUFDQSxJQUFJLENBQUNiLFVBQVU7UUFDWCxNQUFNLElBQUlqQiw2REFBY0EsQ0FBQztZQUNyQitCLFNBQVM7WUFDVEMsTUFBTTtRQUNWO0lBQ0o7SUFDQSxNQUFNbkIsTUFBTSxNQUFNb0IsV0FBV2hCO0lBQzdCUCxJQUFJTSxLQUFLLENBQUMscUJBQXFCO1FBQzNCSDtJQUNKO0lBQ0EsTUFBTXFCLFNBQVNuQixPQUFPb0IsT0FBTyxDQUFDUCxXQUFXO0lBQ3pDLElBQUksQ0FBQ00sUUFBUTtRQUNULE1BQU0sSUFBSWxDLDZEQUFjQSxDQUFDO1lBQ3JCK0IsU0FBUyxDQUFDLE9BQU8sRUFBRUgsV0FBVyxVQUFVLENBQUM7WUFDekNJLE1BQU07UUFDVjtJQUNKO0lBQ0EsSUFBSUUsT0FBT0UsSUFBSSxDQUFDQyxZQUFZLEVBQUU7UUFDMUIzQixJQUFJTSxLQUFLLENBQUM7UUFDVixNQUFNc0IsWUFBWSxNQUFNSixPQUFPRSxJQUFJLENBQUNDLFlBQVksR0FBRztZQUMvQ3hCO1lBQ0FnQjtZQUNBQyxVQUFVO2dCQUNOUyxNQUFNVCxTQUFTUyxJQUFJO2dCQUNuQkMsTUFBTVYsU0FBU1UsSUFBSTtnQkFDbkJDLFVBQVVYLFNBQVNXLFFBQVE7Z0JBQzNCQyxXQUFXWixTQUFTWSxTQUFTO2dCQUM3QkMsa0JBQWtCYixTQUFTYSxnQkFBZ0I7Z0JBQzNDQyxXQUFXZCxTQUFTYyxTQUFTO1lBQ2pDO1FBQ0o7UUFDQWxDLElBQUlNLEtBQUssQ0FBQywyQkFBMkI7WUFDakNzQjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxXQUFXO1lBQ1osTUFBTSxJQUFJdEMsNkRBQWNBLENBQUM7Z0JBQ3JCK0IsU0FBUztnQkFDVEMsTUFBTTtZQUNWO1FBQ0o7SUFDSjtJQUNBLElBQUlFLE9BQU9FLElBQUksQ0FBQ0ksSUFBSSxLQUFLLFNBQVM7UUFDOUIsSUFBSSxDQUFDbEMsaUJBQWlCdUMsUUFBUSxDQUFDZixTQUFTVSxJQUFJLEdBQUc7WUFDM0MsTUFBTSxJQUFJeEMsNkRBQWNBLENBQUM7Z0JBQ3JCZ0MsTUFBTTtnQkFDTkQsU0FBUztnQkFDVGUsU0FBUztvQkFDTEMsa0JBQWtCekM7b0JBQ2xCMEMsVUFBVWxCLFNBQVNVLElBQUk7Z0JBQzNCO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsSUFBSU4sT0FBT0UsSUFBSSxDQUFDYSxZQUFZLEVBQUVDLFNBQVM7UUFDbkMsSUFBSXBCLFNBQVNTLElBQUksR0FBR0wsT0FBT0UsSUFBSSxDQUFDYSxZQUFZLENBQUNDLE9BQU8sRUFBRTtZQUNsRCxNQUFNLElBQUlsRCw2REFBY0EsQ0FBQztnQkFDckJnQyxNQUFNO2dCQUNORCxTQUFTLENBQUMsa0NBQWtDLEVBQUVHLE9BQU9FLElBQUksQ0FBQ2EsWUFBWSxDQUFDQyxPQUFPLENBQUMsQ0FBQztnQkFDaEZKLFNBQVM7b0JBQ0xLLGFBQWFqQixPQUFPRSxJQUFJLENBQUNhLFlBQVksQ0FBQ0MsT0FBTztvQkFDN0NFLFVBQVV0QixTQUFTUyxJQUFJO2dCQUMzQjtZQUNKO1FBQ0o7SUFDSjtJQUNBLElBQUlMLE9BQU9FLElBQUksQ0FBQ2EsWUFBWSxFQUFFSSxRQUFRO1FBQ2xDLE1BQU1BLFNBQVNuQixPQUFPRSxJQUFJLENBQUNhLFlBQVksQ0FBQ0ksTUFBTTtRQUM5QyxJQUFJQyxXQUFXO1FBQ2YsS0FBSyxNQUFNQyxvQkFBb0JGLE9BQU87WUFDbEMsSUFBSUUsaUJBQWlCQyxRQUFRLENBQUMsT0FBTztnQkFDakMsTUFBTVIsV0FBV08saUJBQWlCRSxPQUFPLENBQUMsTUFBTTtnQkFDaEQsSUFBSTNCLFNBQVNVLElBQUksQ0FBQ2tCLFVBQVUsQ0FBQ1YsV0FBVztvQkFDcENNLFdBQVc7b0JBQ1g7Z0JBQ0o7WUFDSixPQUFPLElBQUl4QixTQUFTVSxJQUFJLEtBQUtlLGtCQUFrQjtnQkFDM0NELFdBQVc7Z0JBQ1g7WUFDSjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxVQUFVO1lBQ1gsTUFBTSxJQUFJdEQsNkRBQWNBLENBQUM7Z0JBQ3JCZ0MsTUFBTTtnQkFDTkQsU0FBUyxDQUFDLENBQUMsRUFBRUQsU0FBU1UsSUFBSSxDQUFDLHFDQUFxQyxFQUFFbUIsS0FBS0MsU0FBUyxDQUFDUCxRQUFRLENBQUM7Z0JBQzFGUCxTQUFTO29CQUNMQyxrQkFBa0JNO29CQUNsQkwsVUFBVWxCLFNBQVNVLElBQUk7Z0JBQzNCO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsTUFBTW5CLE9BQU93QyxVQUFVO1FBQ25CL0I7UUFDQUk7UUFDQTRCLFdBQVc7WUFDUGpEO1lBQ0FnQjtRQUNKO0lBQ0o7SUFDQSxNQUFNa0MsV0FBVyxNQUFNN0IsT0FBT0UsSUFBSSxDQUFDMkIsUUFBUSxHQUFHO1FBQzFDbEQ7UUFDQWdCO0lBQ0o7SUFDQSxNQUFNbUMsV0FBVzlCLE9BQU9FLElBQUksQ0FBQzZCLGFBQWEsS0FBS0M7SUFDL0N4RCxJQUFJTSxLQUFLLENBQUMsZUFBZTtRQUNyQks7UUFDQTBDO1FBQ0FDO1FBQ0FHLFlBQVlqQyxPQUFPRSxJQUFJLENBQUNJLElBQUk7SUFDaEM7SUFDQSxNQUFNNEIsbUJBQW1CLE1BQU10RCxTQUFTWSxhQUFhLENBQUM7UUFDbERFO1FBQ0F1QyxZQUFZakMsT0FBT0UsSUFBSSxDQUFDSSxJQUFJO1FBQzVCVixVQUFVO1lBQ04sR0FBR0EsUUFBUTtZQUNYVDtZQUNBMkM7WUFDQUQ7UUFDSjtJQUNKO0lBQ0EsTUFBTSxFQUFFTSxVQUFVLEVBQUVDLFNBQVMsRUFBRSxHQUFHQyxVQUFVbEQ7SUFDNUNYLElBQUlNLEtBQUssQ0FBQztJQUNWLE9BQU87UUFDSCxHQUFHb0QsZ0JBQWdCO1FBQ25CN0IsTUFBTVQsU0FBU1MsSUFBSTtRQUNuQmlDLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUNsQ3JELE1BQU1nRDtRQUNOQztRQUNBUDtJQUNKO0FBQ0o7QUFDQSxlQUFlWSxtQkFBbUJsRSxNQUFNO0lBQ3BDLE1BQU0sRUFBRUssUUFBUSxFQUFFRyxRQUFRLEVBQUVVLE1BQU0sRUFBRWlELFNBQVMsRUFBRXZELElBQUksRUFBRSxFQUFFLEdBQUdaO0lBQzFELE1BQU1DLE1BQU1DLFdBQVdDLGtCQUFrQjtJQUN6Q0YsSUFBSU0sS0FBSyxDQUFDLGdDQUFnQztRQUN0QzREO1FBQ0F2RDtJQUNKO0lBQ0EsSUFBSSxDQUFDSixVQUFVO1FBQ1gsTUFBTSxJQUFJakIsNkRBQWNBLENBQUM7WUFDckIrQixTQUFTO1lBQ1RDLE1BQU07UUFDVjtJQUNKO0lBQ0EsTUFBTUMsV0FBV2hCLFdBQVcsc0NBQXNDO0lBQ2xFLE1BQU00RCxNQUFNLE1BQU0vRCxTQUFTNkQsa0JBQWtCLENBQUM7UUFDMUNDO1FBQ0F2RDtJQUNKO0lBQ0FYLElBQUlNLEtBQUssQ0FBQztJQUNWLE9BQU82RDtBQUNYO0FBQ0EsZUFBZUMsd0JBQXdCckUsTUFBTTtJQUN6QyxNQUFNLEVBQUVLLFFBQVEsRUFBRUMsTUFBTSxFQUFFRSxRQUFRLEVBQUVVLE1BQU0sRUFBRUMsVUFBVSxFQUFFbUQsUUFBUSxFQUFFQyxHQUFHLEVBQUVDLEtBQUssRUFBRSxFQUFFLEdBQUd4RTtJQUNuRixNQUFNQyxNQUFNQyxXQUFXQyxrQkFBa0I7SUFDekNGLElBQUlNLEtBQUssQ0FBQyxxQ0FBcUM7UUFDM0NZO1FBQ0FtRDtRQUNBQztJQUNKO0lBQ0EsSUFBSSxDQUFDL0QsVUFBVTtRQUNYLE1BQU0sSUFBSWpCLDZEQUFjQSxDQUFDO1lBQ3JCK0IsU0FBUztZQUNUQyxNQUFNO1FBQ1Y7SUFDSjtJQUNBLE1BQU1DLFdBQVdoQixXQUFXLHNDQUFzQztJQUNsRSxNQUFNaUIsU0FBU25CLE9BQU9vQixPQUFPLENBQUNQLFdBQVc7SUFDekMsSUFBSSxDQUFDTSxRQUFRO1FBQ1QsTUFBTSxJQUFJbEMsNkRBQWNBLENBQUM7WUFDckIrQixTQUFTLENBQUMsT0FBTyxFQUFFSCxXQUFXLFVBQVUsQ0FBQztZQUN6Q0ksTUFBTTtRQUNWO0lBQ0o7SUFDQSxNQUFNNkMsTUFBTSxNQUFNL0QsU0FBU2dFLHVCQUF1QixDQUFDO1FBQy9DQztRQUNBQztRQUNBQztJQUNKO0lBQ0F2RSxJQUFJTSxLQUFLLENBQUM7SUFDVixPQUFPNkQ7QUFDWDtBQUNBLGVBQWVLLGNBQWN6RSxNQUFNO0lBQy9CLE1BQU0sRUFBRUssUUFBUSxFQUFFQyxNQUFNLEVBQUVFLFFBQVEsRUFBRVUsTUFBTSxFQUFFQyxVQUFVLEVBQUV1RCxHQUFHLEVBQUUsRUFBRSxHQUFHMUU7SUFDbEUsTUFBTUMsTUFBTUMsV0FBV0Msa0JBQWtCO0lBQ3pDRixJQUFJTSxLQUFLLENBQUMsMkJBQTJCO1FBQ2pDWTtRQUNBdUQ7SUFDSjtJQUNBLElBQUksQ0FBQ2xFLFVBQVU7UUFDWCxNQUFNLElBQUlqQiw2REFBY0EsQ0FBQztZQUNyQitCLFNBQVM7WUFDVEMsTUFBTTtRQUNWO0lBQ0o7SUFDQSxNQUFNQyxXQUFXaEIsV0FBVyxzQ0FBc0M7SUFDbEUsTUFBTWlCLFNBQVNuQixPQUFPb0IsT0FBTyxDQUFDUCxXQUFXO0lBQ3pDLElBQUksQ0FBQ00sUUFBUTtRQUNULE1BQU0sSUFBSWxDLDZEQUFjQSxDQUFDO1lBQ3JCK0IsU0FBUyxDQUFDLE9BQU8sRUFBRUgsV0FBVyxVQUFVLENBQUM7WUFDekNJLE1BQU07UUFDVjtJQUNKO0lBQ0EsTUFBTTZDLE1BQU0sTUFBTS9ELFNBQVNvRSxhQUFhLENBQUM7UUFDckNoRDtRQUNBaUQsS0FBS0MsV0FBV0Q7SUFDcEI7SUFDQXpFLElBQUlNLEtBQUssQ0FBQztJQUNWLE9BQU82RDtBQUNYO0FBQ0EsZUFBZVEsV0FBVzVFLE1BQU07SUFDNUIsTUFBTSxFQUFFSyxRQUFRLEVBQUVDLE1BQU0sRUFBRUUsUUFBUSxFQUFFVSxNQUFNLEVBQUVDLFVBQVUsRUFBRXVELEdBQUcsRUFBRSxFQUFFLEdBQUcxRTtJQUNsRSxNQUFNQyxNQUFNQyxXQUFXQyxrQkFBa0I7SUFDekNGLElBQUlNLEtBQUssQ0FBQyx3QkFBd0I7UUFDOUJZO1FBQ0F1RDtJQUNKO0lBQ0EsSUFBSSxDQUFDbEUsVUFBVTtRQUNYLE1BQU0sSUFBSWpCLDZEQUFjQSxDQUFDO1lBQ3JCK0IsU0FBUztZQUNUQyxNQUFNO1FBQ1Y7SUFDSjtJQUNBLE1BQU1uQixNQUFNLE1BQU1vQixXQUFXaEI7SUFDN0IsTUFBTWlCLFNBQVNuQixPQUFPb0IsT0FBTyxDQUFDUCxXQUFXO0lBQ3pDLElBQUksQ0FBQ00sUUFBUTtRQUNULE1BQU0sSUFBSWxDLDZEQUFjQSxDQUFDO1lBQ3JCK0IsU0FBUyxDQUFDLE9BQU8sRUFBRUgsV0FBVyxVQUFVLENBQUM7WUFDekNJLE1BQU07UUFDVjtJQUNKO0lBQ0EsSUFBSSxDQUFDRSxPQUFPRSxJQUFJLENBQUNrRCxZQUFZLEVBQUU7UUFDM0IsTUFBTSxJQUFJdEYsNkRBQWNBLENBQUM7WUFDckIrQixTQUFTO1lBQ1RDLE1BQU07UUFDVjtJQUNKO0lBQ0EsTUFBTUYsV0FBVyxNQUFNaEIsU0FBU3lFLE9BQU8sQ0FBQztRQUNwQ0osS0FBS0MsV0FBV0Q7SUFDcEI7SUFDQSxNQUFNSyxZQUFZLE1BQU10RCxPQUFPRSxJQUFJLENBQUNrRCxZQUFZLENBQUM7UUFDN0N6RTtRQUNBaUI7SUFDSjtJQUNBLElBQUksQ0FBQzBELFdBQVc7UUFDWixNQUFNLElBQUl4Riw2REFBY0EsQ0FBQztZQUNyQitCLFNBQVM7WUFDVEMsTUFBTTtRQUNWO0lBQ0o7SUFDQSxNQUFNNkMsTUFBTSxNQUFNL0QsU0FBU3VFLFVBQVUsQ0FBQztRQUNsQ25EO1FBQ0FpRCxLQUFLQyxXQUFXRDtJQUNwQjtJQUNBekUsSUFBSU0sS0FBSyxDQUFDO0lBQ1YsT0FBTzZEO0FBQ1g7QUFDQSxlQUFlM0QsV0FBV0wsR0FBRztJQUN6QixNQUFNNEUsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxxQkFBcUIsSUFBSUYsUUFBUUMsR0FBRyxDQUFDRSxxQkFBcUI7SUFDckYsSUFBSSxDQUFDSixRQUFRO1FBQ1QsTUFBTSxJQUFJekYsNkRBQWNBLENBQUM7WUFDckIrQixTQUFTO1lBQ1RDLE1BQU07UUFDVjtJQUNKO0lBQ0EsTUFBTThELG1CQUFtQixNQUFNQyx3QkFBd0JOO0lBQ3ZELE9BQU8sTUFBTSxJQUFJdEYsNENBQVVBLENBQUNVLEtBQUttRixrQkFBa0IsQ0FBQztRQUNoREMsS0FBSztRQUNMQyxLQUFLO0lBQ1QsR0FBR0MsV0FBVyxHQUFHQyxpQkFBaUIsQ0FBQzNCLEtBQUs0QixHQUFHLEtBQUssT0FBTzlGLGlCQUFpQitGLE1BQU0sQ0FBQ2pHLGdEQUFFQSxJQUFJa0csT0FBTyxDQUFDVDtBQUNqRztBQUNBLGVBQWVVLFdBQVdyRixLQUFLO0lBQzNCLE1BQU1zRSxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLHFCQUFxQixJQUFJRixRQUFRQyxHQUFHLENBQUNFLHFCQUFxQjtJQUNyRixJQUFJLENBQUNKLFFBQVE7UUFDVCxNQUFNLElBQUl6Riw2REFBY0EsQ0FBQztZQUNyQitCLFNBQVM7WUFDVEMsTUFBTTtRQUNWO0lBQ0o7SUFDQSxNQUFNOEQsbUJBQW1CLE1BQU1DLHdCQUF3Qk47SUFDdkQsTUFBTSxFQUFFZ0IsT0FBTyxFQUFFLEdBQUcsTUFBTXJHLGdEQUFVQSxDQUFDZSxPQUFPMkUsa0JBQWtCO1FBQzFEWSxnQkFBZ0I7SUFDcEI7SUFDQSxPQUFPRDtBQUNYO0FBQ0EsZUFBZVYsd0JBQXdCTixNQUFNO0lBQ3pDLE9BQU8sTUFBTXhGLGlEQUFJQSxDQUFDLFVBQVV3RixRQUFRLElBQUksdUNBQXVDO0FBQ25GO0FBQ0EsU0FBUzVCLFVBQVVwRCxNQUFNO0lBQ3JCLE1BQU0sRUFBRXlCLE1BQU0sRUFBRSxHQUFHekI7SUFDbkIsTUFBTWtHLGFBQWF6RSxPQUFPRSxJQUFJLENBQUNmLElBQUk7SUFDbkMsTUFBTUEsT0FBT3NGLFdBQVdDLEdBQUcsQ0FBQyxDQUFDQztRQUN6QixNQUFNQyxlQUFlQyxPQUFPQyxPQUFPLENBQUNIO1FBQ3BDLElBQUlDLFlBQVksQ0FBQyxFQUFFLEtBQUs1QyxXQUFXO1lBQy9CLE1BQU0sSUFBSWxFLDZEQUFjQSxDQUFDO2dCQUNyQitCLFNBQVMsQ0FBQywyQkFBMkIsRUFBRTRCLEtBQUtDLFNBQVMsQ0FBQytDLFlBQVksQ0FBQztnQkFDbkUzRSxNQUFNO1lBQ1Y7UUFDSjtRQUNBLE1BQU0sQ0FBQ2dELEtBQUtpQyxNQUFNLEdBQUdILFlBQVksQ0FBQyxFQUFFO1FBQ3BDLHNEQUFzRDtRQUN0RCxNQUFNSSxlQUFlRCxRQUFRRSxLQUFLLENBQUMsS0FBS0MsTUFBTSxDQUFDLENBQUNDLE1BQU1yQztZQUNsRCxJQUFJcUMsSUFBSSxDQUFDckMsSUFBSSxLQUFLZCxXQUFXO2dCQUN6QixNQUFNLElBQUlsRSw2REFBY0EsQ0FBQztvQkFDckIrQixTQUFTLENBQUMsWUFBWSxFQUFFaUQsSUFBSSxJQUFJLEVBQUVyQixLQUFLQyxTQUFTLENBQUN5RCxNQUFNLENBQUM7b0JBQ3hEckYsTUFBTTtnQkFDVjtZQUNKO1lBQ0EsT0FBT3FGLElBQUksQ0FBQ3JDLElBQUk7UUFDcEIsR0FBR3ZFLE9BQU9xRCxTQUFTO1FBQ25CLE9BQU87WUFDSGtCO1lBQ0FpQyxPQUFPQztRQUNYO0lBQ0o7SUFDQSxPQUFPN0Y7QUFDWDtBQUNBLFNBQVNrRCxVQUFVbEQsSUFBSTtJQUNuQixNQUFNZ0QsYUFBYWhELEtBQUsrRixNQUFNLENBQUMsQ0FBQ0UsS0FBS0M7UUFDakNELEdBQUcsQ0FBQ0MsS0FBS3ZDLEdBQUcsQ0FBQyxHQUFHdUMsS0FBS04sS0FBSztRQUMxQixPQUFPSztJQUNYLEdBQUcsQ0FBQztJQUNKLE1BQU1oRCxZQUFZakQsS0FBS3VGLEdBQUcsQ0FBQyxDQUFDWSxJQUFJQSxFQUFFeEMsR0FBRztJQUNyQyxPQUFPO1FBQ0hYO1FBQ0FDO0lBQ0o7QUFDSjtBQUNBLGVBQWVyQyxXQUFXZCxLQUFLO0lBQzNCLE9BQU8sTUFBTXFGLFdBQVdyRjtBQUM1QjtBQUNBOzs7Ozs7Q0FNQyxHQUFHLFNBQVNpRSxXQUFXRCxHQUFHO0lBQ3ZCLElBQUlPLEtBQXlCLElBQWlCUCxJQUFJekIsVUFBVSxDQUFDLFlBQVk7UUFDckUsMENBQTBDO1FBQzFDLE1BQU0rRCxXQUFXLElBQUlDLElBQUl2QyxLQUFLd0MsWUFBWSxDQUFDQyxHQUFHLENBQUM7UUFDL0MsSUFBSUgsVUFBVTtZQUNWLE9BQU9BO1FBQ1g7SUFDSjtJQUNBLE9BQU90QztBQUNYO0FBRXFLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9kaXN0L3NoYXJlZC0wMzkyNzZhZi5tanM/MGYyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGdlU3RvcmVFcnJvciB9IGZyb20gJ0BlZGdlc3RvcmUvc2hhcmVkJztcbmltcG9ydCB7IGhrZGYgfSBmcm9tICdAcGFudmEvaGtkZic7XG5pbXBvcnQgeyBzZXJpYWxpemUgfSBmcm9tICdjb29raWUnO1xuaW1wb3J0IHsgRW5jcnlwdEpXVCwgand0RGVjcnlwdCB9IGZyb20gJ2pvc2UnO1xuaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcblxuY29uc3QgSU1BR0VfTUlNRV9UWVBFUyA9IFtcbiAgICAnaW1hZ2UvanBlZycsXG4gICAgJ2ltYWdlL3BuZycsXG4gICAgJ2ltYWdlL2dpZicsXG4gICAgJ2ltYWdlL3dlYnAnLFxuICAgICdpbWFnZS9zdmcreG1sJyxcbiAgICAnaW1hZ2UvdGlmZicsXG4gICAgJ2ltYWdlL2JtcCcsXG4gICAgJ2ltYWdlL3gtaWNvbidcbl07XG5cbi8vIFRPRE86IGNoYW5nZSBpdCB0byAxIGhvdXIgd2hlbiB3ZSBoYXZlIGEgd2F5IHRvIHJlZnJlc2ggdGhlIHRva2VuXG5jb25zdCBERUZBVUxUX01BWF9BR0UgPSAzMCAqIDI0ICogNjAgKiA2MDsgLy8gMzAgZGF5c1xuYXN5bmMgZnVuY3Rpb24gaW5pdChwYXJhbXMpIHtcbiAgICBjb25zdCBsb2cgPSBnbG9iYWxUaGlzLl9FREdFX1NUT1JFX0xPR0dFUjtcbiAgICBjb25zdCB7IGN0eCwgcHJvdmlkZXIsIHJvdXRlciB9ID0gcGFyYW1zO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbaW5pdF0nLCB7XG4gICAgICAgIGN0eFxuICAgIH0pO1xuICAgIGNvbnN0IGN0eFRva2VuID0gYXdhaXQgZW5jcnlwdEpXVChjdHgpO1xuICAgIGNvbnN0IHsgdG9rZW4gfSA9IGF3YWl0IHByb3ZpZGVyLmluaXQoe1xuICAgICAgICBjdHgsXG4gICAgICAgIHJvdXRlcjogcm91dGVyXG4gICAgfSk7XG4gICAgY29uc3QgbmV3Q29va2llcyA9IFtcbiAgICAgICAgc2VyaWFsaXplKCdlZGdlc3RvcmUtY3R4JywgY3R4VG9rZW4sIHtcbiAgICAgICAgICAgIHBhdGg6ICcvJyxcbiAgICAgICAgICAgIG1heEFnZTogREVGQVVMVF9NQVhfQUdFXG4gICAgICAgIH0pXG4gICAgXTtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgbmV3Q29va2llcy5wdXNoKHNlcmlhbGl6ZSgnZWRnZXN0b3JlLXRva2VuJywgdG9rZW4sIHtcbiAgICAgICAgICAgIHBhdGg6ICcvJyxcbiAgICAgICAgICAgIG1heEFnZTogREVGQVVMVF9NQVhfQUdFXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29uc3QgYmFzZVVybCA9IGF3YWl0IHByb3ZpZGVyLmdldEJhc2VVcmwoKTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtpbml0XScsIHtcbiAgICAgICAgY3R4LFxuICAgICAgICBuZXdDb29raWVzLFxuICAgICAgICB0b2tlbixcbiAgICAgICAgYmFzZVVybFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0Nvb2tpZXMsXG4gICAgICAgIHRva2VuLFxuICAgICAgICBiYXNlVXJsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RVcGxvYWQocGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgcm91dGVyLCBjdHhUb2tlbiwgYm9keTogeyBidWNrZXROYW1lLCBpbnB1dCwgZmlsZUluZm8gfSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGxvZyA9IGdsb2JhbFRoaXMuX0VER0VfU1RPUkVfTE9HR0VSO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbcmVxdWVzdFVwbG9hZF0nLCB7XG4gICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgIGlucHV0LFxuICAgICAgICBmaWxlSW5mb1xuICAgIH0pO1xuICAgIGlmICghY3R4VG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGVkZ2VzdG9yZS1jdHggY29va2llJyxcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSBhd2FpdCBnZXRDb250ZXh0KGN0eFRva2VuKTtcbiAgICBsb2cuZGVidWcoJ0RlY3J5cHRlZCBDb250ZXh0Jywge1xuICAgICAgICBjdHhcbiAgICB9KTtcbiAgICBjb25zdCBidWNrZXQgPSByb3V0ZXIuYnVja2V0c1tidWNrZXROYW1lXTtcbiAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogYEJ1Y2tldCAke2J1Y2tldE5hbWV9IG5vdCBmb3VuZGAsXG4gICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYnVja2V0Ll9kZWYuYmVmb3JlVXBsb2FkKSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbYmVmb3JlVXBsb2FkXScpO1xuICAgICAgICBjb25zdCBjYW5VcGxvYWQgPSBhd2FpdCBidWNrZXQuX2RlZi5iZWZvcmVVcGxvYWQ/Lih7XG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGZpbGVJbmZvOiB7XG4gICAgICAgICAgICAgICAgc2l6ZTogZmlsZUluZm8uc2l6ZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWxlSW5mby50eXBlLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlSW5mby5maWxlTmFtZSxcbiAgICAgICAgICAgICAgICBleHRlbnNpb246IGZpbGVJbmZvLmV4dGVuc2lvbixcbiAgICAgICAgICAgICAgICByZXBsYWNlVGFyZ2V0VXJsOiBmaWxlSW5mby5yZXBsYWNlVGFyZ2V0VXJsLFxuICAgICAgICAgICAgICAgIHRlbXBvcmFyeTogZmlsZUluZm8udGVtcG9yYXJ5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtiZWZvcmVVcGxvYWRdJywge1xuICAgICAgICAgICAgY2FuVXBsb2FkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWNhblVwbG9hZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVXBsb2FkIG5vdCBhbGxvd2VkIGZvciB0aGUgY3VycmVudCBjb250ZXh0JyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnVVBMT0FEX05PVF9BTExPV0VEJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJ1Y2tldC5fZGVmLnR5cGUgPT09ICdJTUFHRScpIHtcbiAgICAgICAgaWYgKCFJTUFHRV9NSU1FX1RZUEVTLmluY2x1ZGVzKGZpbGVJbmZvLnR5cGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6ICdNSU1FX1RZUEVfTk9UX0FMTE9XRUQnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdPbmx5IGltYWdlcyBhcmUgYWxsb3dlZCBpbiB0aGlzIGJ1Y2tldCcsXG4gICAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkTWltZVR5cGVzOiBJTUFHRV9NSU1FX1RZUEVTLFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogZmlsZUluZm8udHlwZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChidWNrZXQuX2RlZi5idWNrZXRDb25maWc/Lm1heFNpemUpIHtcbiAgICAgICAgaWYgKGZpbGVJbmZvLnNpemUgPiBidWNrZXQuX2RlZi5idWNrZXRDb25maWcubWF4U2l6ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnRklMRV9UT09fTEFSR0UnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGaWxlIHNpemUgaXMgdG9vIGJpZy4gTWF4IHNpemUgaXMgJHtidWNrZXQuX2RlZi5idWNrZXRDb25maWcubWF4U2l6ZX1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWF4RmlsZVNpemU6IGJ1Y2tldC5fZGVmLmJ1Y2tldENvbmZpZy5tYXhTaXplLFxuICAgICAgICAgICAgICAgICAgICBmaWxlU2l6ZTogZmlsZUluZm8uc2l6ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChidWNrZXQuX2RlZi5idWNrZXRDb25maWc/LmFjY2VwdCkge1xuICAgICAgICBjb25zdCBhY2NlcHQgPSBidWNrZXQuX2RlZi5idWNrZXRDb25maWcuYWNjZXB0O1xuICAgICAgICBsZXQgYWNjZXB0ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBhY2NlcHRlZE1pbWVUeXBlIG9mIGFjY2VwdCl7XG4gICAgICAgICAgICBpZiAoYWNjZXB0ZWRNaW1lVHlwZS5lbmRzV2l0aCgnLyonKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gYWNjZXB0ZWRNaW1lVHlwZS5yZXBsYWNlKCcvKicsICcnKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUluZm8udHlwZS5zdGFydHNXaXRoKG1pbWVUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBhY2NlcHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZUluZm8udHlwZSA9PT0gYWNjZXB0ZWRNaW1lVHlwZSkge1xuICAgICAgICAgICAgICAgIGFjY2VwdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjY2VwdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6ICdNSU1FX1RZUEVfTk9UX0FMTE9XRUQnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBcIiR7ZmlsZUluZm8udHlwZX1cIiBpcyBub3QgYWxsb3dlZC4gQWNjZXB0ZWQgdHlwZXMgYXJlICR7SlNPTi5zdHJpbmdpZnkoYWNjZXB0KX1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZE1pbWVUeXBlczogYWNjZXB0LFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogZmlsZUluZm8udHlwZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSBidWlsZFBhdGgoe1xuICAgICAgICBmaWxlSW5mbyxcbiAgICAgICAgYnVja2V0LFxuICAgICAgICBwYXRoQXR0cnM6IHtcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIGlucHV0XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IGJ1Y2tldC5fZGVmLm1ldGFkYXRhPy4oe1xuICAgICAgICBjdHgsXG4gICAgICAgIGlucHV0XG4gICAgfSk7XG4gICAgY29uc3QgaXNQdWJsaWMgPSBidWNrZXQuX2RlZi5hY2Nlc3NDb250cm9sID09PSB1bmRlZmluZWQ7XG4gICAgbG9nLmRlYnVnKCd1cGxvYWQgaW5mbycsIHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgIGlzUHVibGljLFxuICAgICAgICBidWNrZXRUeXBlOiBidWNrZXQuX2RlZi50eXBlXG4gICAgfSk7XG4gICAgY29uc3QgcmVxdWVzdFVwbG9hZFJlcyA9IGF3YWl0IHByb3ZpZGVyLnJlcXVlc3RVcGxvYWQoe1xuICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICBidWNrZXRUeXBlOiBidWNrZXQuX2RlZi50eXBlLFxuICAgICAgICBmaWxlSW5mbzoge1xuICAgICAgICAgICAgLi4uZmlsZUluZm8sXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgaXNQdWJsaWMsXG4gICAgICAgICAgICBtZXRhZGF0YVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgeyBwYXJzZWRQYXRoLCBwYXRoT3JkZXIgfSA9IHBhcnNlUGF0aChwYXRoKTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtyZXF1ZXN0VXBsb2FkXScpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlcXVlc3RVcGxvYWRSZXMsXG4gICAgICAgIHNpemU6IGZpbGVJbmZvLnNpemUsXG4gICAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgcGF0aDogcGFyc2VkUGF0aCxcbiAgICAgICAgcGF0aE9yZGVyLFxuICAgICAgICBtZXRhZGF0YVxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0VXBsb2FkUGFydHMocGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgY3R4VG9rZW4sIGJvZHk6IHsgbXVsdGlwYXJ0LCBwYXRoIH0gfSA9IHBhcmFtcztcbiAgICBjb25zdCBsb2cgPSBnbG9iYWxUaGlzLl9FREdFX1NUT1JFX0xPR0dFUjtcbiAgICBsb2cuZGVidWcoJ1J1bm5pbmcgW3JlcXVlc3RVcGxvYWRQYXJ0c10nLCB7XG4gICAgICAgIG11bHRpcGFydCxcbiAgICAgICAgcGF0aFxuICAgIH0pO1xuICAgIGlmICghY3R4VG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGVkZ2VzdG9yZS1jdHggY29va2llJyxcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhd2FpdCBnZXRDb250ZXh0KGN0eFRva2VuKTsgLy8ganVzdCB0byBjaGVjayBpZiB0aGUgdG9rZW4gaXMgdmFsaWRcbiAgICBjb25zdCByZXMgPSBhd2FpdCBwcm92aWRlci5yZXF1ZXN0VXBsb2FkUGFydHMoe1xuICAgICAgICBtdWx0aXBhcnQsXG4gICAgICAgIHBhdGhcbiAgICB9KTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtyZXF1ZXN0VXBsb2FkUGFydHNdJyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIHJvdXRlciwgY3R4VG9rZW4sIGJvZHk6IHsgYnVja2V0TmFtZSwgdXBsb2FkSWQsIGtleSwgcGFydHMgfSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGxvZyA9IGdsb2JhbFRoaXMuX0VER0VfU1RPUkVfTE9HR0VSO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbY29tcGxldGVNdWx0aXBhcnRVcGxvYWRdJywge1xuICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAga2V5XG4gICAgfSk7XG4gICAgaWYgKCFjdHhUb2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgZWRnZXN0b3JlLWN0eCBjb29raWUnLFxuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGF3YWl0IGdldENvbnRleHQoY3R4VG9rZW4pOyAvLyBqdXN0IHRvIGNoZWNrIGlmIHRoZSB0b2tlbiBpcyB2YWxpZFxuICAgIGNvbnN0IGJ1Y2tldCA9IHJvdXRlci5idWNrZXRzW2J1Y2tldE5hbWVdO1xuICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQnVja2V0ICR7YnVja2V0TmFtZX0gbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHByb3ZpZGVyLmNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKHtcbiAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgIGtleSxcbiAgICAgICAgcGFydHNcbiAgICB9KTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtjb21wbGV0ZU11bHRpcGFydFVwbG9hZF0nKTtcbiAgICByZXR1cm4gcmVzO1xufVxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVVwbG9hZChwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCByb3V0ZXIsIGN0eFRva2VuLCBib2R5OiB7IGJ1Y2tldE5hbWUsIHVybCB9IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgbG9nID0gZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVI7XG4gICAgbG9nLmRlYnVnKCdSdW5uaW5nIFtjb25maXJtVXBsb2FkXScsIHtcbiAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgdXJsXG4gICAgfSk7XG4gICAgaWYgKCFjdHhUb2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgZWRnZXN0b3JlLWN0eCBjb29raWUnLFxuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGF3YWl0IGdldENvbnRleHQoY3R4VG9rZW4pOyAvLyBqdXN0IHRvIGNoZWNrIGlmIHRoZSB0b2tlbiBpcyB2YWxpZFxuICAgIGNvbnN0IGJ1Y2tldCA9IHJvdXRlci5idWNrZXRzW2J1Y2tldE5hbWVdO1xuICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQnVja2V0ICR7YnVja2V0TmFtZX0gbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHByb3ZpZGVyLmNvbmZpcm1VcGxvYWQoe1xuICAgICAgICBidWNrZXQsXG4gICAgICAgIHVybDogdW5wcm94eVVybCh1cmwpXG4gICAgfSk7XG4gICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbY29uZmlybVVwbG9hZF0nKTtcbiAgICByZXR1cm4gcmVzO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlRmlsZShwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCByb3V0ZXIsIGN0eFRva2VuLCBib2R5OiB7IGJ1Y2tldE5hbWUsIHVybCB9IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgbG9nID0gZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVI7XG4gICAgbG9nLmRlYnVnKCdSdW5uaW5nIFtkZWxldGVGaWxlXScsIHtcbiAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgdXJsXG4gICAgfSk7XG4gICAgaWYgKCFjdHhUb2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgZWRnZXN0b3JlLWN0eCBjb29raWUnLFxuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGN0eCA9IGF3YWl0IGdldENvbnRleHQoY3R4VG9rZW4pO1xuICAgIGNvbnN0IGJ1Y2tldCA9IHJvdXRlci5idWNrZXRzW2J1Y2tldE5hbWVdO1xuICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQnVja2V0ICR7YnVja2V0TmFtZX0gbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghYnVja2V0Ll9kZWYuYmVmb3JlRGVsZXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91IG5lZWQgdG8gZGVmaW5lIGJlZm9yZURlbGV0ZSBpZiB5b3Ugd2FudCB0byBkZWxldGUgZmlsZXMgZGlyZWN0bHkgZnJvbSB0aGUgZnJvbnRlbmQuJyxcbiAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBmaWxlSW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldEZpbGUoe1xuICAgICAgICB1cmw6IHVucHJveHlVcmwodXJsKVxuICAgIH0pO1xuICAgIGNvbnN0IGNhbkRlbGV0ZSA9IGF3YWl0IGJ1Y2tldC5fZGVmLmJlZm9yZURlbGV0ZSh7XG4gICAgICAgIGN0eCxcbiAgICAgICAgZmlsZUluZm9cbiAgICB9KTtcbiAgICBpZiAoIWNhbkRlbGV0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0ZSBub3QgYWxsb3dlZCBmb3IgdGhlIGN1cnJlbnQgY29udGV4dCcsXG4gICAgICAgICAgICBjb2RlOiAnREVMRVRFX05PVF9BTExPV0VEJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcHJvdmlkZXIuZGVsZXRlRmlsZSh7XG4gICAgICAgIGJ1Y2tldCxcbiAgICAgICAgdXJsOiB1bnByb3h5VXJsKHVybClcbiAgICB9KTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtkZWxldGVGaWxlXScpO1xuICAgIHJldHVybiByZXM7XG59XG5hc3luYyBmdW5jdGlvbiBlbmNyeXB0SldUKGN0eCkge1xuICAgIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfSldUX1NFQ1JFVCA/PyBwcm9jZXNzLmVudi5FREdFX1NUT1JFX1NFQ1JFVF9LRVk7XG4gICAgaWYgKCFzZWNyZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFREdFX1NUT1JFX0pXVF9TRUNSRVQgb3IgRURHRV9TVE9SRV9TRUNSRVRfS0VZIGlzIG5vdCBkZWZpbmVkJyxcbiAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gYXdhaXQgZ2V0RGVyaXZlZEVuY3J5cHRpb25LZXkoc2VjcmV0KTtcbiAgICByZXR1cm4gYXdhaXQgbmV3IEVuY3J5cHRKV1QoY3R4KS5zZXRQcm90ZWN0ZWRIZWFkZXIoe1xuICAgICAgICBhbGc6ICdkaXInLFxuICAgICAgICBlbmM6ICdBMjU2R0NNJ1xuICAgIH0pLnNldElzc3VlZEF0KCkuc2V0RXhwaXJhdGlvblRpbWUoRGF0ZS5ub3coKSAvIDEwMDAgKyBERUZBVUxUX01BWF9BR0UpLnNldEp0aSh2NCgpKS5lbmNyeXB0KGVuY3J5cHRpb25TZWNyZXQpO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVjcnlwdEpXVCh0b2tlbikge1xuICAgIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfSldUX1NFQ1JFVCA/PyBwcm9jZXNzLmVudi5FREdFX1NUT1JFX1NFQ1JFVF9LRVk7XG4gICAgaWYgKCFzZWNyZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFREdFX1NUT1JFX0pXVF9TRUNSRVQgb3IgRURHRV9TVE9SRV9TRUNSRVRfS0VZIGlzIG5vdCBkZWZpbmVkJyxcbiAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gYXdhaXQgZ2V0RGVyaXZlZEVuY3J5cHRpb25LZXkoc2VjcmV0KTtcbiAgICBjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGp3dERlY3J5cHQodG9rZW4sIGVuY3J5cHRpb25TZWNyZXQsIHtcbiAgICAgICAgY2xvY2tUb2xlcmFuY2U6IDE1XG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG59XG5hc3luYyBmdW5jdGlvbiBnZXREZXJpdmVkRW5jcnlwdGlvbktleShzZWNyZXQpIHtcbiAgICByZXR1cm4gYXdhaXQgaGtkZignc2hhMjU2Jywgc2VjcmV0LCAnJywgJ0VkZ2UgU3RvcmUgR2VuZXJhdGVkIEVuY3J5cHRpb24gS2V5JywgMzIpO1xufVxuZnVuY3Rpb24gYnVpbGRQYXRoKHBhcmFtcykge1xuICAgIGNvbnN0IHsgYnVja2V0IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgcGF0aFBhcmFtcyA9IGJ1Y2tldC5fZGVmLnBhdGg7XG4gICAgY29uc3QgcGF0aCA9IHBhdGhQYXJhbXMubWFwKChwYXJhbSk9PntcbiAgICAgICAgY29uc3QgcGFyYW1FbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocGFyYW0pO1xuICAgICAgICBpZiAocGFyYW1FbnRyaWVzWzBdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEVtcHR5IHBhdGggcGFyYW0gZm91bmQgaW46ICR7SlNPTi5zdHJpbmdpZnkocGF0aFBhcmFtcyl9YCxcbiAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gcGFyYW1FbnRyaWVzWzBdO1xuICAgICAgICAvLyB0aGlzIGlzIGEgc3RyaW5nIGxpa2U6IFwiY3R4Lnh4eFwiIG9yIFwiaW5wdXQueXl5Lnp6elwiXG4gICAgICAgIGNvbnN0IGN1cnJQYXJhbVZhbCA9IHZhbHVlKCkuc3BsaXQoJy4nKS5yZWR1Y2UoKGFjYzIsIGtleSk9PntcbiAgICAgICAgICAgIGlmIChhY2MyW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBNaXNzaW5nIGtleSAke2tleX0gaW4gJHtKU09OLnN0cmluZ2lmeShhY2MyKX1gLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjMltrZXldO1xuICAgICAgICB9LCBwYXJhbXMucGF0aEF0dHJzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlOiBjdXJyUGFyYW1WYWxcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGF0aDtcbn1cbmZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gICAgY29uc3QgcGFyc2VkUGF0aCA9IHBhdGgucmVkdWNlKChhY2MsIGN1cnIpPT57XG4gICAgICAgIGFjY1tjdXJyLmtleV0gPSBjdXJyLnZhbHVlO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbiAgICBjb25zdCBwYXRoT3JkZXIgPSBwYXRoLm1hcCgocCk9PnAua2V5KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwYXJzZWRQYXRoLFxuICAgICAgICBwYXRoT3JkZXJcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGV4dCh0b2tlbikge1xuICAgIHJldHVybiBhd2FpdCBkZWNyeXB0SldUKHRva2VuKTtcbn1cbi8qKlxuICogT24gbG9jYWwgZGV2ZWxvcG1lbnQsIHByb3RlY3RlZCBmaWxlcyBhcmUgcHJveGllZCB0byB0aGUgc2VydmVyLFxuICogd2hpY2ggY2hhbmdlcyB0aGUgb3JpZ2luYWwgVVJMLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBnZXQgdGhlIG9yaWdpbmFsIFVSTCxcbiAqIHNvIHRoYXQgd2UgY2FuIGRlbGV0ZSBvciBjb25maXJtIHRoZSB1cGxvYWQuXG4gKi8gZnVuY3Rpb24gdW5wcm94eVVybCh1cmwpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgdXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSkge1xuICAgICAgICAvLyBnZXQgdGhlIHVybCBwYXJhbSBmcm9tIHRoZSBxdWVyeSBzdHJpbmdcbiAgICAgICAgY29uc3QgdXJsUGFyYW0gPSBuZXcgVVJMKHVybCkuc2VhcmNoUGFyYW1zLmdldCgndXJsJyk7XG4gICAgICAgIGlmICh1cmxQYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHVybFBhcmFtO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG59XG5cbmV4cG9ydCB7IHJlcXVlc3RVcGxvYWRQYXJ0cyBhcyBhLCBidWlsZFBhdGggYXMgYiwgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQgYXMgYywgY29uZmlybVVwbG9hZCBhcyBkLCBkZWxldGVGaWxlIGFzIGUsIGluaXQgYXMgaSwgcGFyc2VQYXRoIGFzIHAsIHJlcXVlc3RVcGxvYWQgYXMgciB9O1xuIl0sIm5hbWVzIjpbIkVkZ2VTdG9yZUVycm9yIiwiaGtkZiIsInNlcmlhbGl6ZSIsIkVuY3J5cHRKV1QiLCJqd3REZWNyeXB0IiwidjQiLCJJTUFHRV9NSU1FX1RZUEVTIiwiREVGQVVMVF9NQVhfQUdFIiwiaW5pdCIsInBhcmFtcyIsImxvZyIsImdsb2JhbFRoaXMiLCJfRURHRV9TVE9SRV9MT0dHRVIiLCJjdHgiLCJwcm92aWRlciIsInJvdXRlciIsImRlYnVnIiwiY3R4VG9rZW4iLCJlbmNyeXB0SldUIiwidG9rZW4iLCJuZXdDb29raWVzIiwicGF0aCIsIm1heEFnZSIsInB1c2giLCJiYXNlVXJsIiwiZ2V0QmFzZVVybCIsInJlcXVlc3RVcGxvYWQiLCJib2R5IiwiYnVja2V0TmFtZSIsImlucHV0IiwiZmlsZUluZm8iLCJtZXNzYWdlIiwiY29kZSIsImdldENvbnRleHQiLCJidWNrZXQiLCJidWNrZXRzIiwiX2RlZiIsImJlZm9yZVVwbG9hZCIsImNhblVwbG9hZCIsInNpemUiLCJ0eXBlIiwiZmlsZU5hbWUiLCJleHRlbnNpb24iLCJyZXBsYWNlVGFyZ2V0VXJsIiwidGVtcG9yYXJ5IiwiaW5jbHVkZXMiLCJkZXRhaWxzIiwiYWxsb3dlZE1pbWVUeXBlcyIsIm1pbWVUeXBlIiwiYnVja2V0Q29uZmlnIiwibWF4U2l6ZSIsIm1heEZpbGVTaXplIiwiZmlsZVNpemUiLCJhY2NlcHQiLCJhY2NlcHRlZCIsImFjY2VwdGVkTWltZVR5cGUiLCJlbmRzV2l0aCIsInJlcGxhY2UiLCJzdGFydHNXaXRoIiwiSlNPTiIsInN0cmluZ2lmeSIsImJ1aWxkUGF0aCIsInBhdGhBdHRycyIsIm1ldGFkYXRhIiwiaXNQdWJsaWMiLCJhY2Nlc3NDb250cm9sIiwidW5kZWZpbmVkIiwiYnVja2V0VHlwZSIsInJlcXVlc3RVcGxvYWRSZXMiLCJwYXJzZWRQYXRoIiwicGF0aE9yZGVyIiwicGFyc2VQYXRoIiwidXBsb2FkZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlcXVlc3RVcGxvYWRQYXJ0cyIsIm11bHRpcGFydCIsInJlcyIsImNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkIiwidXBsb2FkSWQiLCJrZXkiLCJwYXJ0cyIsImNvbmZpcm1VcGxvYWQiLCJ1cmwiLCJ1bnByb3h5VXJsIiwiZGVsZXRlRmlsZSIsImJlZm9yZURlbGV0ZSIsImdldEZpbGUiLCJjYW5EZWxldGUiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiRURHRV9TVE9SRV9KV1RfU0VDUkVUIiwiRURHRV9TVE9SRV9TRUNSRVRfS0VZIiwiZW5jcnlwdGlvblNlY3JldCIsImdldERlcml2ZWRFbmNyeXB0aW9uS2V5Iiwic2V0UHJvdGVjdGVkSGVhZGVyIiwiYWxnIiwiZW5jIiwic2V0SXNzdWVkQXQiLCJzZXRFeHBpcmF0aW9uVGltZSIsIm5vdyIsInNldEp0aSIsImVuY3J5cHQiLCJkZWNyeXB0SldUIiwicGF5bG9hZCIsImNsb2NrVG9sZXJhbmNlIiwicGF0aFBhcmFtcyIsIm1hcCIsInBhcmFtIiwicGFyYW1FbnRyaWVzIiwiT2JqZWN0IiwiZW50cmllcyIsInZhbHVlIiwiY3VyclBhcmFtVmFsIiwic3BsaXQiLCJyZWR1Y2UiLCJhY2MyIiwiYWNjIiwiY3VyciIsInAiLCJ1cmxQYXJhbSIsIlVSTCIsInNlYXJjaFBhcmFtcyIsImdldCIsImEiLCJiIiwiYyIsImQiLCJlIiwiaSIsInIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/shared-039276af.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/shared/dist/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@edgestore/shared/dist/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EDGE_STORE_ERROR_CODES: () => (/* binding */ EDGE_STORE_ERROR_CODES),\n/* harmony export */   EdgeStoreApiClientError: () => (/* binding */ EdgeStoreApiClientError),\n/* harmony export */   EdgeStoreError: () => (/* binding */ EdgeStoreError),\n/* harmony export */   initEdgeStore: () => (/* binding */ initEdgeStore)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\nfunction _define_property$1(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n/* eslint-disable @typescript-eslint/no-non-null-assertion */ const EDGE_STORE_ERROR_CODES = {\n    BAD_REQUEST: 400,\n    FILE_TOO_LARGE: 400,\n    MIME_TYPE_NOT_ALLOWED: 400,\n    UNAUTHORIZED: 401,\n    UPLOAD_NOT_ALLOWED: 403,\n    DELETE_NOT_ALLOWED: 403,\n    CREATE_CONTEXT_ERROR: 500,\n    SERVER_ERROR: 500\n};\nclass EdgeStoreError extends Error {\n    formattedMessage() {\n        return `${this.message}${this.details ? `\\n    Details: ${JSON.stringify(this.details)}` : \"\"}${this.cause ? `\\n    Caused by: ${this.cause.message}` : \"\"}`;\n    }\n    formattedJson() {\n        return {\n            message: this.code === \"SERVER_ERROR\" ? \"Internal server error\" : this.message,\n            code: this.code,\n            details: this.details\n        };\n    }\n    constructor(opts){\n        super(opts.message);\n        _define_property$1(this, \"cause\", void 0);\n        _define_property$1(this, \"code\", void 0);\n        _define_property$1(this, \"level\", void 0);\n        _define_property$1(this, \"details\", void 0);\n        this.name = \"EdgeStoreError\";\n        this.code = opts.code;\n        this.cause = opts.cause;\n        this.level = EDGE_STORE_ERROR_CODES[opts.code] >= 500 ? \"error\" : \"warn\";\n        this.details = \"details\" in opts ? opts.details : undefined;\n    }\n}\nfunction _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nclass EdgeStoreApiClientError extends Error {\n    constructor(opts){\n        super(opts.response.message);\n        _define_property(this, \"data\", void 0);\n        this.name = \"EdgeStoreApiClientError\";\n        this.data = opts.response;\n    }\n}\n/**\n * Creates a Proxy that prints the path to the property when called.\n *\n * Example:\n *\n * ```ts\n * const pathParamProxy = createPathParamProxy();\n * console.log(pathParamProxy.ctx.user.id());\n * // Logs: \"ctx.user.id\"\n * console.log(pathParamProxy.input.type());\n * // Logs: \"input.type\"\n * ```\n */ function createPathParamProxy() {\n    const getPath = (target, _prop)=>{\n        const proxyFunction = ()=>target;\n        return new Proxy(proxyFunction, {\n            get: (_target, propChild)=>{\n                return getPath(`${target}.${String(propChild)}`);\n            }\n        });\n    };\n    return new Proxy(()=>\"\", {\n        get: (_target, prop)=>{\n            return getPath(String(prop));\n        }\n    });\n}\nconst createNewBuilder = (initDef, newDef)=>{\n    const mergedDef = {\n        ...initDef,\n        ...newDef\n    };\n    return createBuilder({\n        type: mergedDef.type\n    }, mergedDef);\n};\nfunction createBuilder(opts, initDef) {\n    const _def = {\n        type: opts.type,\n        input: zod__WEBPACK_IMPORTED_MODULE_0__.z.never(),\n        path: [],\n        metadata: ()=>({}),\n        ...initDef\n    };\n    return {\n        $config: {\n            ctx: undefined\n        },\n        // @ts-expect-error - I think it would be too much work to make this type correct.\n        _def,\n        input (input) {\n            return createNewBuilder(_def, {\n                input\n            });\n        },\n        path (pathResolver) {\n            // TODO: Should throw a runtime error in the following cases:\n            // 1. in case of multiple keys in one object\n            // 2. in case of duplicate keys\n            const pathParamProxy = createPathParamProxy();\n            const params = pathResolver(pathParamProxy);\n            return createNewBuilder(_def, {\n                path: params\n            });\n        },\n        metadata (metadata) {\n            return createNewBuilder(_def, {\n                metadata\n            });\n        },\n        accessControl (accessControl) {\n            return createNewBuilder(_def, {\n                accessControl: accessControl\n            });\n        },\n        beforeUpload (beforeUpload) {\n            return createNewBuilder(_def, {\n                beforeUpload\n            });\n        },\n        beforeDelete (beforeDelete) {\n            return createNewBuilder(_def, {\n                beforeDelete\n            });\n        }\n    };\n}\nclass EdgeStoreBuilder {\n    context() {\n        return new EdgeStoreBuilder();\n    }\n    create() {\n        return createEdgeStoreInner()();\n    }\n}\nfunction createRouterFactory() {\n    return function createRouterInner(buckets) {\n        return {\n            $config: {\n                ctx: undefined\n            },\n            buckets\n        };\n    };\n}\nfunction initBucket(type, config) {\n    return createBuilder({\n        type\n    }, {\n        bucketConfig: config\n    });\n}\nfunction createEdgeStoreInner() {\n    return function initEdgeStoreInner() {\n        return {\n            /**\n       * Builder object for creating an image bucket\n       */ imageBucket (config) {\n                return initBucket(\"IMAGE\", config);\n            },\n            /**\n       * Builder object for creating a file bucket\n       */ fileBucket (config) {\n                return initBucket(\"FILE\", config);\n            },\n            /**\n       * Create a router\n       */ router: createRouterFactory()\n        };\n    };\n}\n/**\n * Initialize EdgeStore - be done exactly once per backend\n */ const initEdgeStore = new EdgeStoreBuilder(); // ↓↓↓ TYPE TESTS ↓↓↓\n// type Context = {\n//   userId: string;\n//   userRole: 'admin' | 'visitor';\n// };\n// const es = initEdgeStore.context<Context>().create();\n// const imagesBucket = es.imageBucket()\n//   .input(\n//     z.object({\n//       type: z.enum(['profile', 'post']),\n//       extension: z.string().optional(),\n//     }),\n//   )\n//   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n//   .metadata(({ ctx, input }) => ({\n//     extension: input.extension,\n//     role: ctx.userRole,\n//   }))\n//   .beforeUpload(() => {\n//     return true;\n//   });\n// const a = es.imageBucket()\n//   .input(z.object({ type: z.string(), someMeta: z.string().optional() }))\n//   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n//   .metadata(({ ctx, input }) => ({\n//     role: ctx.userRole,\n//     someMeta: input.someMeta,\n//   }))\n//   .accessControl({\n//     OR: [\n//       {\n//         userId: { path: 'author' }, // this will check if the userId is the same as the author in the path parameter\n//       },\n//       {\n//         userRole: 'admin', // this is the same as { userRole: { eq: \"admin\" } }\n//       },\n//     ],\n//   })\n//   .beforeUpload(({ ctx, input }) => {\n//     return true;\n//   })\n//   .beforeDelete(({ ctx, file }) => {\n//     return true;\n//   });\n// const b = es.imageBucket().path(({ ctx }) => [{ author: ctx.userId }]);\n// const router = es.router({\n//   original: imagesBucket,\n//   imageBucket: a,\n//   imageBucket2: b,\n// });\n// export { router };\n// type ListFilesResponse<TBucket extends AnyRouter['buckets'][string]> = {\n//   data: {\n//     // url: string;\n//     // size: number;\n//     // uploadedAt: Date;\n//     // metadata: InferMetadataObject<TBucket>;\n//     path: InferBucketPathKeys<TBucket> extends string ? {\n//       [key: string]: string;\n//     } :{\n//       [TKey in InferBucketPathKeys<TBucket>]: string;\n//     };\n//   }[];\n//   pagination: {\n//     currentPage: number;\n//     totalPages: number;\n//     totalCount: number;\n//   };\n// };\n// type TPathKeys = 'author' | 'type';\n// type TPathKeys2 = InferBucketPathKeys<AnyBuilder>;\n// type ObjectWithKeys<TKeys extends string> = {\n//   [TKey in TKeys]: string;\n// };\n// type Test1 = ObjectWithKeys<TPathKeys>;\n// type Test2 = ObjectWithKeys<TPathKeys2>;\n// type PathKeys = InferBucketPathKeys<typeof router.buckets.imageBucket>;\n// type MetadataKeys = InferMetadataObject<typeof router.buckets.imageBucket>;\n// type MyEdgeStoreRouter = typeof router;\n// type MyAccessControl = AccessControlSchema<Context, AnyDef>;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zaGFyZWQvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7QUFFeEIsU0FBU0MsbUJBQW1CQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsS0FBSztJQUN2QyxJQUFJRCxPQUFPRCxLQUFLO1FBQ1pHLE9BQU9DLGNBQWMsQ0FBQ0osS0FBS0MsS0FBSztZQUM1QkMsT0FBT0E7WUFDUEcsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7UUFDZDtJQUNKLE9BQU87UUFDSFAsR0FBRyxDQUFDQyxJQUFJLEdBQUdDO0lBQ2Y7SUFDQSxPQUFPRjtBQUNYO0FBQ0EsMkRBQTJELEdBQUcsTUFBTVEseUJBQXlCO0lBQ3pGQyxhQUFhO0lBQ2JDLGdCQUFnQjtJQUNoQkMsdUJBQXVCO0lBQ3ZCQyxjQUFjO0lBQ2RDLG9CQUFvQjtJQUNwQkMsb0JBQW9CO0lBQ3BCQyxzQkFBc0I7SUFDdEJDLGNBQWM7QUFDbEI7QUFDQSxNQUFNQyx1QkFBdUJDO0lBQ3pCQyxtQkFBbUI7UUFDZixPQUFPLENBQUMsRUFBRSxJQUFJLENBQUNDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQ0MsT0FBTyxHQUFHLENBQUMsZUFBZSxFQUFFQyxLQUFLQyxTQUFTLENBQUMsSUFBSSxDQUFDRixPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxJQUFJLENBQUNHLEtBQUssR0FBRyxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQ0EsS0FBSyxDQUFDSixPQUFPLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUNoSztJQUNBSyxnQkFBZ0I7UUFDWixPQUFPO1lBQ0hMLFNBQVMsSUFBSSxDQUFDTSxJQUFJLEtBQUssaUJBQWlCLDBCQUEwQixJQUFJLENBQUNOLE9BQU87WUFDOUVNLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZMLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1FBQ3pCO0lBQ0o7SUFDQU0sWUFBWUMsSUFBSSxDQUFDO1FB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Q25CLFFBQVE7QUFDUiw2QkFBNkI7QUFDN0IsNEVBQTRFO0FBQzVFLDhFQUE4RTtBQUM5RSxxQ0FBcUM7QUFDckMsMEJBQTBCO0FBQzFCLGdDQUFnQztBQUNoQyxRQUFRO0FBQ1IscUJBQXFCO0FBQ3JCLFlBQVk7QUFDWixVQUFVO0FBQ1YsdUhBQXVIO0FBQ3ZILFdBQVc7QUFDWCxVQUFVO0FBQ1Ysa0ZBQWtGO0FBQ2xGLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLHdDQUF3QztBQUN4QyxtQkFBbUI7QUFDbkIsT0FBTztBQUNQLHVDQUF1QztBQUN2QyxtQkFBbUI7QUFDbkIsUUFBUTtBQUNSLDBFQUEwRTtBQUMxRSw2QkFBNkI7QUFDN0IsNEJBQTRCO0FBQzVCLG9CQUFvQjtBQUNwQixxQkFBcUI7QUFDckIsTUFBTTtBQUNOLHFCQUFxQjtBQUNyQiwyRUFBMkU7QUFDM0UsWUFBWTtBQUNaLHNCQUFzQjtBQUN0Qix1QkFBdUI7QUFDdkIsMkJBQTJCO0FBQzNCLGlEQUFpRDtBQUNqRCw0REFBNEQ7QUFDNUQsK0JBQStCO0FBQy9CLFdBQVc7QUFDWCx3REFBd0Q7QUFDeEQsU0FBUztBQUNULFNBQVM7QUFDVCxrQkFBa0I7QUFDbEIsMkJBQTJCO0FBQzNCLDBCQUEwQjtBQUMxQiwwQkFBMEI7QUFDMUIsT0FBTztBQUNQLEtBQUs7QUFDTCxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JELGdEQUFnRDtBQUNoRCw2QkFBNkI7QUFDN0IsS0FBSztBQUNMLDBDQUEwQztBQUMxQywyQ0FBMkM7QUFDM0MsMEVBQTBFO0FBQzFFLDhFQUE4RTtBQUM5RSwwQ0FBMEM7QUFDMUMsK0RBQStEO0FBRTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2Utam91cm5hbC8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NoYXJlZC9kaXN0L2luZGV4Lm1qcz80NmIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5mdW5jdGlvbiBfZGVmaW5lX3Byb3BlcnR5JDEob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi8gY29uc3QgRURHRV9TVE9SRV9FUlJPUl9DT0RFUyA9IHtcbiAgICBCQURfUkVRVUVTVDogNDAwLFxuICAgIEZJTEVfVE9PX0xBUkdFOiA0MDAsXG4gICAgTUlNRV9UWVBFX05PVF9BTExPV0VEOiA0MDAsXG4gICAgVU5BVVRIT1JJWkVEOiA0MDEsXG4gICAgVVBMT0FEX05PVF9BTExPV0VEOiA0MDMsXG4gICAgREVMRVRFX05PVF9BTExPV0VEOiA0MDMsXG4gICAgQ1JFQVRFX0NPTlRFWFRfRVJST1I6IDUwMCxcbiAgICBTRVJWRVJfRVJST1I6IDUwMFxufTtcbmNsYXNzIEVkZ2VTdG9yZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGZvcm1hdHRlZE1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1lc3NhZ2V9JHt0aGlzLmRldGFpbHMgPyBgXFxuICAgIERldGFpbHM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kZXRhaWxzKX1gIDogJyd9JHt0aGlzLmNhdXNlID8gYFxcbiAgICBDYXVzZWQgYnk6ICR7dGhpcy5jYXVzZS5tZXNzYWdlfWAgOiAnJ31gO1xuICAgIH1cbiAgICBmb3JtYXR0ZWRKc29uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5jb2RlID09PSAnU0VSVkVSX0VSUk9SJyA/ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIDogdGhpcy5tZXNzYWdlLFxuICAgICAgICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgICAgICAgZGV0YWlsczogdGhpcy5kZXRhaWxzXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG9wdHMpe1xuICAgICAgICBzdXBlcihvcHRzLm1lc3NhZ2UpO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5JDEodGhpcywgXCJjYXVzZVwiLCB2b2lkIDApO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5JDEodGhpcywgXCJjb2RlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImxldmVsXCIsIHZvaWQgMCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImRldGFpbHNcIiwgdm9pZCAwKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VkZ2VTdG9yZUVycm9yJztcbiAgICAgICAgdGhpcy5jb2RlID0gb3B0cy5jb2RlO1xuICAgICAgICB0aGlzLmNhdXNlID0gb3B0cy5jYXVzZTtcbiAgICAgICAgdGhpcy5sZXZlbCA9IEVER0VfU1RPUkVfRVJST1JfQ09ERVNbb3B0cy5jb2RlXSA+PSA1MDAgPyAnZXJyb3InIDogJ3dhcm4nO1xuICAgICAgICB0aGlzLmRldGFpbHMgPSAnZGV0YWlscycgaW4gb3B0cyA/IG9wdHMuZGV0YWlscyA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVfcHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbmNsYXNzIEVkZ2VTdG9yZUFwaUNsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpe1xuICAgICAgICBzdXBlcihvcHRzLnJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwiZGF0YVwiLCB2b2lkIDApO1xuICAgICAgICB0aGlzLm5hbWUgPSAnRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3InO1xuICAgICAgICB0aGlzLmRhdGEgPSBvcHRzLnJlc3BvbnNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJveHkgdGhhdCBwcmludHMgdGhlIHBhdGggdG8gdGhlIHByb3BlcnR5IHdoZW4gY2FsbGVkLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHBhdGhQYXJhbVByb3h5ID0gY3JlYXRlUGF0aFBhcmFtUHJveHkoKTtcbiAqIGNvbnNvbGUubG9nKHBhdGhQYXJhbVByb3h5LmN0eC51c2VyLmlkKCkpO1xuICogLy8gTG9nczogXCJjdHgudXNlci5pZFwiXG4gKiBjb25zb2xlLmxvZyhwYXRoUGFyYW1Qcm94eS5pbnB1dC50eXBlKCkpO1xuICogLy8gTG9nczogXCJpbnB1dC50eXBlXCJcbiAqIGBgYFxuICovIGZ1bmN0aW9uIGNyZWF0ZVBhdGhQYXJhbVByb3h5KCkge1xuICAgIGNvbnN0IGdldFBhdGggPSAodGFyZ2V0LCBfcHJvcCk9PntcbiAgICAgICAgY29uc3QgcHJveHlGdW5jdGlvbiA9ICgpPT50YXJnZXQ7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkocHJveHlGdW5jdGlvbiwge1xuICAgICAgICAgICAgZ2V0OiAoX3RhcmdldCwgcHJvcENoaWxkKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRQYXRoKGAke3RhcmdldH0uJHtTdHJpbmcocHJvcENoaWxkKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFByb3h5KCgpPT4nJywge1xuICAgICAgICBnZXQ6IChfdGFyZ2V0LCBwcm9wKT0+e1xuICAgICAgICAgICAgcmV0dXJuIGdldFBhdGgoU3RyaW5nKHByb3ApKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5jb25zdCBjcmVhdGVOZXdCdWlsZGVyID0gKGluaXREZWYsIG5ld0RlZik9PntcbiAgICBjb25zdCBtZXJnZWREZWYgPSB7XG4gICAgICAgIC4uLmluaXREZWYsXG4gICAgICAgIC4uLm5ld0RlZlxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICB0eXBlOiBtZXJnZWREZWYudHlwZVxuICAgIH0sIG1lcmdlZERlZik7XG59O1xuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzLCBpbml0RGVmKSB7XG4gICAgY29uc3QgX2RlZiA9IHtcbiAgICAgICAgdHlwZTogb3B0cy50eXBlLFxuICAgICAgICBpbnB1dDogei5uZXZlcigpLFxuICAgICAgICBwYXRoOiBbXSxcbiAgICAgICAgbWV0YWRhdGE6ICgpPT4oe30pLFxuICAgICAgICAuLi5pbml0RGVmXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICAkY29uZmlnOiB7XG4gICAgICAgICAgICBjdHg6IHVuZGVmaW5lZFxuICAgICAgICB9LFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gSSB0aGluayBpdCB3b3VsZCBiZSB0b28gbXVjaCB3b3JrIHRvIG1ha2UgdGhpcyB0eXBlIGNvcnJlY3QuXG4gICAgICAgIF9kZWYsXG4gICAgICAgIGlucHV0IChpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGlucHV0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcGF0aCAocGF0aFJlc29sdmVyKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBTaG91bGQgdGhyb3cgYSBydW50aW1lIGVycm9yIGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG4gICAgICAgICAgICAvLyAxLiBpbiBjYXNlIG9mIG11bHRpcGxlIGtleXMgaW4gb25lIG9iamVjdFxuICAgICAgICAgICAgLy8gMi4gaW4gY2FzZSBvZiBkdXBsaWNhdGUga2V5c1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtUHJveHkgPSBjcmVhdGVQYXRoUGFyYW1Qcm94eSgpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gcGF0aFJlc29sdmVyKHBhdGhQYXJhbVByb3h5KTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXJhbXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBtZXRhZGF0YSAobWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFjY2Vzc0NvbnRyb2wgKGFjY2Vzc0NvbnRyb2wpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDb250cm9sOiBhY2Nlc3NDb250cm9sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYmVmb3JlVXBsb2FkIChiZWZvcmVVcGxvYWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBiZWZvcmVVcGxvYWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVEZWxldGUgKGJlZm9yZURlbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGJlZm9yZURlbGV0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuY2xhc3MgRWRnZVN0b3JlQnVpbGRlciB7XG4gICAgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFZGdlU3RvcmVCdWlsZGVyKCk7XG4gICAgfVxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVkZ2VTdG9yZUlubmVyKCkoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXJGYWN0b3J5KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVSb3V0ZXJJbm5lcihidWNrZXRzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAkY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY3R4OiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWNrZXRzXG4gICAgICAgIH07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGluaXRCdWNrZXQodHlwZSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICB0eXBlXG4gICAgfSwge1xuICAgICAgICBidWNrZXRDb25maWc6IGNvbmZpZ1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlRWRnZVN0b3JlSW5uZXIoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGluaXRFZGdlU3RvcmVJbm5lcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogQnVpbGRlciBvYmplY3QgZm9yIGNyZWF0aW5nIGFuIGltYWdlIGJ1Y2tldFxuICAgICAgICovIGltYWdlQnVja2V0IChjb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdEJ1Y2tldCgnSU1BR0UnLCBjb25maWcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogQnVpbGRlciBvYmplY3QgZm9yIGNyZWF0aW5nIGEgZmlsZSBidWNrZXRcbiAgICAgICAqLyBmaWxlQnVja2V0IChjb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdEJ1Y2tldCgnRklMRScsIGNvbmZpZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGUgYSByb3V0ZXJcbiAgICAgICAqLyByb3V0ZXI6IGNyZWF0ZVJvdXRlckZhY3RvcnkoKVxuICAgICAgICB9O1xuICAgIH07XG59XG4vKipcbiAqIEluaXRpYWxpemUgRWRnZVN0b3JlIC0gYmUgZG9uZSBleGFjdGx5IG9uY2UgcGVyIGJhY2tlbmRcbiAqLyBjb25zdCBpbml0RWRnZVN0b3JlID0gbmV3IEVkZ2VTdG9yZUJ1aWxkZXIoKTsgLy8g4oaT4oaT4oaTIFRZUEUgVEVTVFMg4oaT4oaT4oaTXG4gLy8gdHlwZSBDb250ZXh0ID0ge1xuIC8vICAgdXNlcklkOiBzdHJpbmc7XG4gLy8gICB1c2VyUm9sZTogJ2FkbWluJyB8ICd2aXNpdG9yJztcbiAvLyB9O1xuIC8vIGNvbnN0IGVzID0gaW5pdEVkZ2VTdG9yZS5jb250ZXh0PENvbnRleHQ+KCkuY3JlYXRlKCk7XG4gLy8gY29uc3QgaW1hZ2VzQnVja2V0ID0gZXMuaW1hZ2VCdWNrZXQoKVxuIC8vICAgLmlucHV0KFxuIC8vICAgICB6Lm9iamVjdCh7XG4gLy8gICAgICAgdHlwZTogei5lbnVtKFsncHJvZmlsZScsICdwb3N0J10pLFxuIC8vICAgICAgIGV4dGVuc2lvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuIC8vICAgICB9KSxcbiAvLyAgIClcbiAvLyAgIC5wYXRoKCh7IGN0eCwgaW5wdXQgfSkgPT4gW3sgYXV0aG9yOiBjdHgudXNlcklkIH0sIHsgdHlwZTogaW5wdXQudHlwZSB9XSlcbiAvLyAgIC5tZXRhZGF0YSgoeyBjdHgsIGlucHV0IH0pID0+ICh7XG4gLy8gICAgIGV4dGVuc2lvbjogaW5wdXQuZXh0ZW5zaW9uLFxuIC8vICAgICByb2xlOiBjdHgudXNlclJvbGUsXG4gLy8gICB9KSlcbiAvLyAgIC5iZWZvcmVVcGxvYWQoKCkgPT4ge1xuIC8vICAgICByZXR1cm4gdHJ1ZTtcbiAvLyAgIH0pO1xuIC8vIGNvbnN0IGEgPSBlcy5pbWFnZUJ1Y2tldCgpXG4gLy8gICAuaW5wdXQoei5vYmplY3QoeyB0eXBlOiB6LnN0cmluZygpLCBzb21lTWV0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pKVxuIC8vICAgLnBhdGgoKHsgY3R4LCBpbnB1dCB9KSA9PiBbeyBhdXRob3I6IGN0eC51c2VySWQgfSwgeyB0eXBlOiBpbnB1dC50eXBlIH1dKVxuIC8vICAgLm1ldGFkYXRhKCh7IGN0eCwgaW5wdXQgfSkgPT4gKHtcbiAvLyAgICAgcm9sZTogY3R4LnVzZXJSb2xlLFxuIC8vICAgICBzb21lTWV0YTogaW5wdXQuc29tZU1ldGEsXG4gLy8gICB9KSlcbiAvLyAgIC5hY2Nlc3NDb250cm9sKHtcbiAvLyAgICAgT1I6IFtcbiAvLyAgICAgICB7XG4gLy8gICAgICAgICB1c2VySWQ6IHsgcGF0aDogJ2F1dGhvcicgfSwgLy8gdGhpcyB3aWxsIGNoZWNrIGlmIHRoZSB1c2VySWQgaXMgdGhlIHNhbWUgYXMgdGhlIGF1dGhvciBpbiB0aGUgcGF0aCBwYXJhbWV0ZXJcbiAvLyAgICAgICB9LFxuIC8vICAgICAgIHtcbiAvLyAgICAgICAgIHVzZXJSb2xlOiAnYWRtaW4nLCAvLyB0aGlzIGlzIHRoZSBzYW1lIGFzIHsgdXNlclJvbGU6IHsgZXE6IFwiYWRtaW5cIiB9IH1cbiAvLyAgICAgICB9LFxuIC8vICAgICBdLFxuIC8vICAgfSlcbiAvLyAgIC5iZWZvcmVVcGxvYWQoKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gLy8gICAgIHJldHVybiB0cnVlO1xuIC8vICAgfSlcbiAvLyAgIC5iZWZvcmVEZWxldGUoKHsgY3R4LCBmaWxlIH0pID0+IHtcbiAvLyAgICAgcmV0dXJuIHRydWU7XG4gLy8gICB9KTtcbiAvLyBjb25zdCBiID0gZXMuaW1hZ2VCdWNrZXQoKS5wYXRoKCh7IGN0eCB9KSA9PiBbeyBhdXRob3I6IGN0eC51c2VySWQgfV0pO1xuIC8vIGNvbnN0IHJvdXRlciA9IGVzLnJvdXRlcih7XG4gLy8gICBvcmlnaW5hbDogaW1hZ2VzQnVja2V0LFxuIC8vICAgaW1hZ2VCdWNrZXQ6IGEsXG4gLy8gICBpbWFnZUJ1Y2tldDI6IGIsXG4gLy8gfSk7XG4gLy8gZXhwb3J0IHsgcm91dGVyIH07XG4gLy8gdHlwZSBMaXN0RmlsZXNSZXNwb25zZTxUQnVja2V0IGV4dGVuZHMgQW55Um91dGVyWydidWNrZXRzJ11bc3RyaW5nXT4gPSB7XG4gLy8gICBkYXRhOiB7XG4gLy8gICAgIC8vIHVybDogc3RyaW5nO1xuIC8vICAgICAvLyBzaXplOiBudW1iZXI7XG4gLy8gICAgIC8vIHVwbG9hZGVkQXQ6IERhdGU7XG4gLy8gICAgIC8vIG1ldGFkYXRhOiBJbmZlck1ldGFkYXRhT2JqZWN0PFRCdWNrZXQ+O1xuIC8vICAgICBwYXRoOiBJbmZlckJ1Y2tldFBhdGhLZXlzPFRCdWNrZXQ+IGV4dGVuZHMgc3RyaW5nID8ge1xuIC8vICAgICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAvLyAgICAgfSA6e1xuIC8vICAgICAgIFtUS2V5IGluIEluZmVyQnVja2V0UGF0aEtleXM8VEJ1Y2tldD5dOiBzdHJpbmc7XG4gLy8gICAgIH07XG4gLy8gICB9W107XG4gLy8gICBwYWdpbmF0aW9uOiB7XG4gLy8gICAgIGN1cnJlbnRQYWdlOiBudW1iZXI7XG4gLy8gICAgIHRvdGFsUGFnZXM6IG51bWJlcjtcbiAvLyAgICAgdG90YWxDb3VudDogbnVtYmVyO1xuIC8vICAgfTtcbiAvLyB9O1xuIC8vIHR5cGUgVFBhdGhLZXlzID0gJ2F1dGhvcicgfCAndHlwZSc7XG4gLy8gdHlwZSBUUGF0aEtleXMyID0gSW5mZXJCdWNrZXRQYXRoS2V5czxBbnlCdWlsZGVyPjtcbiAvLyB0eXBlIE9iamVjdFdpdGhLZXlzPFRLZXlzIGV4dGVuZHMgc3RyaW5nPiA9IHtcbiAvLyAgIFtUS2V5IGluIFRLZXlzXTogc3RyaW5nO1xuIC8vIH07XG4gLy8gdHlwZSBUZXN0MSA9IE9iamVjdFdpdGhLZXlzPFRQYXRoS2V5cz47XG4gLy8gdHlwZSBUZXN0MiA9IE9iamVjdFdpdGhLZXlzPFRQYXRoS2V5czI+O1xuIC8vIHR5cGUgUGF0aEtleXMgPSBJbmZlckJ1Y2tldFBhdGhLZXlzPHR5cGVvZiByb3V0ZXIuYnVja2V0cy5pbWFnZUJ1Y2tldD47XG4gLy8gdHlwZSBNZXRhZGF0YUtleXMgPSBJbmZlck1ldGFkYXRhT2JqZWN0PHR5cGVvZiByb3V0ZXIuYnVja2V0cy5pbWFnZUJ1Y2tldD47XG4gLy8gdHlwZSBNeUVkZ2VTdG9yZVJvdXRlciA9IHR5cGVvZiByb3V0ZXI7XG4gLy8gdHlwZSBNeUFjY2Vzc0NvbnRyb2wgPSBBY2Nlc3NDb250cm9sU2NoZW1hPENvbnRleHQsIEFueURlZj47XG5cbmV4cG9ydCB7IEVER0VfU1RPUkVfRVJST1JfQ09ERVMsIEVkZ2VTdG9yZUFwaUNsaWVudEVycm9yLCBFZGdlU3RvcmVFcnJvciwgaW5pdEVkZ2VTdG9yZSB9O1xuIl0sIm5hbWVzIjpbInoiLCJfZGVmaW5lX3Byb3BlcnR5JDEiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiRURHRV9TVE9SRV9FUlJPUl9DT0RFUyIsIkJBRF9SRVFVRVNUIiwiRklMRV9UT09fTEFSR0UiLCJNSU1FX1RZUEVfTk9UX0FMTE9XRUQiLCJVTkFVVEhPUklaRUQiLCJVUExPQURfTk9UX0FMTE9XRUQiLCJERUxFVEVfTk9UX0FMTE9XRUQiLCJDUkVBVEVfQ09OVEVYVF9FUlJPUiIsIlNFUlZFUl9FUlJPUiIsIkVkZ2VTdG9yZUVycm9yIiwiRXJyb3IiLCJmb3JtYXR0ZWRNZXNzYWdlIiwibWVzc2FnZSIsImRldGFpbHMiLCJKU09OIiwic3RyaW5naWZ5IiwiY2F1c2UiLCJmb3JtYXR0ZWRKc29uIiwiY29kZSIsImNvbnN0cnVjdG9yIiwib3B0cyIsIm5hbWUiLCJsZXZlbCIsInVuZGVmaW5lZCIsIl9kZWZpbmVfcHJvcGVydHkiLCJFZGdlU3RvcmVBcGlDbGllbnRFcnJvciIsInJlc3BvbnNlIiwiZGF0YSIsImNyZWF0ZVBhdGhQYXJhbVByb3h5IiwiZ2V0UGF0aCIsInRhcmdldCIsIl9wcm9wIiwicHJveHlGdW5jdGlvbiIsIlByb3h5IiwiZ2V0IiwiX3RhcmdldCIsInByb3BDaGlsZCIsIlN0cmluZyIsInByb3AiLCJjcmVhdGVOZXdCdWlsZGVyIiwiaW5pdERlZiIsIm5ld0RlZiIsIm1lcmdlZERlZiIsImNyZWF0ZUJ1aWxkZXIiLCJ0eXBlIiwiX2RlZiIsImlucHV0IiwibmV2ZXIiLCJwYXRoIiwibWV0YWRhdGEiLCIkY29uZmlnIiwiY3R4IiwicGF0aFJlc29sdmVyIiwicGF0aFBhcmFtUHJveHkiLCJwYXJhbXMiLCJhY2Nlc3NDb250cm9sIiwiYmVmb3JlVXBsb2FkIiwiYmVmb3JlRGVsZXRlIiwiRWRnZVN0b3JlQnVpbGRlciIsImNvbnRleHQiLCJjcmVhdGUiLCJjcmVhdGVFZGdlU3RvcmVJbm5lciIsImNyZWF0ZVJvdXRlckZhY3RvcnkiLCJjcmVhdGVSb3V0ZXJJbm5lciIsImJ1Y2tldHMiLCJpbml0QnVja2V0IiwiY29uZmlnIiwiYnVja2V0Q29uZmlnIiwiaW5pdEVkZ2VTdG9yZUlubmVyIiwiaW1hZ2VCdWNrZXQiLCJmaWxlQnVja2V0Iiwicm91dGVyIiwiaW5pdEVkZ2VTdG9yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\n");

/***/ })

};
;